<header id="header" class="header navbar navbar-expand-lg navbar-dark navbar-floating header-sticky" data-fixed-element>
    <div class="navbar-search bg-light">
        <div class="container d-flex flex-nowrap align-items-center">
            <%- this.icon('search', {size: 'lg'}) %>
            <input class="form-control form-control-xl navbar-search-field" type="text"
                   placeholder="<%= this.__('search') %>">
            <div class="d-none d-sm-block flex-shrink-0 ps-2 me-3 border-start border-end" style="width: 14rem;">
                <select class="form-select ps-2 pe-0">
                    <option value="all"><%= this.__('all') %></option>
                    <% groups.forEach(group => { %>
                        <option value="<%= group.id %>"><%= group.name %></option>
                    <% }) %>
                </select>
            </div>
            <div class="d-flex align-items-center">
                <button class="btn-close p-2" type="button" data-bs-toggle="search"></button>
            </div>
        </div>
    </div>
    <div class="container px-0 px-xl-3">
        <button class="navbar-toggler ms-n2 me-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#primaryMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand flex-shrink-0 order-lg-1 ms-0 me-auto ms-lg-0 pe-lg-2 me-lg-4" href="/">
            <img class="d-none d-lg-block" src="<%= logo %>" alt="<%= title %>">
            <img class="d-lg-none" src="<%= icon %>" alt="<%= title %>">
        </a>
        <div class="d-flex align-items-center order-lg-3 ms-lg-auto">
            <div class="navbar-tool d-none">
                <a class="navbar-tool-icon-box me-2" href="#" data-bs-toggle="search" style="font-size: 1.2em">
                    <%- this.icon('search', {size: 'xs'}) %>
                </a>
            </div>
            <div class="navbar-tool">
                <a id="btn-open-wishlist" class="navbar-tool-icon-box me-2" href="#" style="font-size: 1.3em">
                    <%- this.icon('heart', {size: 'xs'}) %>
                    <span id="wishlist-count" class="badge rounded-pill bg-primary fs-xs opacity-75 d-none"
                          style="position: absolute; right: -2px; top: -2px;">0</span>
                </a>
            </div>
            <div id="customer-dropdown" class="dropdown">
                <div class="navbar-tool">
                    <a class="navbar-tool-icon-box me-2" href="#" data-bs-toggle="dropdown" style="font-size: 1.1em">
                        <%- this.icon('user', {size: 'xs'}) %>
                    </a>
                    <div id="customer-dropdown-menu" class="dropdown-menu dropdown-menu-end">
                        <a class="dropdown-item" data-state="guest" href="#" data-action="sign-in">
                            <%- this.icon('sign-in-alt') %>
                            <span class="ms-1 me-3"><%= this.__('sign-in') %></span>
                        </a>
                        <a class="dropdown-item" data-state="customer" href="#" data-action="profile">
                            <%- this.icon('user') %>
                            <span class="ms-1 me-3"><%= this.__('profile') %></span>
                        </a>
                        <% if (balanceEnabled) { %>
                            <a class="dropdown-item" data-state="customer" href="#" data-action="balance">
                                <%- this.icon('credit-card') %>
                                <span class="ms-1 me-3"><%= this.__('balance') %></span>
                            </a>
                        <% } %>
                        <% if (bonusesEnabled) { %>
                            <a class="dropdown-item" data-state="customer" href="#" data-action="bonus">
                                <%- this.icon('piggy-bank') %>
                                <span class="ms-1 me-3"><%= this.__('bonuses') %></span>
                            </a>
                        <% } %>
                        <a class="dropdown-item" data-state="customer" href="#" data-action="orders">
                            <%- this.icon('history') %>
                            <span class="ms-1 me-3"><%= this.__('history-of-orders') %></span>
                        </a>
                        <a class="dropdown-item" href="#"
                           data-state="customer"
                           data-action="sign-out"
                           data-title="<%= this.__('sign-out') %>"
                           data-message="<%= this.__('sign-out-message') %>"
                           data-yes="<%= this.__('yes') %>"
                           data-no="<%= this.__('no') %>">
                            <%- this.icon('sign-out-alt') %>
                            <span class="ms-1 me-3"><%= this.__('sign-out') %></span>
                        </a>
                        <a class="dropdown-item" href="#" data-action="review">
                            <%- this.icon('comment-dots') %>
                            <span class="ms-1 me-3"><%= this.__('leave-review') %></span>
                        </a>
                        <a class="dropdown-item" href="#" data-action="support">
                            <%- this.icon('life-ring') %>
                            <span class="ms-1 me-3"><%= this.__('support') %></span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-start me-2" style="height: 30px;"></div>
            <div class="navbar-tool me-2">
                <a class="navbar-tool-icon-box btn-cart" href="#" style="font-size: 1.45em">
                    <%- this.icon('shopping-basket', {size: 'xs'}) %>
                    <span class="badge rounded-pill bg-primary fs-xs opacity-75 d-none cart-amount"
                          style="position: absolute; right: -16px; top: -2px;">0</span>
                </a>
            </div>
        </div>

        <div class="offcanvas offcanvas-collapse order-lg-2" id="primaryMenu">
            <div class="offcanvas-header navbar-shadow">
                <h5 class="mt-1 mb-0"><%= this.__('menu') %></h5>
                <button class="btn-close lead" type="button" data-bs-dismiss="offcanvas"
                        aria-label="<%= this.__('close') %>"></button>
            </div>
            <div class="offcanvas-body">
                <!-- Menu-->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a id="place-link" class="nav-link d-flex align-items-center" role="button"
                           data-choose-a-place="<%= this.__('choose-a-place') %>"
                           data-not-working="<%= this.__('not-working') %>"
                           data-already-here="<%= this.__('already-here') %>"
                           data-yes="<%= this.__('yes') %>"
                           data-no="<%= this.__('no') %>">
                            <%- this.icon('map-marker-alt', {size: 'lg'}) %>
                            <div class="d-inline-block ms-2">
                                <div id="place-phone" class="fs-xs"></div>
                                <span id="place-address" class="fs-sm"></span>
                            </div>
                        </a>
                    </li>
                    <% if (headerLinks.length > 0) { %>
                        <div class="border-start mx-2 d-none d-lg-block align-self-flex-start align-self-lg-center" style="height: 40px;"></div>
                        <% headerLinks.forEach(link => { %>
                            <li class="nav-item align-self-flex-start align-self-lg-center">
                                <a class="nav-link" target="<%= link.target %>" href="<%= link.href %>"><%= link.text %></a>
                            </li>
                        <% }); %>
                    <% } %>
                </ul>
            </div>
            <!--<div class="offcanvas-footer border-top">
                <a class="btn btn-translucent-primary d-block w-100" href="#">
                    <%- this.icon('sign-in-alt', {size: 'lg'}) %>
                    <span class="ms-2"><%= this.__('sign-in') %></span>
                </a>
            </div>-->
        </div>
    </div>
</header>
