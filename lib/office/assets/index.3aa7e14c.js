import{s as e,_ as t,f as a,c as i,a as s,r as l,o as n,b as o,w as r,d as c,e as d,t as u,m as p,i as h,g as m,h as f,v as b,n as g,p as v,j as k,k as y,l as $,q as w,F as C,u as x,$ as _,x as I,y as S,z as U,A as P,B as D,C as T,D as q,E as L,G as O,H as z,I as j,J as A,K as B,L as E,M as V,N as M,O as N,P as F,Q as R,R as H,S as G,T as K,U as W,V as Z,W as Y,X as J,Y as Q,Z as X,a0 as ee,a1 as te,a2 as ae,a3 as ie,a4 as se,a5 as le,a6 as ne}from"./vendor.ecbe2555.js";function oe(t){let a="";return e.get("debug")&&(a="http://localhost:4000"),a+=t||"/",a}function re(e,a,i){if(e&&e.search("base64")>-1)return e;i||(i="image");let s=t.isNumber(a)?a:80;switch(a){case"mini":s=40;break;case"small":s=82;break;case"big":s=164}e||(e="avatar"===i?"no-avatar.png":"no-photo.png");const l=oe(`/v1/images/${i}/${s}/${e}`);return console.log(l),l}function ce(e,a,i){let s=t.isNumber(a)?a:80;switch(a){case"mini":s=120;break;case"small":s=1080;break;case"big":s=1920}e||(e=`no-${i}-banner.png`);const l=oe(`/v1/images/banner/${s}/${e}`);return console.log(l),l}function de(e){return new URLSearchParams(window.location.search.substring(1)).get(e)}function ue(e){let t;try{t=new URL(e)}catch(a){return!1}return"http:"===t.protocol||"https:"===t.protocol}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const pe=i({state:()=>({params:{},user:{},units:[],colors:[],brands:!0,delivery:!0,tables:!0,ordersAreActive:!1,windowIsActive:!1}),mutations:{params(e,t){e.params=t},user(e,t){e.user=t},units(e,t){e.units=t},colors(e,t){e.colors=t},brands(e,t){e.brands=t},delivery(e,t){e.delivery=t},tables(e,t){e.tables=t},ordersAreActive(e,t){e.ordersAreActive=t},windowIsActive(e,t){e.windowIsActive=t}}});function he(e){"."!==(e=t.trim(e)).slice(-1)&&(e+="."),a.toast.create({text:e,closeTimeout:2e3,position:"bottom",horizontalPosition:"center"}).open()}function me(i,s){if(a.panel.close(),i){if(e.set("user",i),0===t.size(pe.state.user)&&("operator"===i.role?(a.views.main.router.navigate("/operator/",{reloadAll:!0}),a.views.left.router.navigate("/navigation/operator/",{reloadAll:!0})):(a.views.main.router.navigate("/dashboard/",{reloadAll:!0}),a.views.left.router.navigate("/navigation/manager/",{reloadAll:!0}))),s){let t=e.get("users");t||(t=[]);let a=!0,l={id:i.id,name:i.name,email:i.email,password:s};for(let e=0;e<t.length;e++){if(t[e].id===i.id){a=!1,t[e]=l;break}}a&&t.push(l),e.set("users",t)}pe.commit("user",i),i.id}else pe.commit("user",{}),e.remove("user"),a.views.main.router.navigate("/empty/",{reloadAll:!0}),a.views.left.router.navigate("/navigation/empty/",{reloadAll:!0}),a.views.main.router.navigate("/sign-in/")}function fe(){return e.get("user")}const be={};be.render=function(e,t){const a=l("f7-page");return n(),o(a)};const ge={name:"manager-navigation",computed:{title(){return this.$store.state.user.name},subtitle(){return this.$store.state.user.email},media(){return re(this.$store.state.user.avatar,"mini","avatar")}},methods:{navigate(e){a.panel.get("left").$el.once("panel:closed",(t=>{a.views.main.router.navigate(e)})),a.panel.close()}}};ge.render=function(e,t,a,i,s,u){const p=l("f7-navbar"),h=l("f7-list-item"),m=l("f7-list");l("f7-block-title");const f=l("f7-page");return n(),o(f,null,{default:r((()=>[c(p,{title:e.$t("navigation")},null,8,["title"]),c(m,{"media-list":"",class:"list-profile"},{default:r((()=>[c(h,{link:"/navigation/account/",title:u.title,media:u.media,subtitle:u.subtitle},null,8,["title","media","subtitle"])])),_:1}),d("",!0)])),_:1})};const ve={name:"operator-navigation",computed:{title(){return this.$store.state.user.name},subtitle(){return this.$store.state.user.email},media(){return re(this.$store.state.user.avatar,"mini","avatar")}},methods:{onSale(){a.panel.get("left").$el.once("panel:closed",(async()=>{const e=await s.get("/v1/customer/showcase"),i=await s.get("/v1/user/sold-out"),l=t.get(e.data,"groups",[]),n=t.get(e.data,"products",[]),o={};t.each(n,(e=>{o[e.id]=e})),a.views.main.router.navigate("/sold-out/",{props:{groups:l,products:o,soldOut:i.data}})})),a.panel.close()},testOrder(){a.panel.get("left").$el.once("panel:closed",(()=>{a.dialog.confirm(this.$t("test-order-content"),this.$t("test-order"),(async()=>{await s.put("/v1/user/order/test",{})}))})),a.panel.close()}}};let ke;ve.render=function(e,t,a,i,s,d){const p=l("f7-navbar"),h=l("f7-list-item"),m=l("f7-list"),f=l("f7-block-title"),b=l("f7-icon"),g=l("f7-page");return n(),o(g,null,{default:r((()=>[c(p,{title:e.$t("navigation")},null,8,["title"]),c(m,{"media-list":"",class:"list-profile"},{default:r((()=>[c(h,{link:"/navigation/account/",title:d.title,media:d.media,subtitle:d.subtitle},null,8,["title","media","subtitle"])])),_:1}),c(f,{textContent:u(e.$t("menu"))},null,8,["textContent"]),c(m,{class:"list-with-icon"},{default:r((()=>[c(h,{title:e.$t("on-sale"),link:"",onClick:t[0]||(t[0]=e=>d.onSale())},{media:r((()=>[c(b,{icon:"fas fa-fw fa-shopping-basket"})])),_:1},8,["title"]),c(h,{title:e.$t("test-order"),link:"",onClick:t[1]||(t[1]=e=>d.testOrder())},{media:r((()=>[c(b,{icon:"fas fa-fw fa-play-circle"})])),_:1},8,["title"])])),_:1})])),_:1})};const ye={alert:{url:"alert.mp3"},dead:{url:"dead.wav"},smash:{url:"smash.mp3"},ping:{url:"ping.mp3"},bump:{url:"bump.mp3"},jump:{url:"jump.wav"},coin:{url:"coin.mp3"}};function $e(e){let t=ye[e],a=oe("/sounds/"+t.url),i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType="arraybuffer",i.onload=function(){ke.decodeAudioData(i.response,(function(e){t.buffer=e}))},i.send()}function we(e,t){if(AudioContext){let a=ye[e],i=ye[e].volume||1,s=a.buffer;if(s){let e=ke.createBufferSource();e.buffer=s;let a=ke.createGain();t?t.volume&&(a.gain.value=i*t.volume):a.gain.value=i,a.connect(ke.destination),e.connect(a),e.start(0)}}}const Ce=p(),xe=Ce.on,_e=Ce.off,Ie=Ce.emit;let Se;function Ue(){Se=h(oe(),{transports:["websocket"],pingTimeout:6e4}),Se.on("connect",(()=>{console.log("socket connect"),pe.state.ordersAreActive&&Ie("orders:update");const e=fe();e&&Se.emit("join",{userid:e.id,token:e.token})})),Se.on("disconnect",(()=>{console.log("socket disconnected")})),Se.on("connect_error",(e=>{console.log("socket connect_error",e),setTimeout((()=>{Se.connect()}),1e3)})),Se.on("order",(e=>{var t;Ie("order",e),"new"===e.status&&pe.state.ordersAreActive&&(!0===pe.state.windowIsActive?we("coin",{volume:t}):function(e){we("alert",{volume:e})}())}))}function Pe(e,t){Se&&Se.emit(e,t)}const De={name:"user-navigation",computed:{title(){return this.$store.state.user.name}},methods:{navigate(e){a.panel.get("left").$el.once("panel:closed",(t=>{a.views.main.router.navigate(e)})),a.panel.close()},signOut(){a.dialog.confirm(this.$t("sign-out-note"),this.$t("sign-out"),(async()=>{await s.delete("/v1/user/auth")&&(Pe("leave"),me())}))}}};De.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-navbar"),m=l("f7-icon"),f=l("f7-list-item"),b=l("f7-list"),g=l("f7-page");return n(),o(g,null,{default:r((()=>[c(h,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"])])),_:1}),c(b,{class:"list-with-icon"},{default:r((()=>[c(f,{title:e.$t("profile"),link:"",onClick:t[0]||(t[0]=e=>d.navigate("/profile/"))},{media:r((()=>[c(m,{icon:"fas fa-fw fa-address-card"})])),_:1},8,["title"]),c(f,{title:e.$t("change-password"),link:"",onClick:t[1]||(t[1]=e=>d.navigate("/change-password/"))},{media:r((()=>[c(m,{icon:"fas fa-fw fa-lock-alt"})])),_:1},8,["title"]),c(f,{title:e.$t("skin"),link:"",onClick:t[2]||(t[2]=e=>d.navigate("/skin/"))},{media:r((()=>[c(m,{icon:"fas fa-fw fa-paint-brush"})])),_:1},8,["title"]),c(f,{title:e.$t("sign-out"),link:"",onClick:t[3]||(t[3]=e=>d.signOut())},{media:r((()=>[c(m,{icon:"fas fa-fw fa-sign-out"})])),_:1},8,["title"])])),_:1})])),_:1})};const Te={},qe=m("p",null,"Sorry",-1),Le=m("p",null,"Requested content not found.",-1);Te.render=function(e,t,a,i,s,d){const u=l("f7-navbar"),p=l("f7-block"),h=l("f7-page");return n(),o(h,null,{default:r((()=>[c(u,{title:"Not found","back-link":"Back"}),c(p,{strong:""},{default:r((()=>[qe,Le])),_:1})])),_:1})};const Oe={name:"main-page",data:()=>({}),computed:{showInDevelopment:()=>!1,showOrders(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.orders"))},showTables(){return this.$store.state.tables},showPlaces(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.places"))},showBrands(){return this.showPlaces&&this.$store.state.brands},showChecklists(){const e=fe();return t.includes(["write"],t.get(e,"permits.checklists"))},showMarketing(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.marketing"))},showContent(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.content"))},showShowcase(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.showcase"))},showCustomers(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.customers"))},showSettings(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.settings"))},showUsers(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.users"))},showReports(){const e=fe();return t.includes(["read","write"],t.get(e,"permits.reports"))}},methods:{inDevelopment(){he(this.$t("in-development"))},async cashback(){const e=await s.get("/v1/user/config/cashback");a.views.main.router.navigate("/cashback/",{props:{settings:e.data}})},async mysteryShoppers(){const e=await s.get("/v1/user/config/mystery-shopper");a.views.main.router.navigate("/mystery-shoppers/",{props:{settings:e.data}})},navigate(e){a.views.main.router.navigate(e)},async form(e){const t=await s.get(`/v1/user/form/${e}`);a.views.main.router.navigate("/form/",{props:{type:e,value:t.data}})},async orders(){const e=await s.get("/v1/user/places"),i={};t.each(e.data,(e=>{i[e.id]=e})),a.views.main.router.navigate("/operator/",{props:{places:i}})},settings(){a.views.main.router.navigate("/settings/")}}};function ze(){return Math.random().toString(36).toString(36).substr(2,9)}function je(e){return pe.state.units[e]||e}function Ae(e){return g(e).format({trimMantissa:!1,mantissa:2})}function Be(e){if(void 0===e)return"";return 12===("en"===a.params.language?12:24)?((e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?" AM":" PM",e[0]=+e[0]%12||12),e.join("")):e}function Ee(e,t){if(t&&"-"===e)return!0;switch(e){case" ":case"\t":case"\r":case"\n":case"\f":return!0;default:return!1}}function Ve(e){if(!e)return"";e=function(e,t,a){if(!e)return"";let i=0;for(;Ee(e.charAt(i),a);)++i;let s=e.length-1;for(;Ee(e.charAt(s),a);)--s;if(s>=i){let l=e.slice(i,s+1);return t&&(l=l.replace(/\s\s+/g," ")),a&&(l=l.replace(/\-\-+/g,"-")),l}return""}(e.toLowerCase(),!0,!0);let t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"sch","ъ":"y","ы":"yi","ь":"","э":"e","ю":"yu","я":"ya"," ":"-"},a="";for(let i=0;i<e.length;i++){let s=e.charCodeAt(i),l=e.substr(i,1);s>=48&&s<=57||s>=97&&s<=122||95===s?a+=l:t.hasOwnProperty(l)&&(a+=t[l])}return a}function Me(e){return e.replace(/(<([^>]+)>)/gi,"")}Oe.render=function(e,t,a,i,s,p){const h=l("f7-icon"),m=l("f7-link"),g=l("f7-nav-left"),v=l("f7-nav-title"),k=l("f7-nav-right"),y=l("f7-navbar"),$=l("f7-list-item"),w=l("f7-list"),C=l("f7-block-title"),x=l("f7-page");return n(),o(x,null,{default:r((()=>[c(y,null,{default:r((()=>[c(g,null,{default:r((()=>[c(m,{"icon-only":"",tooltip:e.$t("menu"),"panel-open":"left"},{default:r((()=>[c(h,{ios:"f7:menu",md:"material:menu"})])),_:1},8,["tooltip"])])),_:1}),c(v,{title:e.$t("dashboard"),subtitle:e.$t("welcome")},null,8,["title","subtitle"]),c(k,null,{default:r((()=>[p.showSettings?(n(),o(m,{key:0,"icon-only":"",onClick:t[0]||(t[0]=e=>p.settings())},{default:r((()=>[c(h,{icon:"fas fa-cogs"})])),_:1})):d("",!0)])),_:1})])),_:1}),f(c(w,{class:"list-with-icon"},{default:r((()=>[f(c($,{title:e.$t("orders"),link:"",onClick:t[1]||(t[1]=e=>p.orders())},{media:r((()=>[c(h,{icon:"fas fa-fw fa-shopping-basket"})])),_:1},8,["title"]),[[b,p.showOrders]]),f(c($,{title:e.$t("booking"),footer:e.$t("in-development"),link:"",onClick:t[2]||(t[2]=e=>p.inDevelopment())},{media:r((()=>[c(h,{icon:"fas fa-fw fa-utensils"})])),_:1},8,["title","footer"]),[[b,p.showTables]])])),_:1},512),[[b,p.showOrders||p.showTables]]),f(c(C,{textContent:u(e.$t("placement"))},null,8,["textContent"]),[[b,p.showPlaces]]),f(c(w,{class:"list-with-icon"},{default:r((()=>[f(c($,{title:e.$t("places"),link:"",onClick:t[3]||(t[3]=e=>p.navigate("/places/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-map-marked-alt"})])),_:1},8,["title"]),[[b,p.showPlaces]]),f(c($,{title:e.$t("brands"),link:"",onClick:t[4]||(t[4]=e=>p.navigate("/brands/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-copyright"})])),_:1},8,["title"]),[[b,p.showBrands]]),f(c($,{title:e.$t("price-levels"),link:"",onClick:t[5]||(t[5]=e=>p.navigate("/price-levels/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-barcode"})])),_:1},8,["title"]),[[b,p.showInDevelopment]]),f(c($,{title:e.$t("delivery-areas"),link:"",onClick:t[6]||(t[6]=e=>p.navigate("/delivery-areas/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-bicycle"})])),_:1},8,["title"]),[[b,p.showInDevelopment]]),f(c($,{title:e.$t("checklists"),link:"",onClick:t[7]||(t[7]=e=>p.navigate("/checklists/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-tasks"})])),_:1},8,["title"]),[[b,p.showChecklists]]),c($,{title:e.$t("inspections"),link:"",onClick:t[8]||(t[8]=e=>p.navigate("/inspections/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-calendar-check"})])),_:1},8,["title"])])),_:1},512),[[b,p.showPlaces]]),f(c(C,{textContent:u(e.$t("content"))},null,8,["textContent"]),[[b,p.showContent]]),f(c(w,{class:"list-with-icon"},{default:r((()=>[c($,{title:e.$t("pages"),footer:e.$t("in-development"),link:"",onClick:t[9]||(t[9]=e=>p.inDevelopment())},{media:r((()=>[c(h,{icon:"fas fa-fw fa-columns"})])),_:1},8,["title","footer"]),c($,{title:e.$t("articles"),footer:e.$t("in-development"),link:"",onClick:t[10]||(t[10]=e=>p.inDevelopment())},{media:r((()=>[c(h,{icon:"fas fa-fw fa-file-alt"})])),_:1},8,["title","footer"]),c($,{title:e.$t("agreements"),link:"",onClick:t[11]||(t[11]=e=>p.navigate("/agreements/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-file-signature"})])),_:1},8,["title"])])),_:1},512),[[b,p.showShowcase]]),f(c(C,{textContent:u(e.$t("showcase"))},null,8,["textContent"]),[[b,p.showShowcase]]),f(c(w,{class:"list-with-icon"},{default:r((()=>[c($,{title:e.$t("products"),link:"",onClick:t[12]||(t[12]=e=>p.navigate("/catalog/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-folders"})])),_:1},8,["title"]),c($,{title:e.$t("modifiers"),link:"",onClick:t[13]||(t[13]=e=>p.navigate("/modifiers/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-shapes"})])),_:1},8,["title"]),c($,{title:e.$t("ingredients"),link:"",onClick:t[14]||(t[14]=e=>p.navigate("/ingredients/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-puzzle-piece"})])),_:1},8,["title"]),f(c($,{title:e.$t("filters"),link:"",onClick:t[15]||(t[15]=e=>p.navigate("/filters/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-filter"})])),_:1},8,["title"]),[[b,p.showInDevelopment]]),c($,{title:e.$t("stickers"),link:"",onClick:t[16]||(t[16]=e=>p.navigate("/stickers/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-tags"})])),_:1},8,["title"])])),_:1},512),[[b,p.showShowcase]]),f(c(C,{textContent:u(e.$t("marketing"))},null,8,["textContent"]),[[b,p.showMarketing]]),f(c(w,{class:"list-with-icon"},{default:r((()=>[c($,{title:e.$t("promotions"),link:"",onClick:t[17]||(t[17]=e=>p.navigate("/promotions/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-images"})])),_:1},8,["title"]),c($,{title:e.$t("notifications"),link:"",onClick:t[18]||(t[18]=e=>p.navigate("/notifications/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-bells"})])),_:1},8,["title"]),c($,{title:e.$t("seasons"),link:"",onClick:t[19]||(t[19]=e=>p.navigate("/seasons/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-badge-percent"})])),_:1},8,["title"]),c($,{title:e.$t("gifts"),link:"",onClick:t[20]||(t[20]=e=>p.navigate("/gifts/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-gift"})])),_:1},8,["title"]),c($,{title:e.$t("promocodes"),link:"",onClick:t[21]||(t[21]=e=>p.navigate("/promocodes/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-sticky-note"})])),_:1},8,["title"]),c($,{title:e.$t("cashback"),link:"",onClick:t[22]||(t[22]=e=>p.cashback())},{media:r((()=>[c(h,{icon:"fas fa-fw fa-piggy-bank"})])),_:1},8,["title"]),f(c($,{title:e.$t("discounts"),link:"",onClick:t[23]||(t[23]=e=>p.navigate("/discounts/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-percentage"})])),_:1},8,["title"]),[[b,p.showInDevelopment]]),c($,{title:e.$t("reviews"),link:"",onClick:t[24]||(t[24]=e=>p.navigate("/reviews/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-comment-dots"})])),_:1},8,["title"]),c($,{title:e.$t("support"),link:"",onClick:t[25]||(t[25]=e=>p.navigate("/support/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-life-ring"})])),_:1},8,["title"])])),_:1},512),[[b,p.showMarketing]]),f(c(C,{textContent:u(e.$t("users"))},null,8,["textContent"]),[[b,p.showUsers||p.showCustomers]]),f(c(w,{class:"list-with-icon"},{default:r((()=>[f(c($,{title:e.$t("employees"),link:"",onClick:t[26]||(t[26]=e=>p.navigate("/users/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-user-tie"})])),_:1},8,["title"]),[[b,p.showUsers]]),c($,{title:e.$t("user-profile"),link:"",onClick:t[27]||(t[27]=e=>p.form("user-profile"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-id-card"})])),_:1},8,["title"]),f(c($,{title:e.$t("customers"),link:"",onClick:t[28]||(t[28]=e=>p.navigate("/customers/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-user"})])),_:1},8,["title"]),[[b,p.showCustomers]]),c($,{title:e.$t("mystery-shopper"),link:"",onClick:t[29]||(t[29]=e=>p.mysteryShoppers())},{media:r((()=>[c(h,{icon:"fas fa-fw fa-user-secret"})])),_:1},8,["title"])])),_:1},512),[[b,p.showUsers||p.showCustomers]]),f(c(C,{textContent:u(e.$t("reports"))},null,8,["textContent"]),[[b,p.showReports]]),f(c(w,{class:"list-with-icon"},{default:r((()=>[c($,{title:e.$t("sales-report"),link:"",onClick:t[30]||(t[30]=e=>p.navigate("/sales-report/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-chart-line"})])),_:1},8,["title"]),c($,{title:e.$t("statistics"),link:"",onClick:t[31]||(t[31]=e=>p.navigate("/statistics/"))},{media:r((()=>[c(h,{icon:"fas fa-fw fa-chart-bar"})])),_:1},8,["title"])])),_:1},512),[[b,p.showReports]])])),_:1})};const Ne={name:"operator-page",props:{places:{type:Object,default:{},required:!1}},data:()=>({status:"current",items:[]}),computed:{subtitle:()=>fe().address,isOperator:()=>"operator"===fe().role,showDelivery(){return this.$store.state.delivery}},mounted(){this.getItems(),this.$store.commit("ordersAreActive",!0),xe("order",this.order),xe("orders:update",(()=>{this.getItems()}))},unmounted(){this.$store.commit("ordersAreActive",!1),_e("order"),_e("orders:update")},methods:{setStatus(e){this.status=e,this.getItems()},async getItems(){const e=await s.get(`/v1/user/orders/${this.status}`,{preloader:!1});0===t.size(e.data)&&he(this.$t("nothing-found")),this.items=e.data},order(e){let a=-1,i=!1;switch(t.each(this.items,((t,i)=>{if(t.orderid===e.orderid)return a=i,!1})),this.status){case"current":"new"!==e.status&&"returned"!==e.status&&"processed"!==e.status||(i=!0);break;case"processed":"preparing"!==e.status&&"going"!==e.status||(i=!0);break;case"delivered":"delivered"===e.status&&(i=!0);break;case"completed":"finished"!==e.status&&"canceled"!==e.status||(i=!0);break;case"unpaid":"unpaid"===e.status&&(i=!0)}i?-1===a?this.items.push(e):this.items[a]=e:a>-1&&this.items.splice(a,1)},formatCost:e=>Ae(e),obtaining(e){return t.toLower(this.$t(e))},dateAndTimeFormat(e){return y(new Date(e),this.$t("date-and-time-format"))},itemFooter(e){let a="";if(t.size(e.modifiers)){const i=[];t.each(e.modifiers,(e=>{i.push(`${e.name} ${e.quantity} x ${Ae(e.amount)} = ${Ae(e.quantity*e.amount)}`)})),a=`${i.join(", ")}.`}return a},async changeItem(e,t){if(e.items[t].ready)await s.delete(`/v1/user/order/progress/${e.orderid}/${t}`,{preloader:!1});else{const a={orderIndex:e.index,itemIndex:t};await s.patch("/v1/user/order/progress",a,{preloader:!1})}},finishOrder(e){a.dialog.confirm(this.$t("finish-order-content"),this.$t("finish-order-title"),(async()=>{const t={orderid:e.orderid,status:"finished"};await s.patch("/v1/user/order/status",t,{preloader:!1})}))},scan(){a.dialog.prompt(this.$t("gift-message"),this.$t("gift-title"),(async e=>{const a=t.trim(e);if(a){const e={code:a},i=await s.post("/v1/user/gift/charge",e),l=t.get(i.data,"message");l&&he(l)}}))}}};v("data-v-0164bca7");const Fe={class:"margin-bottom display-flex justify-content-space-between"},Re={key:0,class:"margin-bottom display-flex justify-content-space-between"},He={class:"margin-top margin-bottom display-flex justify-content-space-between"},Ge={class:"margin-bottom display-flex justify-content-space-between"},Ke={key:1,class:"margin-bottom display-flex justify-content-space-between"},We={key:2,class:"margin-bottom order-wishes display-flex justify-content-space-between"},Ze={key:3,class:"margin-bottom order-wishes display-flex justify-content-space-between"},Ye={key:4,class:"margin-top order-discount"},Je={class:"margin-top order-total"};k(),Ne.render=function(e,t,a,i,s,p){const h=l("f7-icon"),f=l("f7-link"),b=l("f7-nav-left"),g=l("f7-nav-title"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("f7-toolbar"),_=l("f7-tab"),I=l("f7-tabs"),S=l("f7-progressbar"),U=l("f7-list-item"),P=l("f7-list"),D=l("f7-button"),T=l("f7-card"),q=l("f7-col"),L=l("f7-row"),O=l("f7-page");return n(),o(O,null,{default:r((()=>[c(k,null,{default:r((()=>[c(b,{"back-link":!p.isOperator&&e.$t("back")},{default:r((()=>[p.isOperator?(n(),o(f,{key:0,"icon-only":"",tooltip:e.$t("menu"),"panel-open":"left"},{default:r((()=>[c(h,{ios:"f7:menu",md:"material:menu"})])),_:1},8,["tooltip"])):d("",!0)])),_:1},8,["back-link"]),c(g,{title:e.$t("orders"),subtitle:p.subtitle},null,8,["title","subtitle"]),c(v,null,{default:r((()=>[c(f,{"icon-only":"",onClick:t[0]||(t[0]=e=>p.scan())},{default:r((()=>[c(h,{icon:"fas fa-qrcode"})])),_:1})])),_:1})])),_:1}),c(y,{tabbar:"",labels:"",top:""},{default:r((()=>[c(f,{"tab-link":"#tab-1",text:e.$t("orders-current"),icon:"fas fa-play","icon-size":"16","tab-link-active":"",onClick:t[1]||(t[1]=e=>p.setStatus("current"))},null,8,["text"]),p.showDelivery?(n(),o(f,{key:0,"tab-link":"#tab-2",text:e.$t("orders-delivered"),icon:"fas fa-car","icon-size":"16",onClick:t[2]||(t[2]=e=>p.setStatus("delivered"))},null,8,["text"])):d("",!0),c(f,{"tab-link":"#tab-3",text:e.$t("orders-completed"),icon:"fas fa-stop","icon-size":"16",onClick:t[3]||(t[3]=e=>p.setStatus("completed"))},null,8,["text"]),c(f,{"tab-link":"#tab-4",text:e.$t("orders-unpaid"),icon:"fas fa-credit-card","icon-size":"16",onClick:t[4]||(t[4]=e=>p.setStatus("unpaid"))},null,8,["text"])])),_:1}),c(I,null,{default:r((()=>[c(_,{id:"tab-1","tab-active":""}),p.showDelivery?(n(),o(_,{key:0,id:"tab-2"})):d("",!0),c(_,{id:"tab-3"}),c(_,{id:"tab-4"})])),_:1}),c(L,{class:"orders-row","no-gap":""},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(q,{key:t.orderid,width:"100",medium:"50",xlarge:"33"},{default:r((()=>[c(T,{class:"orders-card",header:!1},{content:r((()=>[m("div",Fe,[m("span",null,u(t.number),1),m("span",null,u(p.dateAndTimeFormat(t.date)),1)]),p.isOperator?d("",!0):(n(),$("div",Re,[m("span",null,u(e.$t("place"))+":",1),m("span",null,u(a.places[t.placeid].address),1)])),c(S,{color:"green",progress:t.progress/t.items.length*100},null,8,["progress"]),m("div",He,[m("span",null,u(t.name),1),m("span",null,u(t.phone||t.email),1)]),m("div",Ge,[m("span",null,u(e.$t("obtaining"))+":",1),m("span",null,u(p.obtaining(t.obtaining)),1)]),"delivery"===t.obtaining?(n(),$("div",Ke,[m("span",null,u(e.$t("address"))+":",1),m("span",null,u(t.address),1)])):d("",!0),t.desiredTime?(n(),$("div",We,[m("span",null,u(e.$t("desired-time"))+":",1),m("span",null,u(p.dateAndTimeFormat(t.desiredTime)),1)])):d("",!0),t.wishes?(n(),$("div",Ze,[m("span",null,u(e.$t("wishes"))+":",1),m("span",null,u(t.wishes),1)])):d("",!0),c(P,{class:"margin-top"},{default:r((()=>[(n(!0),$(C,null,w(t.items,((e,a)=>(n(),o(U,{key:t.orderid+"-"+a,checkbox:"",title:e.name,name:t.orderid,after:p.formatCost(e.amount),footer:p.itemFooter(e),checked:e.ready,disabled:"current"!==s.status,onChange:e=>p.changeItem(t,a)},null,8,["title","name","after","footer","checked","disabled","onChange"])))),128))])),_:2},1024),t.discount?(n(),$("div",Ye,u(e.$t("discount"))+": "+u(p.formatCost(t.discount)),1)):d("",!0),m("div",Je,u(e.$t("total"))+": "+u(p.formatCost(t.amount)),1),"current"===s.status?(n(),o(D,{key:5,class:"order-button",fill:"",onClick:e=>p.finishOrder(t)},{default:r((()=>[x(u(e.$t("ready")),1)])),_:2},1032,["onClick"])):d("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})},Ne.__scopeId="data-v-0164bca7";const Qe={data:()=>({canClick:!0}),mounted(){this.$nextTick(this.initSwipeout)},updated(){this.$nextTick(this.initSwipeout)},methods:{initSwipeout(){if(a.device.desktop){const e=_(this.$el).find(".swipeout");t.each(e,(e=>{const i=_(e);if(t.isUndefined(i.data("ready"))){i.data("ready",!0),i.on("swipeout:open",(()=>{this.canClick=!1,t.isUndefined(this.sortable)||(this.sortable=!1)})),i.on("swipeout:opened",(()=>{})),i.on("swipeout:close",(()=>{})),i.on("swipeout:closed",(()=>{this.canClick=!0,t.isUndefined(this.sortable)||(this.sortable=!1)}));const e=i.find(".item-link");e.on("click",(e=>{e.preventDefault(),i.hasClass("swipeout-opened")&&a.swipeout.close(i)})),e.on("contextmenu",(e=>{e.preventDefault(),i.hasClass("swipeout-opened")?a.swipeout.close(i):a.swipeout.open(i)}))}}))}}}},Xe={name:"accounts-popup",mixins:[Qe],props:{f7router:Object},data(){const t=e.get("users");return{searchbarid:ze(),users:t||[]}},methods:{back(){a.popup.close(this.$el)},itemDelete(t){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{const a=e.get("users");for(let e=0;e<a.length;e++)if(a[e].id===t.id){a.splice(e,1);break}a.length>0?e.set("users",a):(this.f7router.back(),e.remove("users")),this.users=a,Ie("set:users",a)}))},itemSelect(e){this.canClick&&(Ie("set:email:and:password",{email:e.email,password:e.password}),this.f7router.back())}}};Xe.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-icon"),m=l("f7-link"),f=l("f7-nav-right"),b=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(g,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("saved-accounts")},null,8,["title"]),c(f,null,{default:r((()=>[c(m,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(h,{icon:"fas fa-fw fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(b,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-header,.item-footer",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1}),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),c(k,{id:`list-${s.searchbarid}`},{default:r((()=>[(n(!0),$(C,null,w(s.users,(e=>(n(),o(v,{key:e.email,link:!0,title:e.name,subtitle:e.email,onClick:t=>d.itemSelect(e),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"red",onClick:t=>d.itemDelete(e)},{default:r((()=>[c(h,{icon:"fas fa-fw fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","subtitle","onClick"])))),128))])),_:1},8,["id"])])),_:1})};const et={name:"save-button",emits:["click"],props:{label:String,mini:{type:Boolean,default:!1},fill:{type:Boolean,default:!0}},methods:{click(e){e.preventDefault(),this.$emit("click")}}};et.render=function(e,t,a,i,s,d){const p=l("f7-icon"),h=l("f7-link"),m=l("f7-button"),f=l("f7-col"),b=l("f7-row"),g=l("f7-block");return a.mini?(n(),o(h,{key:0,"icon-only":"",onClick:d.click},{default:r((()=>[c(p,{icon:"fas fa-save"})])),_:1},8,["onClick"])):(n(),o(g,{key:1},{default:r((()=>[c(b,null,{default:r((()=>[c(f,null,{default:r((()=>[c(m,{large:"",fill:a.fill,onClick:d.click,textContent:u(a.label||e.$t("save"))},null,8,["fill","onClick","textContent"])])),_:1})])),_:1})])),_:1}))};const tt={name:"password-recovery-page",components:{SaveButton:et},props:{value:{type:String,default:""},f7router:Object},data(){return{email:this.value}},methods:{async send(){const e={};let t=0;if(this.email?e.email=this.email:t++,t>0)return void he(this.$t("fill-required-fields"));await s.patch("/v1/user/auth",e)&&(he(this.$t("password-recovery-success")),this.f7router.back())}}},at=["textContent"];tt.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),f=l("f7-navbar"),b=l("f7-block"),g=l("f7-list-input"),v=l("f7-list"),k=l("save-button"),y=l("f7-page");return n(),o(y,null,{default:r((()=>[c(f,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("password-recovery-title")},null,8,["title"])])),_:1}),c(b,{strong:""},{default:r((()=>[m("p",{textContent:u(e.$t("password-recovery-message"))},null,8,at)])),_:1}),c(v,null,{default:r((()=>[c(g,{label:e.$t("email"),type:"email",placeholder:e.$t("email-placeholder"),value:s.email,"onUpdate:value":t[0]||(t[0]=e=>s.email=e),class:"required",autocomplete:"off"},null,8,["label","placeholder","value"])])),_:1}),c(k,{label:e.$t("password-recovery-button"),onClick:t[1]||(t[1]=e=>d.send())},null,8,["label"])])),_:1})};const it={name:"html-editor-page",components:{VueEditor:S.exports.VueEditor},props:{value:String,title:String,f7router:Object},data(){return{html:this.value,editorHeight:0}},computed:{language:()=>a.params.language,editorToolbar:()=>[[{header:[2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.setEditorHeight),this.setEditorHeight()}))},unmounted(){window.removeEventListener("resize",this.setEditorHeight)},methods:{setEditorHeight(){let e="md"===a.theme?64:44;e+=_(".ql-toolbar").outerHeight(!0),this.editorHeight=document.getElementById("html-editor").offsetHeight-e},save(){Ie("html",this.html),this.f7router.back()}}};it.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-navbar"),f=l("vue-editor"),b=l("f7-page");return n(),o(b,{id:"html-editor"},{default:r((()=>[c(m,{title:a.title||e.$t("editing"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>d.save())},{default:r((()=>[c(u,{icon:"fas fa-save"})])),_:1})])),_:1})])),_:1},8,["title","back-link"]),c(f,{ref:"editor",class:I("ql-"+d.language),modelValue:s.html,"onUpdate:modelValue":t[1]||(t[1]=e=>s.html=e),editorToolbar:d.editorToolbar,style:U({height:s.editorHeight+"px",paddingBottom:"14px"})},null,8,["class","modelValue","editorToolbar","style"])])),_:1})};const st={name:"schedule-item-page",props:{day:{type:Object,required:!0},extended:{type:Boolean,required:!0},f7router:Object},data(){const e=[];for(let t=0;t<24;t++)for(let a=0;a<60;a++)if(a%5==0){let i=t>9?t.toString():"0"+t,s=a>9?a.toString():"0"+a;e.push(i+":"+s)}const a=[];for(let i=5;i<725;i++)if(i%5==0){let e=Math.floor(i/60),s=i-60*e,l="";e>0&&(l+=e+" "+this.$t("h")+" "),s&&(l+=s+" "+this.$t("m")+" "),a.push({value:i,label:t.trim(l)})}return{id:this.day.id,name:this.day.name,times:e,differently:void 0!==this.day.id,workingDay:!0!==this.day.off,start:this.day.start,end:this.day.end,isBreak:!(!this.day.interval||!this.day.duration),durations:a,interval:t.get(this.day,"interval","13:00"),duration:t.get(this.day,"duration",60),fullDay:this.day.start===this.day.end,title:this.$t(this.day.name||"editing")}},computed:{virtualListHeight:()=>"md"===a.theme?48:44},watch:{start(){this.start===this.end&&(this.fullDay=!0)},end(){this.start===this.end&&(this.fullDay=!0)},fullDay(){this.fullDay?(this.start="00:00",this.end="00:00"):(this.start="10:00",this.end="22:00")}},methods:{formatTime:e=>Be(e),parseTime(e){let a=e.split(":");return 60*t.parseInt(a[0])+t.parseInt(a[1])},save(){const e={};if(this.start===this.end?(e.start="00:00",e.end="00:00"):(e.start=this.start,e.end=this.end),this.isBreak){let t=this.parseTime(this.start),a=this.parseTime(this.end);if(t===a)e.interval=this.interval,e.duration=this.duration;else{let i=this.parseTime(this.interval),s=this.duration,l=0;if(t>a?(l=1440-t+a,i=l-a+i,i>1440&&(i-=1440)):(l=a-t,i-=t),!(i>0&&i+s+5<l))return he(this.$t("break-error"));e.interval=this.interval,e.duration=this.duration}}this.differently&&(e.id=this.id,e.name=this.name,e.off=!this.workingDay),Ie("schedule:item",e),this.f7router.back()}}},lt=["value","textContent"],nt=["value","textContent"],ot=["value","textContent"],rt=["value","textContent"];st.render=function(e,t,a,i,s,p){const h=l("f7-icon"),b=l("f7-link"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list"),x=l("f7-page");return n(),o(x,null,{default:r((()=>[c(v,{title:s.title,"back-link":e.$t("back")},{default:r((()=>[c(g,null,{default:r((()=>[c(b,{"icon-only":"",onClick:t[0]||(t[0]=e=>p.save())},{default:r((()=>[c(h,{icon:"fas fa-save"})])),_:1})])),_:1})])),_:1},8,["title","back-link"]),c(y,null,{default:r((()=>[s.differently&&a.extended?(n(),o(k,{key:0,checkbox:"",title:e.$t("working-day"),checked:s.workingDay,"onUpdate:checked":t[1]||(t[1]=e=>s.workingDay=e)},null,8,["title","checked"])):d("",!0),s.workingDay&&a.extended?(n(),o(k,{key:1,checkbox:"",title:e.$t("full-day"),checked:s.fullDay,"onUpdate:checked":t[2]||(t[2]=e=>s.fullDay=e)},null,8,["title","checked"])):d("",!0),!s.fullDay&&s.workingDay?(n(),o(k,{key:2,"smart-select":"",title:e.$t("schedule-start"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"start","onUpdate:modelValue":t[3]||(t[3]=e=>s.start=e)},[(n(!0),$(C,null,w(s.times,(e=>(n(),$("option",{value:e,textContent:u(p.formatTime(e))},null,8,lt)))),256))],512),[[P,s.start]])])),_:1},8,["title","smart-select-params"])):d("",!0),!s.fullDay&&s.workingDay?(n(),o(k,{key:3,"smart-select":"",title:e.$t("schedule-end"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"end","onUpdate:modelValue":t[4]||(t[4]=e=>s.end=e)},[(n(!0),$(C,null,w(s.times,(e=>(n(),$("option",{value:e,textContent:u(p.formatTime(e))},null,8,nt)))),256))],512),[[P,s.end]])])),_:1},8,["title","smart-select-params"])):d("",!0),s.workingDay&&a.extended?(n(),o(k,{key:4,checkbox:"",title:e.$t("break"),checked:s.isBreak,"onUpdate:checked":t[5]||(t[5]=e=>s.isBreak=e)},null,8,["title","checked"])):d("",!0),s.workingDay&&s.isBreak&&a.extended?(n(),o(k,{key:5,"smart-select":"",title:e.$t("break-start"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"break-start","onUpdate:modelValue":t[6]||(t[6]=e=>s.interval=e)},[(n(!0),$(C,null,w(s.times,(e=>(n(),$("option",{value:e,textContent:u(p.formatTime(e))},null,8,ot)))),256))],512),[[P,s.interval]])])),_:1},8,["title","smart-select-params"])):d("",!0),s.workingDay&&s.isBreak&&a.extended?(n(),o(k,{key:6,"smart-select":"",title:e.$t("break-duration"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"break-end","onUpdate:modelValue":t[7]||(t[7]=e=>s.duration=e)},[(n(!0),$(C,null,w(s.durations,(e=>(n(),$("option",{value:e.value,textContent:u(e.label)},null,8,rt)))),256))],512),[[P,s.duration]])])),_:1},8,["title","smart-select-params"])):d("",!0)])),_:1})])),_:1})};const ct={name:"places-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("places:update",this.getItems)},unmounted(){_e("places:update")},methods:{getBadge(e){let t="";return e.primary?t=this.$t("primary"):e.test&&(t=this.$t("test")),t},getBadgeColor(e){let t="";return e.primary?t="green":e.test&&(t="red"),t},getPicture(e){return e.picture?re(e.picture,"small","image"):this.getMap(e.coordinates,140)},getMap:(e,t)=>function(e,t){const i=oe(`/v1/images/map.png?latitude=${e.latitude}&longitude=${e.longitude}&size=${t}&lang=${a.params.language}`);return console.log(i),i}(e,t),getFooter(e){let a="";const i=[];return e.delivery&&i.push(t.toLower(this.$t("delivery"))),e.pickup&&i.push(t.toLower(this.$t("pickup"))),e.inside&&i.push(t.toLower(this.$t("inside"))),t.size(i)&&(a=`${this.$t("obtaining")}: ${t.join(i,", ")}.`),a},pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/places",{params:a});"function"==typeof e&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e,t){this.canClick&&this.editItem(t)},async editItem(e){const t=await s.get(`/v1/user/place/${e}`);this.f7router.navigate(`/place/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/place/${e}`),await this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/places",{ids:a})}}};ct.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("places"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-subtitle",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems},{default:r((()=>[(n(!0),$(C,null,w(s.items,((e,t)=>(n(),o(v,{link:"",key:e.id,media:d.getPicture(e),onClick:t=>d.clickItem(t,e.id),header:e.phone,title:e.name,subtitle:e.description,badge:d.getBadge(e),"badge-color":d.getBadgeColor(e),footer:d.getFooter(e),swipeout:"",class:I({grayscale:!e.active})},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:t=>d.editItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["media","onClick","header","title","subtitle","badge","badge-color","footer","class"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const dt={name:"schedule-editor",emits:["change"],props:{value:{type:[Array]},type:{type:String,default:"calendar"},extended:{type:Boolean,default:!0}},data(){let e="always",i={start:"10:00",end:"22:00"},s=[{id:1,name:"tuesday",start:"10:00",end:"22:00",off:!1},{id:2,name:"wednesday",start:"10:00",end:"22:00",off:!1},{id:3,name:"thursday",start:"10:00",end:"22:00",off:!1},{id:4,name:"friday",start:"10:00",end:"22:00",off:!1},{id:5,name:"saturday",start:"10:00",end:"22:00",off:!1},{id:6,name:"sunday",start:"10:00",end:"22:00",off:!1}];if("en"===a.params.language?s.push({id:0,name:"monday",start:"10:00",end:"22:00",off:!1}):s.unshift({id:0,name:"monday",start:"10:00",end:"22:00",off:!1}),1===t.size(this.value)){e="daily";let t=this.value[0];i.start=t.start,i.end=t.end,t.interval&&t.duration&&(i.interval=t.interval,i.duration=t.duration)}else 7===t.size(this.value)&&(e="differently",t.forEach(this.value,((e,a)=>{let i=t.find(s,{id:a});"off"===e?i.off=!0:(i.start=e.start,i.end=e.end,e.interval&&e.duration&&(i.interval=e.interval,i.duration=e.duration))})));let l=this.$t("schedule-always");return"display"===this.type&&(l=this.$t("never")),{interval:e,daily:i,days:s,always:l}},watch:{interval(){this.change()}},mounted(){xe("schedule:item",(e=>{switch(this.interval){case"daily":this.daily=e;break;case"differently":const a=t.findIndex(this.days,{id:e.id});this.days[a]=e}this.change()}))},unmounted(){_e("schedule:item")},methods:{formatTime:e=>Be(e),footer(e){let a;if(e.interval&&e.duration){let i=Math.floor(e.duration/60),s=e.duration-60*i,l="";i>0&&(l+=i+" "+this.$t("h")+" "),s&&(l+=s+" "+this.$t("m")+" "),a=this.$t("break")+": "+Be(e.interval)+", "+t.trim(l)}else a=this.$t("without-break");return a},edit(e){a.views.current.router.navigate("/schedule-item/",{props:{day:e,extended:this.extended}})},change(){let e;switch(this.interval){case"daily":let a={start:this.daily.start,end:this.daily.end};this.daily.interval&&this.daily.duration&&(a.interval=this.daily.interval,a.duration=this.daily.duration),e=[a];break;case"differently":e=[],t.forEach(this.days,(t=>{if(t.off)e[t.id]="off";else{let a={start:t.start,end:t.end};t.interval&&t.duration&&(a.interval=t.interval,a.duration=t.duration),e[t.id]=a}}))}this.$emit("change",e)}}},ut=["textContent"],pt=["textContent"],ht=["textContent"],mt=x(" – "),ft=m("span",null," – ",-1);dt.render=function(e,t,a,i,s,p){const h=l("f7-block-title"),b=l("f7-list-item"),g=l("f7-badge"),v=l("f7-list");return n(),$(C,null,[c(h,{medium:"",textContent:u(e.$t("schedule"))},null,8,["textContent"]),c(v,null,{default:r((()=>[c(b,{"smart-select":"",title:e.$t("time"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"interval","onUpdate:modelValue":t[0]||(t[0]=e=>s.interval=e)},[m("option",{value:"always",textContent:u(s.always)},null,8,ut),m("option",{value:"daily",textContent:u(e.$t("schedule-daily"))},null,8,pt),m("option",{value:"differently",textContent:u(e.$t("schedule-differently"))},null,8,ht)],512),[[P,s.interval]])])),_:1},8,["title"]),"daily"===s.interval?(n(),o(b,{key:0,link:"",title:e.$t("daily"),onClick:t[1]||(t[1]=e=>p.edit(s.daily)),footer:p.footer(s.daily)},{after:r((()=>[m("span",null,[s.daily.start!==s.daily.end?(n(),$(C,{key:0},[c(g,{color:"blue",textContent:u(p.formatTime(s.daily.start))},null,8,["textContent"]),mt,c(g,{color:"blue",textContent:u(p.formatTime(s.daily.end))},null,8,["textContent"])],64)):d("",!0),s.daily.start===s.daily.end?(n(),o(g,{key:1,color:"blue",textContent:u(e.$t("schedule-always"))},null,8,["textContent"])):d("",!0)])])),_:1},8,["title","footer"])):d("",!0),"differently"===s.interval?(n(!0),$(C,{key:1},w(s.days,(t=>(n(),o(b,{key:t.id,link:"",title:e.$t(t.name),subtitle:p.footer(t),onClick:e=>p.edit(t)},{after:r((()=>[m("span",null,[t.off||t.start===t.end?d("",!0):(n(),$(C,{key:0},[c(g,{color:"blue",textContent:u(p.formatTime(t.start))},null,8,["textContent"]),ft,c(g,{color:"blue",textContent:u(p.formatTime(t.end))},null,8,["textContent"])],64)),t.off||t.start!==t.end?d("",!0):(n(),o(g,{key:1,color:"blue",textContent:u(e.$t("schedule-always"))},null,8,["textContent"])),t.off?(n(),o(g,{key:2,color:"red",textContent:u(e.$t("off-day"))},null,8,["textContent"])):d("",!0)])])),_:2},1032,["title","subtitle","onClick"])))),128)):d("",!0)])),_:1})],64)};const bt={data:()=>({}),mounted(){this.$nextTick((()=>{const e=_(this.$el).find(".resizable");t.each(e,(e=>{const t=_(e);a.input.resizeTextarea(t)}))}))},methods:{back(){this.close()},close(){a.popup.close(this.$el)}}},gt={name:"pictures-editor",emits:["change"],props:{value:{type:[String,Array],required:!1},type:{type:String,required:!0},editorType:{type:String,required:!1}},data(){const e={canClick:!0,sortable:!1};switch(this.type){case"photo":e.picture=this.value;break;case"gallery":case"editor":const a=t.cloneDeep(this.value);e.pictures=t.size(a)?a:[]}return e},mounted(){xe("crop",(e=>{this.setPicture(e.picture,e.index)})),xe("gallery",(e=>{this.pictures=e,this.$emit("change",t.cloneDeep(this.pictures))})),xe("gallery:item",(e=>{let a=t.clone(this.pictures[e.index]);a.name=e.name,a.description=e.description,this.pictures[e.index]=a}))},unmounted(){_e("crop"),_e("gallery"),_e("gallery:item")},computed:{canAdd(){return"photo"!==this.type},canCrop(){let e=!1;switch(this.type){case"photo":e=t.size(this.picture)>0;break;case"gallery":e=t.size(this.pictures)>0;break;case"editor":e=!0}return e}},methods:{getBadge(e){let a="";switch(this.type){case"gallery":a=t.size(this.pictures).toString();break;case"editor":a=e.width&&e.height?`${e.width}x${e.height}`:""}return a},getMedia(e){let a="";switch(this.type){case"photo":a=re(this.picture,"small","image");break;case"gallery":a=re(t.size(this.pictures)?this.pictures[0].picture:void 0,"small","image");break;case"editor":a=re(e.picture,"small","image")}return a},getText(e){let t="";switch(this.type){case"photo":t=this.$t("picture-text");break;case"gallery":t=this.$t("gallery-text");break;case"editor":t=e.description?e.description:this.$t("no-description")}return t},getSubtitle(e){let t="";switch(this.type){case"photo":t=this.$t("picture-subtitle");break;case"gallery":t=this.$t("gallery-subtitle");break;case"editor":t="photo"===e.type||"picture"===e.type?this.$t("photo"):this.$t("video")}return t},getTitle(e){let t="";switch(this.type){case"photo":t=this.$t("photo");break;case"gallery":t=this.$t("gallery");break;case"editor":t=e.name?e.name:this.$t("no-header")}return t},setPicture(e,a){if("photo"===this.type)t.isPlainObject(e)?this.picture=e.picture:this.picture=e,this.$emit("change",this.picture);else{if(t.isNumber(a)){let i;t.isPlainObject(e)?i=t.clone(e):(i=t.clone(this.pictures[a]),i.picture=e),this.pictures[a]=i}else this.pictures.push(e);"gallery"===this.type&&this.$emit("change",t.cloneDeep(this.pictures))}},uploadPictures(e,i){let l=[];if(t.each(e,(e=>{("image/png"===e.type||"image/jpeg"===e.type)&&e.size<=512e4&&l.push(e)})),l.length<1)return he("photo"===this.type?this.$t("picture-text"):this.$t("gallery-text"));"editor"!==this.type&&(l=[l[0]]);const n=a.dialog.progress(1===l.length?this.$t("loading-file"):this.$t("loading-files"),1===l.length?void 0:0);l.length>1&&n.setText(this.$t("uploaded",{current:0,total:l.length})),D(l,1,(async(e,t,a)=>{const o=new FormData;o.append("file",e);const r=await s.post("/v1/user/upload/photo",o);this.setPicture({name:"",description:"",type:"picture",picture:r.data[0].picture,width:r.data[0].width,height:r.data[0].height},i),l.length>1&&(n.setProgress(100*(t+1)/l.length),n.setText(this.$t("uploaded",{current:t+1,total:l.length}))),a(null,!0)}),(e=>{n.close(),e&&he(this.$t("something-went-wrong"))}))},cropPicture(e){a.views.current.router.navigate("/crop/",{props:{index:e,picture:"photo"===this.type?this.picture:this.pictures[0].picture}})},deletePicture(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.pictures.splice(e,1)}))},dragOver(e){e.preventDefault(),_(e.target).parents(".item-link").addClass("active-state")},dragLeave(e){e.preventDefault(),_(e.target).parents(".item-link").removeClass("active-state")},drop(e,t){e.preventDefault(),_(e.target).parents(".item-link").removeClass("active-state"),this.uploadPictures(e.dataTransfer.files,t)},contextMenu(e){e.preventDefault();const t=_(e.target).parents("li");t.hasClass("swipeout-opened")?a.swipeout.close(t):a.swipeout.open(t)},clickItem(e,t){if(this.canClick){const i=_(e.target).parents("li");i.hasClass("swipeout-opened")?a.swipeout.close(i):this.editItem(t,!0)}},editItem(e,i){switch(this.type){case"photo":this.addPicture(e);break;case"gallery":a.views.current.router.navigate("/gallery/",{props:{pictures:t.cloneDeep(this.pictures),type:this.type}});break;case"editor":let i=t.clone(this.pictures[e]);a.views.current.router.navigate("/gallery-item/",{props:{item:{name:i.name,description:i.description},index:e}})}},addPicture(e){const t=_("#file");t.val(""),t.attr("accept",".jpg,.jpeg,.png"),"editor"===this.type?t.attr("multiple",""):t.removeAttr("multiple"),t.once("change",(t=>{if(void 0===window.File||void 0===window.FileReader||void 0===window.FileList||void 0===window.Blob)return he(this.$t("not-support-file-uploads"));this.uploadPictures(t.currentTarget.files,e)})),t.click()},addVideo(){a.dialog.prompt(this.$t("add-video-note"),this.$t("add-video"),(async e=>{const t=await s.post("/v1/user/image/video",{url:e});he(this.$t("add-video-success")),this.setPicture({name:t.data.name,description:t.data.description,type:"youtube",url:e,videoid:t.data.videoid,picture:t.data.picture,width:t.data.width,height:t.data.height})}))},sort(e){this.sortable=!1,this.pictures.move(e.from,e.to)}}},vt=["onDrop"];gt.render=function(e,t,a,i,s,u){const p=l("f7-icon"),h=l("f7-swipeout-button"),g=l("f7-swipeout-actions"),v=l("f7-list-item"),k=l("f7-list");return n(),o(k,{"media-list":"",sortable:"","sortable-enabled":e.sortable,"onSortable:sort":u.sort},{default:r((()=>["photo"===a.type||"gallery"===a.type?(n(),o(v,{key:0,link:"",swipeout:"",title:u.getTitle(),subtitle:u.getSubtitle(),text:u.getText(),media:u.getMedia(),badge:u.getBadge(),onClick:t[7]||(t[7]=e=>u.clickItem(e,0)),"onSwipeout:open":t[8]||(t[8]=t=>e.canClick=!1),"onSwipeout:opened":t[9]||(t[9]=t=>e.canClick=!0),"onSwipeout:close":t[10]||(t[10]=t=>e.canClick=!0)},{content:r((()=>[m("div",{class:"contextmenu",onContextmenu:t[0]||(t[0]=e=>u.contextMenu(e)),onDragover:t[1]||(t[1]=e=>u.dragOver(e)),onDragleave:t[2]||(t[2]=e=>u.dragLeave(e)),onDrop:t[3]||(t[3]=e=>u.drop(e,0))},null,32)])),default:r((()=>[c(g,{right:""},{default:r((()=>[c(h,{close:"",color:"blue",onClick:t[4]||(t[4]=e=>u.editItem(0))},{default:r((()=>[c(p,{icon:"fas fa-fw fa-edit"})])),_:1}),f(c(h,{close:"",color:"orange",onClick:t[5]||(t[5]=e=>u.addPicture(0))},{default:r((()=>[c(p,{icon:"fas fa-fw fa-upload"})])),_:1},512),[[b,u.canAdd]]),f(c(h,{close:"",color:"green",onClick:t[6]||(t[6]=e=>u.cropPicture(0))},{default:r((()=>[c(p,{icon:"fas fa-fw fa-crop-alt"})])),_:1},512),[[b,u.canCrop]])])),_:1})])),_:1},8,["title","subtitle","text","media","badge"])):(n(!0),$(C,{key:1},w(e.pictures,((i,s)=>(n(),o(v,{key:i.picture,link:"",swipeout:"",title:u.getTitle(i),subtitle:u.getSubtitle(i),text:u.getText(i),media:u.getMedia(i),badge:u.getBadge(i),onClick:e=>u.clickItem(e,s),"onSwipeout:open":t[14]||(t[14]=t=>e.canClick=!1),"onSwipeout:opened":t[15]||(t[15]=t=>e.canClick=!0),"onSwipeout:close":t[16]||(t[16]=t=>e.canClick=!0)},{content:r((()=>[m("div",{class:"contextmenu",onContextmenu:t[11]||(t[11]=e=>u.contextMenu(e)),onDragover:t[12]||(t[12]=e=>u.dragOver(e)),onDragleave:t[13]||(t[13]=e=>u.dragLeave(e)),onDrop:e=>u.drop(e,s)},null,40,vt)])),default:r((()=>[c(g,{right:""},{default:r((()=>[c(h,{close:"",color:"orange",onClick:e=>u.addPicture(s)},{default:r((()=>[c(p,{icon:"fas fa-fw fa-upload"})])),_:2},1032,["onClick"]),f(c(h,{close:"",color:"green",onClick:e=>u.cropPicture(s)},{default:r((()=>[c(p,{icon:"fas fa-fw fa-crop-alt"})])),_:2},1032,["onClick"]),[[b,u.canCrop]]),"editor"===a.type?(n(),o(h,{key:0,close:"",color:"red",onClick:e=>u.deletePicture(s)},{default:r((()=>[c(p,{icon:"fas fa-fw fa-trash"})])),_:2},1032,["onClick"])):d("",!0)])),_:2},1024)])),_:2},1032,["title","subtitle","text","media","badge","onClick"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort"])};const kt={name:"maps",emits:["change"],props:{coordinates:Object},data:()=>({id:ze(),map:void 0,marker:void 0}),computed:{latitude(){return t.get(this.coordinates,"latitude",51.505)},longitude(){return t.get(this.coordinates,"longitude",-.09)}},watch:{coordinates(){this.map.panTo([this.latitude,this.longitude])}},mounted(){setTimeout(this.init,1e3)},methods:{init(){this.map=T.exports.map(this.id).setView([this.latitude,this.longitude],15),T.exports.tileLayer(oe("/v1/maps/{x}/{y}/{z}/tile.png"),{maxZoom:18}).addTo(this.map),this.map.on("move",(()=>{this.marker.setLatLng(this.map.getCenter())})),this.map.on("dragend",(()=>{this.$emit("change",{latitude:this.map.getCenter().lat,longitude:this.map.getCenter().lng})}));this.marker=T.exports.marker([this.latitude,this.longitude],{}).addTo(this.map)}}};v("data-v-b113ba88");const yt=["id"];k(),kt.render=function(e,t,a,i,s,l){return n(),$("div",{id:s.id,class:"map-container"},null,8,yt)},kt.__scopeId="data-v-b113ba88";const $t={name:"f7-list-item-brand-selector",emits:["update:value"],props:{brands:{type:Array,required:!0},value:{type:String,default:void 0}},watch:{value(e){this.$emit("update:value",e)}},computed:{title(){return this.$t("brand")},smartSelectParams:()=>({closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:"md"===a.theme?48:44,scrollToSelectedItem:!0})}},wt=["textContent"],Ct=["value","textContent"];$t.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return f((n(),o(d,{"smart-select":"","smart-select-params":c.smartSelectParams,title:c.title},{default:r((()=>[f(m("select",{name:"brands","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},[m("option",{value:"",textContent:u(e.$t("no"))},null,8,wt),(n(!0),$(C,null,w(a.brands,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,Ct)))),256))],512),[[P,a.value]])])),_:1},8,["smart-select-params","title"])),[[b,a.brands.length>0]])};const xt={name:"place-popup",components:{SaveButton:et,ScheduleEditor:dt,PicturesEditor:gt,Maps:kt,BrandSelector:$t},mixins:[bt,Qe],props:{value:Object,f7router:Object},data(){return{brands:t.get(this.value,"brands",[]),place:t.defaults(t.get(this.value,"place",{}),{active:!0,primary:!1,test:!1,gallery:[],delivery:!1,pickup:!1,inside:!1,brand:""}),cityAutocomplete:void 0,addressAutocomplete:void 0,areas:[],tables:[],showSort:!1,sortable:!1}},computed:{tabid:()=>ze(),virtualListHeight:()=>"md"===a.theme?48:44,showDelivery(){return this.$store.state.delivery},showTables(){return this.$store.state.tables},title(){return this.place.id?this.$t("editing"):this.$t("adding")},cityValue(){return this.place.country&&this.place.region&&this.place.city?`${this.place.country.name}, ${this.place.region.name}, ${this.place.city.name}`:""}},async mounted(){this.cityAutocomplete=a.autocomplete.create({inputEl:"#city-autocomplete",openIn:"dropdown",preloader:!1,valueProperty:"name",textProperty:"name",limit:5,dropdownPlaceholderText:this.$t("city-empty"),source:t.debounce((async(e,a)=>{const i=[];if(t.size(e)<3)a(i);else{const t={search:e};a((await s.get("/v1/user/city",{params:t})).data)}}),1e3),on:{change:e=>{t.size(e)&&(this.place.country=e[0].country,this.place.region=e[0].region,this.place.city=e[0].city,this.place.coordinates=e[0].coordinates)}}}),this.place.id&&(this.showDelivery&&await this.getAreas(),this.showTables&&await this.getTables()),xe("areas:update",(()=>{this.getAreas()})),xe("tables:update",(()=>{this.getTables()}))},unmounted(){this.cityAutocomplete&&this.cityAutocomplete.destroy(),this.addressAutocomplete&&this.addressAutocomplete.destroy(),_e("areas:update"),_e("tables:update")},methods:{async getAreas(){const e=await s.get(`/v1/user/areas/${this.place.id}`);this.areas=e.data,this.$forceUpdate()},addArea(){if(this.place.id){const e=_("#file");e.val(""),e.removeAttr("multiple"),e.attr("accept",".kml,.geojson"),e.once("change",(e=>{if(void 0===window.File||void 0===window.FileReader||void 0===window.FileList||void 0===window.Blob)return he(this.$t("not-support-file-uploads"));const a=e.currentTarget.files[0],i=t.endsWith(a.name,".kml"),l=t.endsWith(a.name,".geojson");if(i||l){const e=new FileReader;e.onload=async e=>{const t=e.target.result,a={};a.placeid=this.place.id,a.content=t,i&&(a.type="kml"),l&&(a.type="geojson"),await s.post("/v1/user/area",a),await this.getAreas()},e.readAsText(a)}})),e.click()}else he(this.$t("place-save-first"))},clickArea(e){this.canClick&&this.editArea(e)},async editArea(e){const t=await s.get(`/v1/user/area/${e.id}`);a.views.current.router.navigate(`/area/${e.id}/`,{props:{area:t.data}})},removeArea(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/area/${e.id}`),await this.getAreas()}))},getPicture:e=>re(t.get(e,"gallery.0.picture"),"small","image"),async getTables(){this.sortable=!1;const e=await s.get(`/v1/user/tables/${this.place.id}`);this.tables=e.data,this.$forceUpdate()},clickTable(e){this.canClick&&this.editTable(e)},addTable(){this.place.id?a.views.current.router.navigate("/table/new/",{props:{placeid:this.place.id}}):he(this.$t("place-save-first"))},async editTable(e){const t=await s.get(`/v1/user/table/${e.id}`);a.views.current.router.navigate(`/table/${e.id}/`,{props:{placeid:this.place.id,table:t.data}})},async removeTable(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/table/${e.id}`),this.getTables()}))},async sortTables(e){this.sortable=!1,this.tables.move(e.from,e.to);const a=[];t.each(this.tables,(e=>{a.push(e.id)})),await s.put("/v1/user/tables",{ids:a})},galleryChange(e){this.place.gallery=e},scheduleChange(e){this.place.schedule=e},coordinatesChange(e){this.place.coordinates=e},async save(){const e={};return e.gallery=this.place.gallery,e.active=this.place.active,e.primary=this.place.primary,e.test=!this.place.primary&&this.place.test,e.delivery=this.place.delivery,e.pickup=this.place.pickup,e.inside=this.place.inside,this.cityValue?(e.cityid=this.place.city.cityid,this.place.address?(e.address=this.place.address,e.coordinates=this.place.coordinates,e.description=this.place.description,e.email=this.place.email,e.phone=this.place.phone,t.size(this.place.schedule)&&(e.schedule=this.place.schedule),this.place.brand&&(e.brand=this.place.brand),this.place.id?(e.id=this.place.id,await s.patch("/v1/user/place",e)):await s.post("/v1/user/place",e),Ie("places:update"),void this.f7router.back()):he(this.$t("address-empty"))):he(this.$t("city-empty"))}}},_t={class:"item-content item-input"},It={class:"item-inner"},St={class:"item-title item-label"},Ut={class:"item-input-wrap"},Pt=["placeholder","value"],Dt={key:1,class:"item-content"},Tt={class:"item-inner"};xt.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),g=l("f7-nav-title"),v=l("f7-icon"),k=l("f7-link"),y=l("save-button"),_=l("f7-nav-right"),S=l("f7-navbar"),U=l("f7-toolbar"),P=l("pictures-editor"),D=l("f7-list-input"),T=l("maps"),q=l("f7-list-item"),L=l("brand-selector"),O=l("f7-list"),z=l("f7-block-title"),j=l("schedule-editor"),A=l("f7-tab"),B=l("f7-swipeout-button"),E=l("f7-swipeout-actions"),V=l("f7-fab"),M=l("f7-tabs"),N=l("f7-page"),F=l("f7-view"),R=l("f7-popup");return n(),o(R,{"close-by-backdrop-click":!0},{default:r((()=>[c(F,{"stack-pages":!0},{default:r((()=>[c(N,null,{default:r((()=>[c(S,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(g,{title:p.title},null,8,["title"]),c(_,null,{default:r((()=>[f(c(k,{"icon-only":"",onClick:t[1]||(t[1]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(v,{icon:"fas fa-sort"})])),_:1},512),[[b,s.showSort]]),c(y,{mini:"",onClick:t[2]||(t[2]=e=>p.save())})])),_:1})])),_:1}),p.showDelivery||p.showTables?(n(),o(U,{key:0,tabbar:"",top:""},{default:r((()=>[c(k,{"tab-link":`#tab-1-${p.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),p.showDelivery?(n(),o(k,{key:0,"tab-link":`#tab-2-${p.tabid}`},{default:r((()=>[x(u(e.$t("delivery-area")),1)])),_:1},8,["tab-link"])):d("",!0),p.showTables?(n(),o(k,{key:1,"tab-link":`#tab-3-${p.tabid}`},{default:r((()=>[x(u(e.$t("tables")),1)])),_:1},8,["tab-link"])):d("",!0)])),_:1})):d("",!0),c(M,null,{default:r((()=>[c(A,{id:`tab-1-${p.tabid}`,"tab-active":""},{default:r((()=>[c(P,{value:s.place.gallery,type:"gallery",onChange:p.galleryChange},null,8,["value","onChange"]),c(O,null,{default:r((()=>[m("li",_t,[m("div",It,[m("div",St,u(e.$t("city")),1),m("div",Ut,[m("input",{id:"city-autocomplete",type:"text",placeholder:e.$t("city-empty"),value:p.cityValue,autocomplete:"off"},null,8,Pt)])])]),p.cityValue?(n(),o(D,{key:0,label:e.$t("address"),value:s.place.address,"onUpdate:value":t[3]||(t[3]=e=>s.place.address=e),type:"text",placeholder:e.$t("address-empty"),maxlength:"256"},null,8,["label","value","placeholder"])):d("",!0),p.cityValue?(n(),$("li",Dt,[m("div",Tt,[c(T,{coordinates:s.place.coordinates,onChange:p.coordinatesChange},null,8,["coordinates","onChange"])])])):d("",!0),c(D,{label:e.$t("description")+" ("+e.$t("not-required")+")",value:s.place.description,"onUpdate:value":t[4]||(t[4]=e=>s.place.description=e),type:"textarea",resizable:"",maxlength:"512"},null,8,["label","value"]),c(D,{label:e.$t("phone")+" ("+e.$t("not-required")+")",type:"tel",value:s.place.phone,"onUpdate:value":t[5]||(t[5]=e=>s.place.phone=e),maxlength:"24"},null,8,["label","value"]),c(D,{label:e.$t("email-order")+" ("+e.$t("not-required")+")",type:"email",value:s.place.email,"onUpdate:value":t[6]||(t[6]=e=>s.place.email=e),maxlength:"64"},null,8,["label","value"]),c(q,{checkbox:"",title:e.$t("displayed"),checked:s.place.active,"onUpdate:checked":t[7]||(t[7]=e=>s.place.active=e)},null,8,["title","checked"]),c(q,{checkbox:"",title:e.$t("primary"),checked:s.place.primary,"onUpdate:checked":t[8]||(t[8]=e=>s.place.primary=e)},null,8,["title","checked"]),f(c(q,{checkbox:"",title:e.$t("test"),checked:s.place.test,"onUpdate:checked":t[9]||(t[9]=e=>s.place.test=e)},null,8,["title","checked"]),[[b,!s.place.primary]]),c(L,{brands:s.brands,value:s.place.brand,"onUpdate:value":t[10]||(t[10]=e=>s.place.brand=e)},null,8,["brands","value"])])),_:1}),c(z,{medium:"",textContent:u(e.$t("obtaining"))},null,8,["textContent"]),c(O,null,{default:r((()=>[p.showDelivery?(n(),o(q,{key:0,checkbox:"",title:e.$t("delivery"),checked:s.place.delivery,"onUpdate:checked":t[11]||(t[11]=e=>s.place.delivery=e)},null,8,["title","checked"])):d("",!0),c(q,{checkbox:"",title:e.$t("pickup"),checked:s.place.pickup,"onUpdate:checked":t[12]||(t[12]=e=>s.place.pickup=e)},null,8,["title","checked"]),c(q,{checkbox:"",title:e.$t("inside"),checked:s.place.inside,"onUpdate:checked":t[13]||(t[13]=e=>s.place.inside=e)},null,8,["title","checked"])])),_:1}),c(j,{value:s.place.schedule,onChange:p.scheduleChange},null,8,["value","onChange"]),c(y,{onClick:t[14]||(t[14]=e=>p.save())})])),_:1},8,["id"]),p.showDelivery?(n(),o(A,{key:0,id:`tab-2-${p.tabid}`},{default:r((()=>[c(O,{"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.areas,(e=>(n(),o(q,{link:"",key:e.id,title:e.name,subtitle:e.description,onClick:t=>p.clickArea(e),swipeout:""},{default:r((()=>[c(E,{right:""},{default:r((()=>[c(B,{close:"",color:"blue",onClick:t=>p.editArea(e)},{default:r((()=>[c(v,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(B,{close:"",color:"red",onClick:t=>p.removeArea(e)},{default:r((()=>[c(v,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","subtitle","onClick"])))),128))])),_:1}),c(V,{onClick:t[15]||(t[15]=e=>p.addArea())},{default:r((()=>[c(v,{icon:"fas fa-plus"})])),_:1})])),_:1},8,["id"])):d("",!0),p.showTables?(n(),o(A,{key:1,id:`tab-3-${p.tabid}`,"onTab:show":t[17]||(t[17]=e=>s.showSort=!0),"onTab:hide":t[18]||(t[18]=e=>{s.showSort=!1,s.sortable=!1})},{default:r((()=>[c(O,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":p.sortTables},{default:r((()=>[(n(!0),$(C,null,w(s.tables,(e=>(n(),o(q,{link:"",key:e.id,media:p.getPicture(e),title:e.name,subtitle:e.description,onClick:t=>p.clickTable(e),swipeout:"",class:I({grayscale:!e.active})},{default:r((()=>[c(E,{right:""},{default:r((()=>[c(B,{close:"",color:"blue",onClick:t=>p.editTable(e)},{default:r((()=>[c(v,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(B,{close:"",color:"red",onClick:t=>p.removeTable(e)},{default:r((()=>[c(v,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["media","title","subtitle","onClick","class"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort"]),c(V,{onClick:t[16]||(t[16]=e=>p.addTable())},{default:r((()=>[c(v,{icon:"fas fa-plus"})])),_:1})])),_:1},8,["id"])):d("",!0)])),_:1})])),_:1})])),_:1})])),_:1})};const qt={name:"area-page",components:{SaveButton:et},props:{area:Object,f7router:Object},data(){return{name:t.get(this.area,"name",""),description:t.get(this.area,"description",""),waitingTime:t.get(this.area,"waitingTime",0),costDelivery:t.get(this.area,"costDelivery",0),freeDelivery:t.get(this.area,"freeDelivery",0),minimumAmount:t.get(this.area,"minimumAmount",0),active:t.get(this.area,"active",!0)}},computed:{title(){return this.$t("adding")}},methods:{async save(){const e=t.trim(this.name),a=t.trim(this.description),i=t.parseInt(this.waitingTime),l=t.parseInt(this.costDelivery),n=t.parseInt(this.freeDelivery),o=t.parseInt(this.minimumAmount);if(t.isEmpty(e))return he(this.$t("title-empty"));const r={};r.id=this.area.id,r.name=e,r.description=a,r.active=this.active,r.waitingTime=t.isNaN(i)?0:i,r.costDelivery=t.isNaN(l)?0:l,r.freeDelivery=t.isNaN(i)?0:n,r.minimumAmount=t.isNaN(i)?0:o,await s.patch("/v1/user/area",r),Ie("areas:update"),this.f7router.back()}}};qt.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list-item"),v=l("f7-list"),k=l("f7-page");return n(),o(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(v,null,{default:r((()=>[c(b,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[1]||(t[1]=e=>s.name=e)},null,8,["label","value"]),c(b,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"512",value:s.description,"onUpdate:value":t[2]||(t[2]=e=>s.description=e)},null,8,["label","value"]),c(b,{label:e.$t("minimum-amount"),type:"number",step:"1",min:"0",value:s.minimumAmount,"onUpdate:value":t[3]||(t[3]=e=>s.minimumAmount=e)},null,8,["label","value"]),c(b,{label:e.$t("cost-delivery"),type:"number",step:"1",min:"0",value:s.costDelivery,"onUpdate:value":t[4]||(t[4]=e=>s.costDelivery=e)},null,8,["label","value"]),c(b,{label:e.$t("free-delivery"),type:"number",step:"1",min:"0",value:s.freeDelivery,"onUpdate:value":t[5]||(t[5]=e=>s.freeDelivery=e)},null,8,["label","value"]),c(b,{label:e.$t("waiting-time"),type:"number",step:"1",min:"0",value:s.waitingTime,"onUpdate:value":t[6]||(t[6]=e=>s.waitingTime=e)},null,8,["label","value"]),c(g,{checkbox:"",title:e.$t("active"),checked:s.active,"onUpdate:checked":t[7]||(t[7]=e=>s.active=e)},null,8,["title","checked"])])),_:1}),c(h,{onClick:t[8]||(t[8]=e=>d.save())})])),_:1})};const Lt={name:"table-page",components:{PicturesEditor:gt,SaveButton:et},props:{placeid:{type:String,required:!0},table:Object,f7router:Object},data(){return{id:t.get(this.table,"id",""),gallery:t.get(this.table,"gallery",[]),name:t.get(this.table,"name",""),description:t.get(this.table,"description",""),active:t.get(this.table,"active",!0)}},computed:{title(){return this.table?this.$t("editing"):this.$t("adding")}},methods:{galleryChange(e){this.gallery=e},async save(){if(!t.size(this.gallery))return he(this.$t("gallery-subtitle"));const e=t.trim(this.name),a=t.trim(this.description);if(t.isEmpty(e))return he(this.$t("title-empty"));const i={};i.gallery=this.gallery,i.name=e,i.description=a,i.active=this.active,this.table?(i.id=this.table.id,await s.patch("/v1/user/table",i)):(i.placeid=this.placeid,await s.post("/v1/user/table",i)),Ie("tables:update"),this.f7router.back()}}};Lt.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("pictures-editor"),g=l("f7-list-input"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-page");return n(),o(y,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(k,null,{default:r((()=>[c(b,{value:s.gallery,type:"gallery",onChange:d.galleryChange},null,8,["value","onChange"]),c(g,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[1]||(t[1]=e=>s.name=e)},null,8,["label","value"]),c(g,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"512",value:s.description,"onUpdate:value":t[2]||(t[2]=e=>s.description=e)},null,8,["label","value"]),c(v,{checkbox:"",title:e.$t("active"),checked:s.active,"onUpdate:checked":t[3]||(t[3]=e=>s.active=e)},null,8,["title","checked"])])),_:1}),c(h,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})};const Ot={name:"brands-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("brands:update",this.getItems)},unmounted(){_e("brands:update")},methods:{pullToRefresh(e,t){this.getItems(t)},bannerUrl:e=>ce(e,"mini","app"),async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/brands",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const a=await s.get(`/v1/user/brand/${e}`);console.log(t.cloneDeep(a.data)),this.f7router.navigate(`/brand/${e}/`,{props:{value:a.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/brand/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/brands",{ids:a})}}};Ot.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("brands"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:"banners-list"},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.id,media:d.bannerUrl(e.picture),title:e.name,subtitle:e.description,onClick:t=>d.clickItem(e.id),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:t=>d.editItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["media","title","subtitle","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const zt={name:"banner-editor",emits:["change"],props:{value:{type:String,required:!0},type:{type:String,required:!0},title:String},computed:{text(){return this.title||this.$t("banner")},size(){return{width:1920,height:"picture"===this.type?1080:560}}},methods:{bannerUrl(e){return ce(e,"small","picture"===this.type?"app":"site")},dragOver(e){_(e.target).parents(".item-link").addClass("active-state")},dragLeave(e){_(e.target).parents(".item-link").removeClass("active-state")},drop(e){_(e.target).parents(".item-link").removeClass("active-state"),this.uploadPicture(e.dataTransfer.files)},upload(){const e=_("#file");e.val(""),e.attr("accept",".jpg,.jpeg,.png"),e.removeAttr("multiple"),e.once("change",(e=>{if(void 0===window.File||void 0===window.FileReader||void 0===window.FileList||void 0===window.Blob)return he(this.$t("not-support-file-uploads"));this.uploadPicture(e.currentTarget.files)})),e.click()},async uploadPicture(e){const a=e[0];if("image/jpeg"!==a.type)return he(this.$t("banner-note",{width:this.size.width,height:this.size.height}));const i=new FormData;i.append("file",a);const l={headers:{type:this.type}},n=await s.post("/v1/user/upload/banner",i,l);this.setPicture(t.get(n.data,"0.file"))},setPicture(e){this.$emit("change",e)}}},jt={slot:"subtitle",style:{"text-align":"center"}},At=["src"];zt.render=function(e,t,a,i,s,o){const d=l("f7-block-title"),p=l("f7-list-item"),h=l("f7-list"),f=l("f7-block-footer");return n(),$(C,null,[c(d,{medium:"",textContent:u(o.text)},null,8,["textContent"]),c(h,{"media-list":""},{default:r((()=>[c(p,{link:"",onClick:t[3]||(t[3]=e=>o.upload())},{default:r((()=>[m("div",{slot:"content",class:"contextmenu",onDragover:t[0]||(t[0]=e=>o.dragOver(e)),onDragleave:t[1]||(t[1]=e=>o.dragLeave(e)),onDrop:t[2]||(t[2]=e=>o.drop(e))},null,32),m("div",jt,[m("img",{src:o.bannerUrl(a.value),style:{"max-width":"100%","margin-top":"8px"}},null,8,At)])])),_:1})])),_:1}),c(f,{textContent:u(e.$t("banner-note",{width:o.size.width,height:o.size.height}))},null,8,["textContent"])],64)};const Bt={name:"brand-popup",components:{SaveButton:et,BannerEditor:zt},mixins:[bt],props:{value:Object},data(){return{brand:t.defaults(t.get(this.value,"brand",{}),{name:"",description:"",picture:""})}},computed:{title(){return this.brand.id?this.$t("editing"):this.$t("adding")}},methods:{pictureChange(e){this.brand.picture=e},async save(){const e=this.brand.picture,a=t.trim(this.brand.name),i=t.trim(this.brand.description),l={};return t.isEmpty(e)?he(this.$t("picture-subtitle")):t.isEmpty(a)?he(this.$t("title-empty")):(l.picture=e,l.name=a,i&&(l.description=i),this.brand.id?(l.id=this.brand.id,await s.patch("/v1/user/brand",l)):await s.post("/v1/user/brand",l),Ie("brands:update"),void this.close())}}};Bt.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("banner-editor"),g=l("f7-list-input"),v=l("f7-list"),k=l("f7-page"),y=l("f7-view"),$=l("f7-popup");return n(),o($,{"close-by-backdrop-click":!0},{default:r((()=>[c(y,{"stack-pages":!0},{default:r((()=>[c(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(b,{type:"picture",title:e.$t("banner"),value:s.brand.picture,onChange:d.pictureChange},null,8,["title","value","onChange"]),c(v,null,{default:r((()=>[c(g,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.brand.name,"onUpdate:value":t[2]||(t[2]=e=>s.brand.name=e)},null,8,["label","value"]),c(g,{label:e.$t("short-description"),type:"textarea",resizable:"",maxlength:"512",value:s.brand.description,"onUpdate:value":t[3]||(t[3]=e=>s.brand.description=e)},null,8,["label","value"])])),_:1}),c(h,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const Et={name:"catalog-page",mixins:[Qe],props:{group:Object,level:{type:Number,default:0},f7router:Object},data(){return{searchbarid:ze(),title:t.get(this.group,"name",this.$t("showcase")),groups:[],products:[],sortable:!1,searching:!1}},mounted(){this.getItems(),xe("catalog:update",(()=>{this.getItems()}))},unmounted(){_e("catalog:update")},methods:{getPicture:e=>re(e,"small","image"),searchbarSearch:t.debounce((function(e,t){this.getItems(t)}),3e3),searchbarEnable(){this.sortable=!1,this.searching=!0},searchbarDisable(){this.searching=!1},pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;let a="/v1/user/groups/items";this.group&&(a+=`/${this.group.id}`);const i={};"string"==typeof e&&e&&(i.search=e);const l=await s.get(a,{params:i});t.isFunction(e)&&e(),0===t.size(l.data)&&he(this.$t("nothing-found")),this.groups=l.data.groups,this.products=l.data.products,this.$forceUpdate()},add(){switch(this.level){case 0:this.editGroup("new");break;case 2:this.editProduct("new")}},selectGroup(e){this.canClick&&this.f7router.navigate(`/catalog/${e.id}/`,{props:{group:e,level:this.level+1}})},async moveGroup(e){const t=await s.get(`/v1/user/groups/tree/${e}`);t.data.unshift({id:"top",name:this.$t("reorder-up"),count:0}),this.f7router.navigate("/group-move/",{props:{groups:t.data,id:e}})},async editGroup(e){const t=await s.get(`/v1/user/group/${e}`);"new"===e&&this.group&&(t.data.parentid=this.group.id),this.f7router.navigate(`/group/${e}/`,{props:{value:t.data}})},async editProduct(e){const a=await s.get(`/v1/user/product/${e}`);this.f7router.navigate(`/product/${e}/`,{props:{id:t.get(this.group,"id"),value:a.data}})},removeGroup(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/group/${e}`),this.getItems()}))},removeProduct(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/product/${e}`),this.getItems()}))},async sortGroups(e){this.sortable=!1,this.groups.move(e.from,e.to);const a=[];t.forEach(this.groups,(e=>{a.push(e.id)})),await s.put("/v1/user/groups/sort",{ids:a})},async sortProducts(e){this.sortable=!1,this.products.move(e.from,e.to);const a=[];t.forEach(this.products,(e=>{a.push(e.id)})),await s.put("/v1/user/products/sort",{ids:a})}}},Vt={key:0,class:"stickers"},Mt=["textContent"],Nt={key:0,class:"stickers"},Ft=["textContent"];Et.render=function(e,t,a,i,s,p){const h=l("f7-icon"),m=l("f7-link"),f=l("f7-nav-right"),b=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-block-title"),k=l("f7-swipeout-button"),y=l("f7-swipeout-actions"),x=l("f7-list-item"),_=l("f7-list"),S=l("f7-fab-button"),P=l("f7-fab-buttons"),D=l("f7-fab"),T=l("f7-page");return n(),o(T,{ptr:"","ptr-preloader":!1,"onPtr:refresh":p.pullToRefresh},{default:r((()=>[c(g,{title:s.title,"back-link":e.$t("back")},{default:r((()=>[c(f,null,{default:r((()=>[c(m,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(h,{icon:"fas fa-sort"})])),_:1}),c(m,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(h,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(b,{class:I(`searchbar-${s.searchbarid}`),placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"custom-search":"",expandable:"",backdrop:!1,"onSearchbar:search":p.searchbarSearch,"onSearchbar:enable":p.searchbarEnable,"onSearchbar:disable":p.searchbarDisable},null,8,["class","placeholder","disable-button-text","onSearchbar:search","onSearchbar:enable","onSearchbar:disable"])])),_:1},8,["title","back-link"]),s.groups.length>0?(n(),$(C,{key:0},[c(v,{textContent:u(e.$t("groups"))},null,8,["textContent"]),c(_,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":p.sortGroups},{default:r((()=>[(n(!0),$(C,null,w(s.groups,(e=>(n(),o(x,{link:"",key:e.id,media:p.getPicture(e.picture),onClick:t=>p.selectGroup(e),title:e.name,subtitle:e.description,swipeout:"",class:I({grayscale:!e.active})},{inner:r((()=>[e.stickers.length>0?(n(),$("div",Vt,[(n(!0),$(C,null,w(e.stickers,(e=>(n(),$("span",{style:U("background-color: "+e.color.hex),textContent:u(e.name)},null,12,Mt)))),256))])):d("",!0)])),default:r((()=>[c(y,{right:""},{default:r((()=>[c(k,{close:"",color:"green",onClick:t=>p.moveGroup(e.id)},{default:r((()=>[c(h,{icon:"fas fa-folder-open"})])),_:2},1032,["onClick"]),c(k,{close:"",color:"blue",onClick:t=>p.editGroup(e.id)},{default:r((()=>[c(h,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(k,{close:"",color:"red",onClick:t=>p.removeGroup(e.id)},{default:r((()=>[c(h,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["media","onClick","title","subtitle","class"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort"])],64)):d("",!0),s.products.length>0?(n(),$(C,{key:1},[c(v,{textContent:u(e.$t("products"))},null,8,["textContent"]),c(_,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":p.sortProducts},{default:r((()=>[(n(!0),$(C,null,w(s.products,((e,t)=>(n(),o(x,{link:"",key:e.id,title:e.name,media:p.getPicture(e.picture),subtitle:e.description,swipeout:"",class:I({grayscale:!e.active}),onClick:t=>p.editProduct(e.id)},{inner:r((()=>[e.stickers.length>0?(n(),$("div",Nt,[(n(!0),$(C,null,w(e.stickers,(e=>(n(),$("span",{style:U("background-color: "+e.color.hex),textContent:u(e.name)},null,12,Ft)))),256))])):d("",!0)])),default:r((()=>[c(y,{right:""},{default:r((()=>[c(k,{close:"",color:"blue",onClick:t=>p.editProduct(e.id)},{default:r((()=>[c(h,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(k,{close:"",color:"red",onClick:t=>p.removeProduct(e.id)},{default:r((()=>[c(h,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","media","subtitle","class","onClick"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort"])],64)):d("",!0),s.searching?d("",!0):(n(),$(C,{key:2},[1===a.level?(n(),o(D,{key:0,text:e.$t("add")},{default:r((()=>[c(h,{icon:"fas fa-plus"}),c(h,{icon:"fas fa-times"}),c(P,null,{default:r((()=>[c(S,{onClick:t[1]||(t[1]=e=>p.editProduct("new")),label:e.$t("product"),"fab-close":""},{default:r((()=>[c(h,{icon:"fas fa-shopping-basket"})])),_:1},8,["label"]),c(S,{onClick:t[2]||(t[2]=e=>p.editGroup("new")),label:e.$t("group"),"fab-close":""},{default:r((()=>[c(h,{icon:"fas fa-folder"})])),_:1},8,["label"])])),_:1})])),_:1},8,["text"])):(n(),o(D,{key:1,onClick:t[3]||(t[3]=e=>p.add()),text:e.$t("add")},{default:r((()=>[c(h,{icon:"fas fa-plus"})])),_:1},8,["text"]))],64))])),_:1},8,["onPtr:refresh"])};const Rt=function(){var e=0,a=Math.floor(32767*Math.random()),i=Math.floor(16777216*Math.random());if("undefined"!=typeof localStorage){var s=t.parseInt(localStorage.mongoMachineId);s>=0&&s<=16777215&&(i=Math.floor(localStorage.mongoMachineId)),localStorage.mongoMachineId=i,document.cookie="mongoMachineId="+i+";expires=Tue, 19 Jan 2038 05:00:00 GMT"}else{var l=document.cookie.split("; ");for(var n in l){var o=l[n].split("=");if("mongoMachineId"===o[0]&&o[1]>=0&&o[1]<=16777215){i=o[1];break}}document.cookie="mongoMachineId="+i+";expires=Tue, 19 Jan 2038 05:00:00 GMT"}return function(){if(!(this instanceof Rt))return new Rt(arguments[0],arguments[1],arguments[2],arguments[3]).toString();"object"==typeof arguments[0]?(this.timestamp=arguments[0].timestamp,this.machine=arguments[0].machine,this.pid=arguments[0].pid,this.increment=arguments[0].increment):"string"==typeof arguments[0]&&24===arguments[0].length?(this.timestamp=Number("0x"+arguments[0].substr(0,8)),this.machine=Number("0x"+arguments[0].substr(8,6)),this.pid=Number("0x"+arguments[0].substr(14,4)),this.increment=Number("0x"+arguments[0].substr(18,6))):4===arguments.length&&null!=arguments[0]?(this.timestamp=arguments[0],this.machine=arguments[1],this.pid=arguments[2],this.increment=arguments[3]):(this.timestamp=Math.floor((new Date).valueOf()/1e3),this.machine=i,this.pid=a,this.increment=e++,e>16777215&&(e=0))}}();Rt.prototype.getDate=function(){return new Date(1e3*this.timestamp)},Rt.prototype.toArray=function(){var e,a=this.toString(),i=[];for(e=0;e<12;e++)i[e]=t.parseInt(a.slice(2*e,2*e+2),16);return i},Rt.prototype.toString=function(){var e=this.timestamp.toString(16),t=this.machine.toString(16),a=this.pid.toString(16),i=this.increment.toString(16);return"00000000".substr(0,8-e.length)+e+"000000".substr(0,6-t.length)+t+"0000".substr(0,4-a.length)+a+"000000".substr(0,6-i.length)+i};const Ht={name:"price-page",components:{PicturesEditor:gt,SaveButton:et},props:{cashbackEnabled:Boolean,item:Object},data(){return{id:t.get(this.item,"id",(new Rt).toString()),picture:t.get(this.item,"picture"),price:t.get(this.item,"price",0),value:t.get(this.item,"value",1),old:t.get(this.item,"old",""),type:t.get(this.item,"type",e.get("unit")||"gram"),proteins:t.get(this.item,"proteins",0),fats:t.get(this.item,"fats",0),carbohydrates:t.get(this.item,"carbohydrates",0),energy:t.get(this.item,"energy",0),code:t.get(this.item,"code",""),description:t.get(this.item,"description",""),cashback:t.get(this.item,"cashback",""),units:this.$store.state.units}},computed:{virtualListHeight:()=>"md"===a.theme?48:44,title(){return this.item?this.$t("editing"):this.$t("adding")}},watch:{type(t){e.set("unit",t)}},methods:{pictureChange(e){this.picture=e},save(){if(!this.type)return he(this.$t("measure-empty"));const e={};e.id=this.id,this.picture&&(e.picture=this.picture),e.price=Math.max(0,t.isNumber(this.price)?this.price:0),e.value=Math.max(0,t.isNumber(this.value)?this.value:1),t.isNumber(this.old)&&this.old>0&&(e.old=this.old),e.type=this.type||"gram",e.code=this.code||"",e.description=t.trim(this.description),e.proteins=Math.max(0,t.isNumber(this.proteins)?this.proteins:0),e.fats=Math.max(0,t.isNumber(this.fats)?this.fats:0),e.carbohydrates=Math.max(0,t.isNumber(this.carbohydrates)?this.carbohydrates:0),e.energy=Math.max(0,t.isNumber(this.energy)?this.energy:0);const i=t.parseInt(this.cashback);t.isNumber(i)&&i>0&&(e.cashback=i),Ie("price",t.cloneDeep(e)),a.views.current.router.back()}}},Gt={class:"item-content item-input"},Kt={class:"item-inner"},Wt=["textContent"],Zt={class:"item-input-wrap"},Yt={class:"item-content item-input required"},Jt={class:"item-inner"},Qt={class:"row",style:{width:"100%"}},Xt={class:"col-33"},ea=["textContent"],ta={class:"item-input-wrap"},aa={class:"col-33"},ia=["textContent"],sa={class:"item-input-wrap"},la={class:"col-33"},na=["textContent"],oa={class:"item-input-wrap"},ra=["value","textContent"],ca={class:"item-content item-input"},da={class:"item-inner"},ua={class:"row",style:{width:"100%"}},pa={class:"col-25"},ha=["textContent"],ma={class:"item-input-wrap"},fa={class:"col-25"},ba=["textContent"],ga={class:"item-input-wrap"},va={class:"col-25"},ka=["textContent"],ya={class:"item-input-wrap"},$a={class:"col-25"},wa=["textContent"],Ca={class:"item-input-wrap"},xa={class:"item-content item-input"},_a={class:"item-inner"},Ia=["textContent"],Sa={class:"item-input-wrap"};Ht.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("pictures-editor"),x=l("f7-block-title"),_=l("f7-list-item"),I=l("f7-list"),S=l("f7-list-input"),U=l("f7-page");return n(),o(U,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back")},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[0]||(t[0]=e=>p.save())})])),_:1})])),_:1}),c(y,{value:s.picture,type:"photo",onChange:p.pictureChange},null,8,["value","onChange"]),c(x,{medium:"",textContent:u(e.$t("basic"))},null,8,["textContent"]),c(I,null,{default:r((()=>[m("li",Gt,[m("div",Kt,[m("div",{class:"item-title item-label",textContent:u(e.$t("description")+" ("+e.$t("not-required")+")")},null,8,Wt),m("div",Zt,[f(m("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.description=e),maxlength:"32"},null,512),[[q,s.description]])])])]),m("li",Yt,[m("div",Jt,[m("div",Qt,[m("div",Xt,[m("div",{class:"item-title item-label",textContent:u(e.$t("price"))},null,8,ea),m("div",ta,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[2]||(t[2]=e=>s.price=e)},null,512),[[q,s.price,void 0,{number:!0}]])])]),m("div",aa,[m("div",{class:"item-title item-label",textContent:u(e.$t("value"))},null,8,ia),m("div",sa,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e)},null,512),[[q,s.value,void 0,{number:!0}]])])]),m("div",la,[m("div",{class:"item-title item-label excluded",textContent:u(e.$t("old-price"))},null,8,na),m("div",oa,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=e=>s.old=e)},null,512),[[q,s.old,void 0,{number:!0}]])])])])])]),c(_,{"smart-select":"",title:e.$t("measure"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[5]||(t[5]=e=>s.type=e)},[(n(!0),$(C,null,w(s.units,((e,t)=>(n(),$("option",{value:t,textContent:u(e)},null,8,ra)))),256))],512),[[P,s.type]])])),_:1},8,["title"]),m("li",ca,[m("div",da,[m("div",ua,[m("div",pa,[m("div",{class:"item-title item-label",textContent:u(e.$t("proteins"))},null,8,ha),m("div",ma,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[6]||(t[6]=e=>s.proteins=e)},null,512),[[q,s.proteins,void 0,{number:!0}]])])]),m("div",fa,[m("div",{class:"item-title item-label",textContent:u(e.$t("fats"))},null,8,ba),m("div",ga,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[7]||(t[7]=e=>s.fats=e)},null,512),[[q,s.fats,void 0,{number:!0}]])])]),m("div",va,[m("div",{class:"item-title item-label excluded",textContent:u(e.$t("carbohydrates"))},null,8,ka),m("div",ya,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[8]||(t[8]=e=>s.carbohydrates=e)},null,512),[[q,s.carbohydrates,void 0,{number:!0}]])])]),m("div",$a,[m("div",{class:"item-title item-label excluded",textContent:u(e.$t("energy"))},null,8,wa),m("div",Ca,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=e=>s.energy=e)},null,512),[[q,s.energy,void 0,{number:!0}]])])])])])]),m("li",xa,[m("div",_a,[m("div",{class:"item-title item-label",textContent:u(e.$t("vendor-code")+" ("+e.$t("not-required")+")")},null,8,Ia),m("div",Sa,[f(m("input",{type:"text",maxlength:"64","onUpdate:modelValue":t[10]||(t[10]=e=>s.code=e)},null,512),[[q,s.code]])])])])])),_:1}),a.cashbackEnabled?(n(),o(x,{key:0,medium:"",textContent:u(e.$t("cashback"))},null,8,["textContent"])):d("",!0),a.cashbackEnabled?(n(),o(I,{key:1},{default:r((()=>[c(S,{label:e.$t("cashback-percentage"),type:"number",min:"1",max:"100",info:e.$t("cashback-product"),value:s.cashback,"onUpdate:value":t[11]||(t[11]=e=>s.cashback=e)},null,8,["label","info","value"])])),_:1})):d("",!0),c(g,{onClick:t[12]||(t[12]=e=>p.save())})])),_:1})};const Ua={name:"meta-page",components:{SaveButton:et},props:{item:Object,index:Number},data(){return{name:t.get(this.item,"name",""),content:t.get(this.item,"content","")}},computed:{title(){return this.item?this.$t("editing"):this.$t("adding")}},methods:{save(){const e=t.trim(this.name),i=t.trim(this.content);if(!e)return he(this.$t("fill-required-fields"));if(!i)return he(this.$t("fill-required-fields"));const s={name:e,content:i};t.isUndefined(this.index)?Ie("add:meta:item",s):Ie("edit:meta:item",{item:s,index:this.index}),a.views.current.router.back()}}};Ua.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list"),v=l("f7-page");return n(),o(v,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(g,null,{default:r((()=>[c(b,{label:"name",class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[1]||(t[1]=e=>s.name=e)},null,8,["value"]),c(b,{label:"content",class:"required",type:"text",maxlength:"256",value:s.content,"onUpdate:value":t[2]||(t[2]=e=>s.content=e)},null,8,["value"])])),_:1}),c(h,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})};const Pa={name:"modifiers-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("modifiers:update",this.getItems)},unmounted(){_e("modifiers:update",this.getItems)},methods:{getBadge(e){let t="";return e.required&&(t=this.$t("required")),t},getBadgeColor(e){let t="";return e.required&&(t="green"),t},getPicture:e=>re(e,"small","image"),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/modifiers",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},addItem(){this.f7router.navigate("/modifier/new/")},async editItem(e){const t=await s.get(`/v1/user/modifier/${e}`);this.f7router.navigate(`/modifier/${e}/`,{props:{group:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/modifier/${e}`),await this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.forEach(this.items,(e=>{a.push(e.groupid)})),await s.put("/v1/user/modifiers",{ids:a})},selectGroup(e){this.canClick&&this.f7router.navigate("/modifier-items/"+e.groupid+"/",{props:{group:e}})}}};Pa.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-swipeout-button"),k=l("f7-swipeout-actions"),y=l("f7-list-item"),x=l("f7-list"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("modifiers"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{"search-container":`.search-list-${s.searchbarid}`,"search-in":".item-title,.item-footer",placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),class:I(`searchbar-${s.searchbarid}`),expandable:"","onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["search-container","placeholder","disable-button-text","class"])])),_:1},8,["title","back-link"]),f(c(x,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:I(`search-list-${s.searchbarid} searchbar-found`)},{default:r((()=>[(n(!0),$(C,null,w(s.items,((t,a)=>(n(),o(y,{link:"",key:t.groupid,title:t.name,subtitle:t.description,footer:e.$t("selection")+": "+e.$t("modifier-"+t.type),media:d.getPicture(t.picture),badge:d.getBadge(t),"badge-color":d.getBadgeColor(t),onClick:e=>d.selectGroup(t),swipeout:""},{default:r((()=>[c(k,{right:""},{default:r((()=>[c(v,{close:"",color:"blue",onClick:e=>d.editItem(t.groupid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(v,{close:"",color:"red",onClick:e=>d.removeItem(t.groupid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","subtitle","footer","media","badge","badge-color","onClick"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort","class"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const Da={name:"modifier-items-page",mixins:[Qe],props:{group:{type:Object,required:!0},f7router:Object},data(){return{title:this.group.name,groupid:this.group.groupid,searchbarid:ze(),items:[],sortable:!1}},mounted(){this.getItems(),xe("modifier:items:update",(()=>{this.getItems()}))},unmounted(){_e("modifier:items:update")},methods:{getBadge(e){let t="";return e.primary&&(t=this.$t("primary")),t},getBadgeColor(e){let t="";return e.primary&&(t="green"),t},getPicture:e=>re(e,"small","image"),footer:e=>Ae(e.price)+" / "+e.value+" "+je(e.type),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};e&&t.isString(e)&&(a.search=e);const i=await s.get(`/v1/user/modifier/items/${this.groupid}`,{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},addItem(){this.f7router.navigate("/modifier-item/new/",{props:{group:this.group}})},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/modifier/item/${this.groupid}/${e}`);this.f7router.navigate(`/modifier-item/${e}/`,{props:{group:this.group,item:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/modifier/item/${this.groupid}/${e}`),await this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const t={groupid:this.groupid,itemid:this.items[e.to].itemid,index:e.to};await s.put("/v1/user/modifier/items",t)}}};Da.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-swipeout-button"),k=l("f7-swipeout-actions"),y=l("f7-list-item"),x=l("f7-list"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:s.title,"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{"search-container":`.search-list-${s.searchbarid}`,"search-in":".item-title,.item-footer",placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),class:I(`searchbar-${s.searchbarid}`),expandable:"","onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["search-container","placeholder","disable-button-text","class"])])),_:1},8,["title","back-link"]),f(c(x,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:I(`search-list-${s.searchbarid} searchbar-found`)},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(y,{link:"",key:e.itemid,title:e.name,media:d.getPicture(e.picture),subtitle:d.footer(e),badge:d.getBadge(e),"badge-color":d.getBadgeColor(e),onClick:t=>d.clickItem(e.itemid),swipeout:""},{default:r((()=>[c(k,{right:""},{default:r((()=>[c(v,{close:"",color:"blue",onClick:t=>d.editItem(e.itemid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(v,{close:"",color:"red",onClick:t=>d.removeItem(e.itemid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","media","subtitle","badge","badge-color","onClick"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort","class"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const Ta={name:"orders-page",mixins:[Qe],props:{f7router:Object},data(){return{virtualList:void 0,virtualListParams:{items:[],height:"md"===a.theme?163:154,renderExternal:this.renderExternal},virtualListData:{},searchbarid:ze(),status:"current",page:1,more:!0,text:void 0,dates:void 0,placeid:void 0,items:[],subtitle:""}},computed:{showList(){return!!t.size(t.get(this.virtualListData,"items"))},canEdit:()=>!0},mounted(){this.getItems(),this.$store.commit("ordersAreActive",!0),xe("order",this.order),xe("orders:set:filter",this.setFilter),xe("orders:update",(()=>{this.getItems(!1)})),xe("order:change:status",(e=>{this.changeStatus(e.orderid,e.status)}))},unmounted(){this.$store.commit("ordersAreActive",!1),_e("order"),_e("orders:set:filter"),_e("orders:update"),_e("order:change:status")},methods:{formatCost:e=>Ae(e),renderExternal(e,t){this.virtualList=e,this.virtualListData=t},getClass(e){let t={};return t["status-"+e.status]=!0,e.worker&&(t.processes=!0),t},badgeColor(e){let t="green";return"cash"===e.payment||"terminal"===e.payment?t="gray":"unpaid"===e.status&&(t="red"),t},getHeader(e){let t="#"+e.number+" | ";return e.worker?t+=this.$t("processes")+": "+e.worker.name:t+=this.$t(e.status),t},getTitle(e){let a=e.name;return!0===e.guest?a+=" ("+t.toLower(this.$t("guest"))+")":!1===e.guest&&(a+=" ("+t.toLower(this.$t("user"))+")"),a},getDesiredTime(e){let a=this.$t("desired-time")+": ";return e.desiredTime?a+=e.desiredTime:a+=t.toLower(this.$t("anytime-soon")),a},getDateAndTime(e){const t=new Date(e.date);return`${this.$t("date")}: ${t.toLocaleDateString()} ${t.toLocaleTimeString()}`},searchbarSearch:t.debounce((function(e,t){this.text=t,this.dates=void 0,this.placeid=void 0,this.getItems()}),3e3),pullToRefresh(e,t){this.dates=void 0,this.placeid=void 0,this.getItems(t)},infiniteScroll(){this.more&&this.getItems(!0)},setStatus(e){this.status=e,this.$store.ordersAreActive="current"===e,this.dates=void 0,this.placeid=void 0,this.getItems()},async openFilter(){const e={};e.status=this.status;const t=(await s.get("/v1/user/orders/filter",{params:e})).data;this.placeid&&(t.placeid=this.placeid),this.dates&&(t.dates=this.dates),a.views.main.router.navigate("/orders-filter/",{props:t})},setFilter(e){let a=[];e?(e.place?(this.placeid=e.place.placeid,a.push(e.place.name)):this.placeid=void 0,e.dates?(this.dates=e.dates,1===t.size(e.dates)?a.push(e.dates[0],y(this.$t("date-format"))):2===t.size(e.dates)&&a.push(e.dates[0],y(this.$t("date-format"))+" - "+y(e.dates[1],this.$t("date-format")))):this.dates=void 0):(this.dates=void 0,this.placeid=void 0),t.size(a)?this.subtitle=t.join(a,", "):this.subtitle="",this.getItems()},order(e){let a=-1,i=!1;switch(t.each(this.virtualList.items,((t,i)=>{if(t.orderid===e.orderid)return a=i,!1})),this.status){case"current":"new"!==e.status&&"returned"!==e.status&&"processed"!==e.status||(i=!0);break;case"processed":"preparing"!==e.status&&"going"!==e.status||(i=!0);break;case"delivered":"delivered"===e.status&&(i=!0);break;case"completed":"finished"!==e.status&&"canceled"!==e.status||(i=!0);break;case"unpaid":"unpaid"===e.status&&(i=!0)}i?-1===a?this.virtualList.prependItem(e):this.virtualList.replaceItem(a,e):a>-1&&this.virtualList.deleteItem(a)},async getItems(e){!0===e?this.page++:(this.page=1,this.more=!0),this.text,this.placeid,this.dates;const a=await s.get("/v1/user/orders");t.isFunction(e)&&e(),0===t.size(a.data)&&1===this.page&&he(this.$t("nothing-found")),t.size(a.data)<100&&(this.more=!1),1===this.page?this.virtualList.replaceAllItems(a.data):this.virtualList.appendItems(a.data),this.$forceUpdate()},async changeStatus(e,t){t?(await s.patch("/v1/user/order/status",{orderid:e,status:t}),await this.getItems()):a.dialog.create({title:this.$t("change-order-status"),buttons:[{text:this.$t("preparing"),onClick:()=>this.changeStatus(e,"preparing")},{text:this.$t("delivered"),onClick:()=>this.changeStatus(e,"delivered")},{text:this.$t("finished"),onClick:()=>this.changeStatus(e,"finished")},{text:this.$t("canceled"),onClick:()=>this.changeStatus(e,"canceled")}],verticalButtons:!0,closeByBackdropClick:!0}).open()},clickItem(e){this.canClick&&this.editItem(e)},addItem(){this.editItem("new")},async editItem(e){const t=await s.get(`/v1/user/order/item/${e}`);this.f7router.navigate(`/order/${e}/`,{props:{order:t.data}})}}},qa={class:"order-phone"},La={class:"order-content"},Oa={class:"order-content"},za={class:"order-content"},ja={class:"order-content"};Ta.render=function(e,t,a,i,s,p){const h=l("f7-icon"),g=l("f7-link"),v=l("f7-nav-right"),k=l("f7-searchbar"),y=l("f7-navbar"),_=l("f7-toolbar"),S=l("f7-swipeout-button"),P=l("f7-swipeout-actions"),D=l("f7-list-item"),T=l("f7-list"),q=l("f7-fab"),L=l("f7-page");return n(),o(L,{ptr:"","ptr-preloader":!1,"onPtr:refresh":p.pullToRefresh,infinite:"","infinite-preloader":!1,onInfinite:p.infiniteScroll},{default:r((()=>[c(y,{title:e.$t("orders"),"back-link":e.$t("back")},{default:r((()=>[c(v,null,{default:r((()=>[p.canEdit?(n(),o(g,{key:0,"icon-only":"",onClick:t[0]||(t[0]=e=>p.openFilter())},{default:r((()=>[c(h,{icon:"fas fa-filter"})])),_:1})):d("",!0),c(g,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(h,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(k,{class:I(`searchbar-${s.searchbarid}`),placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"custom-search":"",expandable:"",backdrop:!1,"onSearchbar:search":p.searchbarSearch},null,8,["class","placeholder","disable-button-text","onSearchbar:search"])])),_:1},8,["title","back-link"]),p.canEdit?(n(),o(_,{key:0,tabbar:"",labels:"",top:""},{default:r((()=>[c(g,{"tab-link":"",onClick:t[1]||(t[1]=e=>p.setStatus("current")),text:e.$t("orders-current"),icon:"fas fa-play","icon-size":"16","tab-link-active":"current"===s.status},null,8,["text","tab-link-active"]),c(g,{"tab-link":"",onClick:t[2]||(t[2]=e=>p.setStatus("processed")),text:e.$t("orders-processed"),icon:"fas fa-sync-alt","icon-size":"16","tab-link-active":"processed"===s.status},null,8,["text","tab-link-active"]),c(g,{"tab-link":"",onClick:t[3]||(t[3]=e=>p.setStatus("delivered")),text:e.$t("orders-delivered"),icon:"fas fa-car","icon-size":"16","tab-link-active":"delivered"===s.status},null,8,["text","tab-link-active"]),c(g,{"tab-link":"",onClick:t[4]||(t[4]=e=>p.setStatus("completed")),text:e.$t("orders-completed"),icon:"fas fa-stop","icon-size":"16","tab-link-active":"completed"===s.status},null,8,["text","tab-link-active"]),c(g,{"tab-link":"",onClick:t[5]||(t[5]=e=>p.setStatus("unpaid")),text:e.$t("orders-unpaid"),icon:"fas fa-credit-card","icon-size":"16","tab-link-active":"unpaid"===s.status},null,8,["text","tab-link-active"])])),_:1})):d("",!0),f(c(T,{"media-list":"",class:"list-orders","virtual-list":"","virtual-list-params":s.virtualListParams},{default:r((()=>[m("ul",null,[(n(!0),$(C,null,w(s.virtualListData.items,((t,a)=>(n(),o(D,{key:a,style:U(`top: ${s.virtualListData.topPosition}px`),link:"",class:I(p.getClass(t)),badge:p.formatCost(t.amount),"badge-color":p.badgeColor(t),header:p.getHeader(t),title:p.getTitle(t),onClick:e=>p.clickItem(t.orderid),swipeout:""},{title:r((()=>[m("div",null,[m("div",qa,[c(h,{icon:"fas fa-mobile-alt fa-fw",size:"14"}),x(" "+u(t.phone),1)]),m("div",La,["delivery"===t.method?(n(),o(h,{key:0,icon:"fas fa-car fa-fw"})):(n(),o(h,{key:1,icon:"fas fa-running fa-fw"})),x(" "+u(t.address||e.$t("pickup")),1)]),m("div",Oa,[c(h,{icon:"fas fa-money-bill-alt fa-fw"}),x(" "+u(e.$t("payment-"+t.payment)),1)]),m("div",za,[c(h,{icon:"fas fa-clock fa-fw"}),x(" "+u(p.getDesiredTime(t)),1)]),m("div",ja,[c(h,{icon:"fas fa-calendar-alt fa-fw"}),x(" "+u(p.getDateAndTime(t)),1)])])])),default:r((()=>[c(P,{right:""},{default:r((()=>[p.canEdit?(n(),o(S,{key:0,close:"",color:"green",onClick:e=>p.changeStatus(t.orderid)},{default:r((()=>[c(h,{icon:"fas fa-sync-alt"})])),_:2},1032,["onClick"])):d("",!0),c(S,{close:"",color:"blue",onClick:e=>p.editItem(t.orderid)},{default:r((()=>[c(h,{icon:"fas fa-edit"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["style","class","badge","badge-color","header","title","onClick"])))),128))])])),_:1},8,["virtual-list-params"]),[[b,p.showList]]),p.canEdit?(n(),o(q,{key:1,onClick:t[6]||(t[6]=e=>p.addItem()),text:e.$t("add")},{default:r((()=>[c(h,{icon:"fas fa-plus"})])),_:1},8,["text"])):d("",!0)])),_:1},8,["onPtr:refresh","onInfinite"])};const Aa={name:"order-products-page",props:{products:{type:Array,required:!0}},data(){return{searchbarid:ze(),virtualList:void 0,virtualListParams:{items:this.products,height:this.getHeight,searchAll:this.searchAll,renderExternal:this.renderExternal},virtualListData:{}}},methods:{getPicture:e=>re(e,"small","image"),getHeight(e){let t;return t=e.productid?"md"===a.theme?108:99:"md"===a.theme?48:31,t},renderExternal(e,t){this.virtualList=e,this.virtualListData=t},searchAll(e,a){const i=[];return e=t.trim(t.toLower(e)),t.each(a,((a,s)=>{let l=t.trim(t.toLower(a.name)),n=t.trim(t.toLower(a.description?a.description:""));(l.indexOf(e)>=0||n.indexOf(e)>=0||""===e.trim())&&i.push(s)})),i},async clickItem(e){if(e.modifiers||t.size(e.prices)>1){const t=await s.get(`/v1/user/order/product/${e.productid}`);a.views.current.router.navigate(`/order-product/${e.productid}/`,{props:{product:t.data}})}else Ie("add:to:order",{product:e,price:e.prices[0]})}}};Aa.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-icon"),f=l("f7-link"),b=l("f7-nav-right"),g=l("f7-searchbar"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list"),x=l("f7-page");return n(),o(x,null,{default:r((()=>[c(v,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("products")},null,8,["title"]),c(b,null,{default:r((()=>[c(f,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(h,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(g,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-subtitle",expandable:"",backdrop:!1,"onSearchbar:enable":t[0]||(t[0]=t=>e.sorting=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1}),c(y,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(k,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),c(y,{id:`list-${s.searchbarid}`,"media-list":"","virtual-list":"","virtual-list-params":s.virtualListParams},{default:r((()=>[m("ul",null,[(n(!0),$(C,null,w(s.virtualListData.items,((e,t)=>(n(),o(k,{link:"",style:U(`top: ${s.virtualListData.topPosition}px`),key:t,title:e.name,subtitle:e.description,media:d.getPicture(e.picture),onClick:t=>d.clickItem(e)},null,8,["style","title","subtitle","media","onClick"])))),128))])])),_:1},8,["id","virtual-list-params"])])),_:1})};const Ba={name:"order-product-page",components:{SaveButton:et},props:{product:{type:Object,required:!0},position:{type:Object},index:{type:Number,default:-1},f7router:Object},data(){let e;if(t.each(this.product.modifiers,(e=>{const a=t.get(this.position,["modifiers",e.modifierid]);switch(e.type){case"one":t.each(e.items,((i,s)=>{t.get(a,["items",i.itemid])&&(e.result=s)}));break;case"several":e.result=[],t.each(e.items,((i,s)=>{t.get(a,["items",i.itemid])&&e.result.push(s)}));break;case"many":t.each(e.items,(e=>{t.get(a,["items",e.itemid])?e.result=a.items[e.itemid]:e.result=0}))}})),t.get(this.position,"priceid")){const a=this.position.priceid.split("-")[0];t.each(this.product.prices,((t,i)=>{t.id===a&&(e=i)}))}const a=[];for(let t=0;t<100;t++)a.push(t+1);return{name:this.product.name,description:this.product.description,picture:this.product.picture,prices:this.product.prices,price:e,modifiers:t.size(this.product.modifiers)?this.product.modifiers:[],quantity:t.get(this.position,"quantity",1)-1,quanties:a}},methods:{formatCost:e=>Ae(e),getUnit:e=>je(e),getPicture:e=>re(e,"small","image"),priceTitle(e){let a=e.value+" "+je(e.type);return e.description&&(a+=" ("+t.toLower(e.description)+")"),a},one(e,t){const a=this.modifiers[e];a.result=t,this.modifiers[e]=a},checked(e,a){const i=this.modifiers[e];for(let s=0;s<t.size(i.result);s++)if(i.result[s]===a)return!0;return!1},several(e,a,i){const s=this.modifiers[e];if(i)s.result.push(a);else for(let l=0;l<t.size(s.result);l++)if(s.result[l]===a){s.result.splice(l,1);break}this.modifiers[e]=s},plus(e,t){const a=this.modifiers[e],i=a.maximum;let s=a.items[t].result;s<i&&(s++,a.items[t].result=s,this.modifiers[e]=a)},minus(e,t){const a=this.modifiers[e];let i=a.items[t].result;i>0&&(i--,a.items[t].result=i,this.modifiers[e]=a)},save(){if(void 0===this.price)return he(this.$t("price-empty"));const e={};if(t.size(this.modifiers)>0)for(let a=0;a<t.size(this.modifiers);a++){let i=this.modifiers[a],s=i.modifierid,l=i.required,n=i.name,o=i.type,r=i.result,c={};if("one"===o){if(l&&void 0===r)return he(this.$t("modifier-empty")+": "+n),!1;if(void 0!==r){let t=i.items[r];c[t.itemid]=1;let a=t.price,l=n+": "+t.name.toLowerCase()+" 1 x "+Ae(a)+" = "+Ae(a)+". ";e[s]={name:n,description:l,price:a,items:c}}}else if("several"===o){if(l&&0===t.size(r))return he(this.$t("modifier-empty")+": "+n),!1;if(t.size(r)>0){let a={name:n,price:0},l=[];for(let e=0;e<t.size(r);e++){a.price+=i.items[r[e]].price,c[i.items[r[e]].itemid]=1;let t=i.items[r[e]].name.toLowerCase()+"  1 x "+Ae(i.items[r[e]].price)+" = "+Ae(i.items[r[e]].price);l.push(t)}a.items=c,a.description=n+": "+l.join(", ")+". ",e[s]=a}}else if("many"===o){let a=0,o=[];for(let e=0;e<t.size(i.items);e++){let t=i.items[e];t.result>0&&(a+=t.price*t.result,c[t.itemid]=t.result,o.push(t.name.toLowerCase()+" "+t.result+" x "+Ae(t.price)+" = "+Ae(t.price*t.result)))}if(l&&0===t.size(c))return he(this.$t("modifier-empty")+": "+n),!1;t.size(c)>0&&(e[s]={name:n,description:n+": "+o.join(", ")+". ",price:a,items:c})}}Ie("add:to:order",{product:this.product,price:this.prices[this.price],modifiers:e,quantity:this.quanties[this.quantity],index:this.index}),this.f7router.back()}}},Ea={style:{display:"flex"}},Va=["onClick"],Ma=[m("i",{class:"fas fa-minus-circle",style:{"font-size":"1.2em"}},null,-1)],Na={class:"modifier-count"},Fa=["onClick"],Ra=[m("i",{class:"fas fa-plus-circle",style:{"font-size":"1.2em"}},null,-1)],Ha=["innerHTML"],Ga=["value","textContent"];Ba.render=function(e,t,a,i,s,p){const h=l("f7-navbar"),b=l("f7-list-item"),g=l("f7-list"),v=l("save-button"),k=l("f7-page");return n(),o(k,null,{default:r((()=>[c(h,{title:s.name,"back-link":e.$t("back")},null,8,["title","back-link"]),c(g,null,{default:r((()=>[c(b,{"media-item":"",title:s.name,subtitle:s.description,media:p.getPicture(s.picture)},null,8,["title","subtitle","media"]),c(b,{divider:"",title:e.$t("price"),class:"required"},null,8,["title"]),(n(!0),$(C,null,w(s.prices,((e,t)=>(n(),o(b,{radio:"",name:"prices",key:t,value:t,title:p.priceTitle(e),after:p.formatCost(e.price),checked:s.price===t,onChange:e=>s.price=t},null,8,["value","title","after","checked","onChange"])))),128)),(n(!0),$(C,null,w(s.modifiers,((e,t)=>(n(),$(C,null,[c(b,{divider:"",title:e.name,class:I({required:e.required})},null,8,["title","class"]),"one"===e.type?(n(!0),$(C,{key:0},w(e.items,((a,i)=>(n(),o(b,{radio:"",name:"modifier-"+t,key:a.id,value:i,title:a.name+", "+a.value+" "+p.getUnit(a.type),after:p.formatCost(a.price),checked:e.result===i,onChange:e=>p.one(t,i)},null,8,["name","value","title","after","checked","onChange"])))),128)):d("",!0),"several"===e.type?(n(!0),$(C,{key:1},w(e.items,((e,a)=>(n(),o(b,{checkbox:"",name:"modifier-"+t,key:e.id,value:a,title:e.name+", "+e.value+" "+p.getUnit(e.type),after:p.formatCost(e.price),checked:p.checked(t,a),onChange:e=>p.several(t,a,e.target.checked)},null,8,["name","value","title","after","checked","onChange"])))),128)):d("",!0),"many"===e.type?(n(!0),$(C,{key:2},w(e.items,((e,a)=>(n(),o(b,{key:e.id,title:e.name+", "+e.value+" "+p.getUnit(e.type)},{after:r((()=>[m("div",Ea,[m("a",{href:"#",class:"link icon-only",onClick:e=>p.minus(t,a)},Ma,8,Va),m("div",Na,u(e.result),1),m("a",{href:"#",class:"link icon-only",onClick:e=>p.plus(t,a)},Ra,8,Fa),m("div",{class:"modifier-price",innerHTML:p.formatCost(e.price)},null,8,Ha)])])),_:2},1032,["title"])))),128)):d("",!0)],64)))),256)),c(b,{divider:"",title:e.$t("quantity"),class:"required"},null,8,["title"]),c(b,{"smart-select":"",title:e.$t("choose-quantity"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"quanties","onUpdate:modelValue":t[0]||(t[0]=e=>s.quantity=e)},[(n(!0),$(C,null,w(s.quanties,((e,t)=>(n(),$("option",{value:t,textContent:u(e)},null,8,Ga)))),256))],512),[[P,s.quantity]])])),_:1},8,["title"])])),_:1}),c(v,{onClick:t[1]||(t[1]=e=>p.save())})])),_:1})};const Ka={name:"sales-report-page",props:{f7router:Object},data(){const e=new Date;return{minDate:new Date,maxDate:new Date,dates:[L(e,6),e],places:[],placeids:[],inDetail:[],byDays:[],amount:0,discount:0}},computed:{subtitle(){let e="";return 1===t.size(this.dates)?e=y(this.dates[0],this.$t("date-format")):2===t.size(this.dates)&&(e=`${y(this.dates[0],this.$t("date-format"))} - ${y(this.dates[1],this.$t("date-format"))}`),e},tabid:()=>ze()},mounted(){this.getItems(!1),xe("sales:report:filter",(e=>{this.placeids=e.placeids,this.dates=e.dates,this.getItems(!1)}))},unmounted(){_e("sales:report:filter")},methods:{save(){this.getItems(!0)},filter(){this.f7router.navigate("/sales-report-filter/",{props:{minDate:this.minDate,maxDate:this.maxDate,dates:this.dates,places:this.places,placeids:this.placeids}})},formatCost:e=>Ae(e),async getItems(e){const a={placeids:this.placeids,save:e};1===t.size(this.dates)?a.dates=[y(this.dates[0],"yyyy-MM-dd")+" 00:00:00",y(this.dates[0],"yyyy-MM-dd")+" 23:59:59"]:2===t.size(this.dates)&&(a.dates=[y(this.dates[0],"yyyy-MM-dd")+" 00:00:00",y(this.dates[1],"yyyy-MM-dd")+" 23:59:59"]);const i=await s.post("/v1/user/report",a);this.places=t.get(i.data,"places",[]),this.minDate=new Date(t.get(i.data,"minDate")),this.maxDate=new Date(t.get(i.data,"maxDate")),this.inDetail=t.get(i.data,"items",[]),this.amount=t.get(i.data,"amount",0),this.discount=t.get(i.data,"discount",0);const l=t.get(i.data,"file");l&&O.exports.saveAs(oe("/v1/report/"+l),l);const n={};t.each(this.inDetail,(e=>{n[e.id]||(n[e.id]={date:e.date,quantity:0,amount:0,discount:0}),n[e.id].quantity+=e.quantity,n[e.id].amount+=e.amount,n[e.id].discount+=e.discount}));const o=[];t.each(n,((e,t)=>{o.push(e)})),this.byDays=o,0===t.size(this.inDetail)&&he(this.$t("nothing-found"))}}},Wa={class:"data-table"},Za={class:"label-cell"},Ya={class:"numeric-cell"},Ja={class:"numeric-cell"},Qa={class:"numeric-cell"},Xa={style:{"white-space":"nowrap"}},ei={class:"label-cell",style:{"white-space":"nowrap"}},ti={style:{"white-space":"nowrap"}},ai={class:"numeric-cell",style:{"white-space":"nowrap"}},ii={class:"numeric-cell",style:{"white-space":"nowrap"}},si={class:"numeric-cell",style:{"white-space":"nowrap"}},li={style:{"white-space":"nowrap"}},ni=m("th",null,null,-1),oi=m("th",null,null,-1),ri=m("th",null,null,-1),ci=m("th",null,null,-1),di={class:"numeric-cell",style:{"white-space":"nowrap"}},ui={class:"numeric-cell",style:{"white-space":"nowrap"}},pi=m("th",null,null,-1),hi={class:"data-table"},mi={class:"numeric-cell"},fi={class:"numeric-cell"},bi={class:"numeric-cell"},gi={style:{"white-space":"nowrap"}},vi={class:"numeric-cell",style:{"white-space":"nowrap"}},ki={class:"numeric-cell",style:{"white-space":"nowrap"}},yi={class:"numeric-cell",style:{"white-space":"nowrap"}},$i=m("th",null,null,-1),wi=m("th",null,null,-1),Ci={class:"numeric-cell",style:{"white-space":"nowrap"}},xi={class:"numeric-cell",style:{"white-space":"nowrap"}};Ka.render=function(e,t,a,i,s,d){const p=l("f7-icon"),h=l("f7-link"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-toolbar"),y=l("f7-tab"),_=l("f7-tabs"),I=l("f7-page");return n(),o(I,null,{default:r((()=>[c(v,{title:e.$t("sales-report"),subtitle:d.subtitle,"back-link":e.$t("back")},{default:r((()=>[c(g,null,{default:r((()=>[c(h,{"icon-only":"",onClick:t[0]||(t[0]=e=>d.save())},{default:r((()=>[c(p,{icon:"fas fa-file-download"})])),_:1}),c(h,{"icon-only":"",onClick:t[1]||(t[1]=e=>d.filter())},{default:r((()=>[c(p,{icon:"fas fa-filter"})])),_:1})])),_:1})])),_:1},8,["title","subtitle","back-link"]),c(k,{tabbar:"",top:""},{default:r((()=>[c(h,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("in-detail")),1)])),_:1},8,["tab-link"]),c(h,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[x(u(e.$t("by-days")),1)])),_:1},8,["tab-link"])])),_:1}),c(_,null,{default:r((()=>[c(y,{id:`tab-1-${d.tabid}`,"tab-active":""},{default:r((()=>[f(m("div",Wa,[m("table",null,[m("thead",null,[m("tr",null,[m("th",null,u(e.$t("date")),1),m("th",Za,u(e.$t("product")),1),m("th",null,u(e.$t("place")),1),m("th",Ya,u(e.$t("quantity")),1),m("th",Ja,u(e.$t("amount")),1),m("th",Qa,u(e.$t("discount")),1),m("th",null,u(e.$t("payment-method")),1)])]),m("tbody",null,[(n(!0),$(C,null,w(s.inDetail,(e=>(n(),$("tr",null,[m("td",Xa,u(e.date),1),m("td",ei,u(e.name),1),m("td",ti,u(e.place),1),m("td",ai,u(e.quantity),1),m("td",ii,u(d.formatCost(e.amount)),1),m("td",si,u(d.formatCost(e.discount)),1),m("td",li,u(e.paymentMethod),1)])))),256)),m("tr",null,[ni,oi,ri,ci,m("th",di,u(d.formatCost(s.amount)),1),m("th",ui,u(d.formatCost(s.discount)),1),pi])])])],512),[[b,s.inDetail.length>0]])])),_:1},8,["id"]),c(y,{id:`tab-2-${d.tabid}`},{default:r((()=>[f(m("div",hi,[m("table",null,[m("thead",null,[m("tr",null,[m("th",null,u(e.$t("date")),1),m("th",mi,u(e.$t("quantity")),1),m("th",fi,u(e.$t("amount")),1),m("th",bi,u(e.$t("discount")),1)])]),m("tbody",null,[(n(!0),$(C,null,w(s.byDays,(e=>(n(),$("tr",null,[m("td",gi,u(e.date),1),m("td",vi,u(e.quantity),1),m("td",ki,u(d.formatCost(e.amount)),1),m("td",yi,u(d.formatCost(e.discount)),1)])))),256)),m("tr",null,[$i,wi,m("th",Ci,u(d.formatCost(s.amount)),1),m("th",xi,u(d.formatCost(s.discount)),1)])])])],512),[[b,s.byDays.length>0]])])),_:1},8,["id"])])),_:1})])),_:1})};const _i={name:"f7-list-item-place-selector",emits:["update:value"],props:{places:{type:Array,required:!0},value:{type:[Array,String],default:void 0},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},watch:{value(e){this.$emit("update:value",e)}},computed:{title(){return this.multiple?this.$t("places-availability"):this.$t("place")},smartSelectParams(){return{closeOnSelect:!this.multiple,searchbar:!0,virtualList:!0,virtualListHeight:"md"===a.theme?48:44,scrollToSelectedItem:!0,formatValueText:e=>this.multiple?0===t.size(e)||t.size(e)===t.size(this.places)?this.$t("placement-everywhere"):t.size(e):0===t.size(e)?this.$t("no"):e[0]}}}},Ii=["multiple"],Si=["value","textContent"];_i.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return f((n(),o(d,{disabled:a.disabled,"smart-select":"","smart-select-params":c.smartSelectParams,title:c.title},{default:r((()=>[f(m("select",{name:"places",multiple:a.multiple,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},[(n(!0),$(C,null,w(a.places,(e=>(n(),$("option",{value:e.id,textContent:u(e.address)},null,8,Si)))),256))],8,Ii),[[P,a.value]])])),_:1},8,["disabled","smart-select-params","title"])),[[b,a.places.length>0]])};const Ui={name:"sales-report-filter-popup",components:{SaveButton:et,PlaceSelector:_i},mixins:[bt],props:{dates:Array,minDate:Date,maxDate:Date,places:Array,placeids:Array},computed:{virtualListHeight:()=>"md"===a.theme?48:44},data(){return{ids:this.placeids,selectedDates:this.dates,calendarParams:{minDate:this.minDate,maxDate:this.maxDate,value:this.dates,rangePicker:!0,on:{change:this.change}}}},methods:{change(e,t){this.selectedDates=t},async save(){Ie("sales:report:filter",{placeids:this.ids,dates:this.selectedDates}),this.close()}}};Ui.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("place-selector"),v=l("f7-list"),k=l("f7-page"),y=l("f7-view"),$=l("f7-popup");return n(),o($,{"close-by-backdrop-click":!0},{default:r((()=>[c(y,{"stack-pages":!0},{default:r((()=>[c(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:e.$t("filter")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(v,null,{default:r((()=>[c(b,{type:"datepicker",placeholder:e.$t("dates-empty"),readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","calendar-params"]),c(g,{places:a.places,value:s.ids,"onUpdate:value":t[2]||(t[2]=e=>s.ids=e),multiple:""},null,8,["places","value"])])),_:1}),c(h,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const Pi={name:"users-filter-popup",components:{SaveButton:et,PlaceSelector:_i},mixins:[bt],props:{places:Array,placeids:Array},computed:{virtualListHeight:()=>"md"===a.theme?48:44},data(){return{ids:this.placeids}},methods:{async save(){Ie("users:filter",{placeids:this.ids}),this.close()}}};Pi.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("place-selector"),g=l("f7-list"),v=l("f7-page"),k=l("f7-view"),y=l("f7-popup");return n(),o(y,{"close-by-backdrop-click":!0},{default:r((()=>[c(k,{"stack-pages":!0},{default:r((()=>[c(v,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:e.$t("filter")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(g,null,{default:r((()=>[c(b,{places:a.places,value:s.ids,"onUpdate:value":t[2]||(t[2]=e=>s.ids=e),multiple:""},null,8,["places","value"])])),_:1}),c(h,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const Di={name:"crop-page",components:{VueCroppie:{name:"VueCroppie",emits:["update","result"],render(){return z("div",{class:this.customClass,ref:"croppieContainer",id:"croppieContainer"})},props:{boundary:Object,customClass:String,enableExif:Boolean,enableOrientation:{type:Boolean,default:!0},enableResize:{type:Boolean,default:!0},enableZoom:{type:Boolean,default:!0},enforceBoundary:{type:Boolean,default:!0},mouseWheelZoom:{type:[Boolean,String],default:!0},showZoomer:{type:Boolean,default:!0},croppieInitialized:{type:Function,default:function(){}},viewport:{type:Object,default:function(){return{width:200,height:200,type:"square"}}},minZoom:Number,maxZoom:Number},mounted(){this.initCroppie()},data:()=>({croppie:null}),methods:{initCroppie(){let e=this.$refs.croppieContainer,t={enableExif:this.enableExif,enableOrientation:this.enableOrientation,enableZoom:this.enableZoom,enableResize:this.enableResize,enforceBoundary:this.enforceBoundary,mouseWheelZoom:this.mouseWheelZoom,viewport:this.viewport,showZoomer:this.showZoomer,minZoom:this.minZoom,maxZoom:this.maxZoom};this.boundary&&(t.boundary=this.boundary),e.addEventListener("update",(e=>{this.$emit("update",e.detail)})),this.croppie=new j(e,t),this.croppieInitialized()},bind(e){return this.croppie.bind(e)},destroy(){this.croppie.destroy()},get(e){if(!e)return this.croppie.get();e(this.croppie.get())},rotate(e){this.croppie.rotate(e)},setZoom(e){this.croppie.setZoom(e)},result(e,t){return e||(e={type:"base64"}),this.croppie.result(e).then((e=>(t?t(e):this.$emit("result",e),e)))},refresh(){this.croppie.destroy(),this.initCroppie()}}}},props:{picture:{type:String,required:!0},index:{type:Number,required:!0},f7router:Object},data(){let e=_(window).width(),t=_(window).height();return"md"===a.theme?t-=64:t-=44,{size:.75*Math.ceil(e,t)}},mounted(){const e=t.replace(this.picture,"-thumbnail","-original");this.$refs.croppie.bind({url:oe(`/v1/images/${e}`)})},unmounted(){this.$refs.croppie.destroy()},methods:{save(){this.$refs.croppie.result({type:"base64",size:"viewport",format:"jpeg",quality:1,circle:!1}).then((async e=>{const t=await s.post("/v1/user/image/crop",{picture:this.picture,file:e});Ie("crop",{picture:t.data.picture,index:this.index}),this.f7router.back()}))}}};Di.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-navbar"),f=l("vue-croppie"),b=l("f7-page");return n(),o(b,{ref:"page"},{default:r((()=>[c(m,{title:e.$t("editing"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>d.save())},{default:r((()=>[c(u,{icon:"fas fa-save"})])),_:1})])),_:1})])),_:1},8,["title","back-link"]),c(f,{ref:"croppie",enableOrientation:!0,showZoomer:!1,enableResize:!1,viewport:{width:s.size,height:s.size,type:"square"}},null,8,["viewport"])])),_:1},512)};const Ti={name:"gallery-page",components:{PicturesEditor:gt},props:{pictures:{type:Array,required:!0},type:{type:String,required:!0},f7router:Object},data:()=>({hover:!1}),computed:{title(){return"review"===this.type?this.$t("photos"):this.$t("gallery")},desktop:()=>a.device.desktop},methods:{add(e){const t=this.$refs.editor;switch(e){case"video":t.addVideo();break;case"picture":t.addPicture()}},sort(){this.$refs.editor.pictures.length>0&&(this.$refs.editor.sortable=!this.$refs.editor.sortable)},dragOver(e){e.preventDefault(),this.hover=!0},dragLeave(e){e.preventDefault(),this.hover=!1},drop(e){e.preventDefault(),this.hover=!1,this.$refs.editor.uploadPictures(e.dataTransfer.files)},save(){Ie("gallery",t.cloneDeep(this.$refs.editor.pictures)),this.f7router.back()}}},qi=["textContent"];Ti.render=function(e,t,a,i,s,p){const h=l("f7-icon"),m=l("f7-link"),f=l("f7-nav-right"),b=l("f7-navbar"),g=l("pictures-editor"),v=l("f7-fab"),k=l("f7-fab-button"),y=l("f7-fab-buttons"),w=l("f7-page");return n(),o(w,null,{default:r((()=>[c(b,{title:p.title,"back-link":e.$t("back")},{default:r((()=>[c(f,null,{default:r((()=>[c(m,{"icon-only":"",onClick:t[0]||(t[0]=e=>p.sort())},{default:r((()=>[c(h,{icon:"fas fa-sort"})])),_:1}),c(m,{"icon-only":"",onClick:t[1]||(t[1]=e=>p.save())},{default:r((()=>[c(h,{icon:"fas fa-save"})])),_:1})])),_:1})])),_:1},8,["title","back-link"]),p.desktop?(n(),$("div",{key:0,class:I(["drop-zone",{hover:s.hover}]),onDragover:t[2]||(t[2]=e=>p.dragOver(e)),onDragleave:t[3]||(t[3]=e=>p.dragLeave(e)),onDrop:t[4]||(t[4]=e=>p.drop(e)),textContent:u(e.$t("drop-zone"))},null,42,qi)):d("",!0),c(g,{ref:"editor",value:a.pictures,type:"editor","editor-type":a.type},null,8,["value","editor-type"]),"review"===a.type?(n(),o(v,{key:1,onClick:t[5]||(t[5]=e=>p.add("picture")),text:e.$t("add")},{default:r((()=>[c(h,{icon:"fas fa-plus"})])),_:1},8,["text"])):(n(),o(v,{key:2,text:e.$t("add")},{default:r((()=>[c(h,{icon:"fas fa-plus"}),c(h,{icon:"fas fa-times"}),c(y,null,{default:r((()=>[c(k,{onClick:t[6]||(t[6]=e=>p.add("video")),"fab-close":"",label:e.$t("video")},{default:r((()=>[c(h,{icon:"fab fa-youtube"})])),_:1},8,["label"]),c(k,{onClick:t[7]||(t[7]=e=>p.add("picture")),"fab-close":"",label:e.$t("picture")},{default:r((()=>[c(h,{icon:"fas fa-image"})])),_:1},8,["label"])])),_:1})])),_:1},8,["text"]))])),_:1})};const Li={name:"gallery-item-page",components:{SaveButton:et},props:{item:{type:Object,required:!0},index:{type:Number,required:!0},f7router:Object},data(){return{name:this.item.name,description:this.item.description}},methods:{save(){Ie("gallery:item",{name:this.name,description:this.description,index:this.index}),this.f7router.back()}}};Li.render=function(e,t,a,i,s,d){const u=l("f7-navbar"),p=l("f7-list-input"),h=l("f7-list"),m=l("save-button"),f=l("f7-page");return n(),o(f,null,{default:r((()=>[c(u,{title:e.$t("editing"),"back-link":e.$t("back")},null,8,["title","back-link"]),c(h,null,{default:r((()=>[c(p,{label:e.$t("name"),type:"text",maxlength:"128",value:s.name,"onUpdate:value":t[0]||(t[0]=e=>s.name=e)},null,8,["label","value"]),c(p,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"512",value:s.description,"onUpdate:value":t[1]||(t[1]=e=>s.description=e)},null,8,["label","value"])])),_:1}),c(m,{onClick:t[2]||(t[2]=e=>d.save())})])),_:1})};const Oi={name:"change-password-popup",components:{SaveButton:et},data:()=>({curPassword:"",newPassword:"",repPassword:""}),methods:{async save(){const e=fe(),i={};let l=0;if(this.curPassword?i.current=this.curPassword:l++,this.newPassword?i.renewed=this.newPassword:l++,l>0)return void he(this.$t("fill-required-fields"));if(this.newPassword!==this.repPassword)return void he(this.$t("repeat-password"));const n=await s.patch("/v1/user/password",i);n&&(he(this.$t("change-password-successful")),me(t.defaults(n.data,e),this.newPassword),a.popup.close(this.$el))}}};Oi.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-icon"),m=l("f7-link"),f=l("f7-nav-right"),b=l("f7-navbar"),g=l("f7-list-input"),v=l("f7-list"),k=l("save-button"),y=l("f7-page"),$=l("f7-view"),w=l("f7-popup");return n(),o(w,null,{default:r((()=>[c($,{"stack-pages":!0},{default:r((()=>[c(y,null,{default:r((()=>[c(b,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),class:"popup-close"},null,8,["back-link"]),c(p,{title:e.$t("change-password")},null,8,["title"]),c(f,null,{default:r((()=>[c(m,{"icon-only":"",onClick:t[0]||(t[0]=e=>d.save())},{default:r((()=>[c(h,{icon:"fas fa-save"})])),_:1})])),_:1})])),_:1}),c(v,{form:"",autocomplete:"off"},{default:r((()=>[c(g,{id:"current-password",name:"current-password",autocomplete:"current-password",label:e.$t("current-password"),class:"required",type:"password",value:s.curPassword,"onUpdate:value":t[1]||(t[1]=e=>s.curPassword=e)},null,8,["label","value"]),c(g,{id:"create-password",name:"create-password",autocomplete:"create-password",label:e.$t("create-password"),class:"required",type:"password",value:s.newPassword,"onUpdate:value":t[2]||(t[2]=e=>s.newPassword=e)},null,8,["label","value"]),c(g,{id:"repeat-password",name:"repeat-password",autocomplete:"repeat-password",label:e.$t("repeat-password"),class:"required",type:"password",value:s.repPassword,"onUpdate:value":t[3]||(t[3]=e=>s.repPassword=e)},null,8,["label","value"])])),_:1}),c(k,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const zi={name:"group-popup",components:{SaveButton:et,ScheduleEditor:dt,PicturesEditor:gt},mixins:[bt],props:{value:{type:Object,required:!0}},data(){const e=t.get(this.value,"stickers",[]);return{group:t.defaults(t.get(this.value,"group",{}),{active:!0,sticker:t.get(this.value,"group.stickers.0._id","no")}),stickers:e}},computed:{virtualListHeight:()=>"md"===a.theme?48:44,title(){return this.group.id?this.$t("editing"):this.$t("adding")}},created(){this.$watch("group.name",(e=>{this.group.url=Ve(e)}))},methods:{pictureChange(e){this.group.picture=e},scheduleChange(e){this.group.schedule=e},async save(){const e=t.trim(this.group.name);if(t.isEmpty(e))return he(this.$t("title-empty"));if(!this.group.picture)return he(this.$t("picture-subtitle"));const a={};this.group.parentid&&(a.parentid=this.group.parentid),this.group.url?a.url=this.group.url:a.url=Ve(this.group.name),a.picture=this.group.picture,a.name=e,a.description=t.trim(this.group.description),a.active=this.group.active,t.size(this.group.schedule)&&(a.schedule=this.group.schedule),a.stickers=[],t.each(this.stickers,(e=>{if(e.id===this.group.sticker&&"no"!==this.group.sticker)return a.stickers.push(e),!1})),this.group.id?(a.id=this.group.id,await s.patch("/v1/user/group",a)):await s.post("/v1/user/group",a),Ie("catalog:update"),this.close()}}},ji={class:"item-content item-input item-input-with-info item-input-with-value"},Ai={class:"item-inner"},Bi=["textContent"],Ei={class:"item-input-wrap"},Vi=["textContent"],Mi=["value","textContent"];zi.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("pictures-editor"),x=l("f7-block-title"),_=l("f7-list-input"),I=l("f7-list-item"),S=l("f7-list"),U=l("schedule-editor"),D=l("f7-page"),T=l("f7-view"),L=l("f7-popup");return n(),o(L,{"close-by-backdrop-click":!0},{default:r((()=>[c(T,{"stack-pages":!0},{default:r((()=>[c(D,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[1]||(t[1]=e=>p.save())})])),_:1})])),_:1}),c(y,{value:s.group.picture,type:"photo",onChange:p.pictureChange},null,8,["value","onChange"]),c(x,{medium:"",textContent:u(e.$t("basic"))},null,8,["textContent"]),c(S,null,{default:r((()=>[c(_,{label:e.$t("title"),class:"required",type:"text",maxlength:"32",value:s.group.name,"onUpdate:value":t[2]||(t[2]=e=>s.group.name=e)},null,8,["label","value"]),c(_,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"512",value:s.group.description,"onUpdate:value":t[3]||(t[3]=e=>s.group.description=e)},null,8,["label","value"]),m("li",null,[m("div",ji,[m("div",Ai,[m("div",{class:"required item-title item-label",textContent:u(e.$t("link"))},null,8,Bi),m("div",Ei,[f(m("input",{type:"text",maxlength:"64",class:"input-with-value","onUpdate:modelValue":t[4]||(t[4]=e=>s.group.url=e)},null,512),[[q,s.group.url]])])])])]),c(I,{checkbox:"",title:e.$t("products-sold"),checked:s.group.active,"onUpdate:checked":t[5]||(t[5]=e=>s.group.active=e)},null,8,["title","checked"]),s.stickers.length>0?(n(),o(I,{key:0,"smart-select":"",title:e.$t("sticker"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"sticker","onUpdate:modelValue":t[6]||(t[6]=e=>s.group.sticker=e)},[m("option",{value:"no",textContent:u(e.$t("no"))},null,8,Vi),(n(!0),$(C,null,w(s.stickers,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,Mi)))),256))],512),[[P,s.group.sticker]])])),_:1},8,["title","smart-select-params"])):d("",!0)])),_:1}),c(U,{value:s.group.schedule,extended:!1,onChange:p.scheduleChange},null,8,["value","onChange"]),c(g,{onClick:t[7]||(t[7]=e=>p.save())})])),_:1})])),_:1})])),_:1})};const Ni={name:"group-move-popup",props:{groups:{type:Array,reuired:!0},id:String},methods:{title(e){let a="";if(e.count>0){let i=t.fill(Array(e.count),">");a=t.join(i," ")+" "}return a+=e.name,a},async change(e){const t={id:this.id};"top"!==e.id&&(t.parentid=e.id),await s.put("/v1/user/groups/move",t),Ie("catalog:update"),a.popup.close(this.$el)}}};Ni.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-searchbar"),m=l("f7-subnavbar"),f=l("f7-navbar"),b=l("f7-list-item"),g=l("f7-list"),v=l("f7-page"),k=l("f7-view"),y=l("f7-popup");return n(),o(y,null,{default:r((()=>[c(k,{"stack-pages":!0},{default:r((()=>[c(v,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),class:"popup-close"},null,8,["back-link"]),c(p,{title:e.$t("change-group")},null,8,["title"]),c(m,{inner:!1},{default:r((()=>[c(h,{"search-container":".search-list","search-in":".item-title",placeholder:e.$t("search"),"disable-button-text":e.$t("cancel")},null,8,["placeholder","disable-button-text"])])),_:1})])),_:1}),c(g,{class:"search-list searchbar-found"},{default:r((()=>[(n(!0),$(C,null,w(a.groups,(e=>(n(),o(b,{radio:"",name:"group-move",onChange:t=>d.change(e),key:e.id,title:d.title(e)},null,8,["onChange","title"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})};const Fi={name:"sign-in-page",components:{SaveButton:et},data:()=>({users:e.has("users")?e.get("users"):[],email:"",password:""}),mounted(){xe("set:email",(e=>{this.email=e})),xe("set:email:and:password",(e=>{this.email=e.email,this.password=e.password})),xe("set:users",(e=>{this.users=e}))},unmounted(){_e("set:email"),_e("set:email:and:password"),_e("set:users")},methods:{accounts(){t.size(this.users)?a.views.current.router.navigate("/accounts/"):he(this.$t("no-saved-accounts"))},passwordRecovery(){a.views.current.router.navigate("/password-recovery/",{props:{value:this.email}})},async send(){const e={};let t=0;if(this.email?e.email=this.email:t++,this.password?e.password=this.password:t++,t>0)return void he(this.$t("fill-required-fields"));const i=await s.post("/v1/user/auth",e).catch((e=>{if(e.response)switch(e.response.status){case 403:a.dialog.confirm(this.$t("incorrect-password"),this.$t("alert"),this.passwordRecovery)}}));i&&(Pe("join",{userid:i.data.id,token:i.data.token}),me(i.data,this.password))}}};Fi.render=function(e,t,a,i,s,d){const p=l("f7-icon"),h=l("f7-link"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list"),v=l("save-button"),k=l("f7-button"),y=l("f7-row"),$=l("f7-block"),w=l("f7-page");return n(),o(w,null,{default:r((()=>[c(f,{title:e.$t("signin")},{default:r((()=>[c(m,null,{default:r((()=>[c(h,{"icon-only":"",tooltip:e.$t("saved-accounts"),onClick:t[0]||(t[0]=e=>d.accounts())},{default:r((()=>[c(p,{icon:"fas fa-fw fa-user-friends"})])),_:1},8,["tooltip"])])),_:1})])),_:1},8,["title"]),c(g,{form:"",autocomplete:"off"},{default:r((()=>[c(b,{id:"email",name:"email",autocomplete:"email",label:e.$t("email"),type:"email",placeholder:e.$t("email-placeholder"),value:s.email,"onUpdate:value":t[1]||(t[1]=e=>s.email=e),class:"required"},null,8,["label","placeholder","value"]),c(b,{id:"new-password",name:"new-password",autocomplete:"new-password",label:e.$t("password"),type:"password",placeholder:e.$t("password-placeholder"),value:s.password,"onUpdate:value":t[2]||(t[2]=e=>s.password=e),class:"required"},null,8,["label","placeholder","value"])])),_:1}),c(v,{label:e.$t("signin"),onClick:t[3]||(t[3]=e=>d.send())},null,8,["label"]),c($,null,{default:r((()=>[c(y,{tag:"p",style:{"justify-content":"center"}},{default:r((()=>[c(k,{small:"",onClick:t[4]||(t[4]=e=>d.passwordRecovery()),textContent:u(e.$t("forgot-password"))},null,8,["textContent"])])),_:1})])),_:1})])),_:1})};const Ri={name:"sign-in-popup",components:{SigInPage:Fi}};Ri.render=function(e,t,a,i,s,d){const u=l("sign-in-page"),p=l("f7-view"),h=l("f7-popup");return n(),o(h,{backdrop:!1,closeByBackdropClick:!1},{default:r((()=>[c(p,{"stack-pages":!0},{default:r((()=>[c(u)])),_:1})])),_:1})};const Hi={name:"modifier-popup",components:{SaveButton:et,PicturesEditor:gt},mixins:[bt],props:{group:Object},data(){return{groupid:t.get(this.group,"groupid"),picture:t.get(this.group,"picture"),name:t.get(this.group,"name",""),description:t.get(this.group,"description",""),required:t.get(this.group,"required",!1),maximum:t.get(this.group,"maximum",1),type:t.get(this.group,"type","one"),types:["one","several","many"],code:t.get(this.group,"code","")}},computed:{title(){return this.group?this.$t("editing"):this.$t("adding")}},methods:{pictureChange(e){this.picture=e},async save(){const e=t.trim(this.name);if(t.isEmpty(e))return he(this.$t("title-empty"));const a={};this.picture&&(a.picture=this.picture),a.name=e,a.required=this.required,a.type=this.type,a.description=t.trim(this.description),void 0===this.maximum||this.maximum<1?a.maximum=1:a.maximum=this.maximum,this.code&&(a.code=this.code),this.groupid?(a.groupid=this.groupid,await s.patch("/v1/user/modifier",a)):await s.post("/v1/user/modifier",a),Ie("modifiers:update"),this.close()}}},Gi=["value","textContent"];Hi.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("pictures-editor"),x=l("f7-list-input"),_=l("f7-list-item"),I=l("f7-list"),S=l("f7-page"),U=l("f7-view"),D=l("f7-popup");return n(),o(D,{"close-by-backdrop-click":!0},{default:r((()=>[c(U,{"stack-pages":!0},{default:r((()=>[c(S,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[1]||(t[1]=e=>p.save())})])),_:1})])),_:1}),c(y,{value:s.picture,type:"photo",onChange:p.pictureChange},null,8,["value","onChange"]),c(I,null,{default:r((()=>[c(x,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[2]||(t[2]=e=>s.name=e)},null,8,["label","value"]),c(_,{checkbox:"",title:e.$t("selection-required"),checked:s.required,"onUpdate:checked":t[3]||(t[3]=e=>s.required=e)},null,8,["title","checked"]),c(_,{"smart-select":"",title:e.$t("selection"),"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[4]||(t[4]=e=>s.type=e)},[(n(!0),$(C,null,w(s.types,(t=>(n(),$("option",{value:t,textContent:u(e.$t("modifier-"+t))},null,8,Gi)))),256))],512),[[P,s.type]])])),_:1},8,["title"]),"many"===s.type?(n(),o(x,{key:0,label:e.$t("maximum"),type:"number",step:"1",min:"1",max:"100",value:s.maximum,"onUpdate:value":t[5]||(t[5]=e=>s.maximum=e)},null,8,["label","value"])):d("",!0),c(x,{label:e.$t("description")+" ("+e.$t("not-required")+")",type:"text",value:s.description,"onUpdate:value":t[6]||(t[6]=e=>s.description=e),maxlength:"16"},null,8,["label","value"])])),_:1}),c(g,{onClick:t[7]||(t[7]=e=>p.save())})])),_:1})])),_:1})])),_:1})};const Ki={name:"modifier-item-popup",components:{SaveButton:et,PicturesEditor:gt},mixins:[bt],props:{group:{type:Object,required:!0},item:Object},data(){return{itemid:t.get(this.item,"itemid"),picture:t.get(this.item,"picture"),name:t.get(this.item,"name",""),primary:t.get(this.item,"primary",!1),description:t.get(this.item,"description",""),price:t.get(this.item,"price",0),value:t.get(this.item,"value",1),type:t.get(this.item,"type",e.get("unit")||"gram"),proteins:t.get(this.item,"proteins",0),fats:t.get(this.item,"fats",0),carbohydrates:t.get(this.item,"carbohydrates",0),energy:t.get(this.item,"energy",0),code:t.get(this.item,"code",""),units:this.$store.state.units}},computed:{title(){return this.item?this.$t("editing"):this.$t("adding")}},watch:{type(t){e.set("unit",t)}},methods:{pictureChange(e){this.picture=e},async save(){const e=t.trim(this.name);if(t.isEmpty(e))return he(this.$t("title-empty"));const a={};this.picture&&(a.picture=this.picture),a.groupid=this.group.groupid,a.name=e,a.price=Math.max(0,t.isNumber(this.price)?this.price:0),a.value=Math.max(0,t.isNumber(this.value)?this.value:1),a.proteins=Math.max(0,t.isNumber(this.proteins)?this.proteins:0),a.fats=Math.max(0,t.isNumber(this.fats)?this.fats:0),a.carbohydrates=Math.max(0,t.isNumber(this.carbohydrates)?this.carbohydrates:0),a.energy=Math.max(0,t.isNumber(this.energy)?this.energy:0),a.type=this.type,a.primary=!!this.group.required&&this.primary,a.description=t.trim(this.description),a.code=t.trim(this.code),this.itemid?(a.itemid=this.itemid,await s.patch("/v1/user/modifier/item",a)):await s.post("/v1/user/modifier/item",a),Ie("modifier:items:update"),this.close()}}},Wi={class:"item-content item-input required"},Zi={class:"item-inner"},Yi={class:"row",style:{width:"100%"}},Ji={class:"col-50"},Qi=["textContent"],Xi={class:"item-input-wrap"},es={class:"col-50"},ts=["textContent"],as={class:"item-input-wrap"},is=["value","textContent"],ss={class:"item-content item-input"},ls={class:"item-inner"},ns={class:"row",style:{width:"100%"}},os={class:"col-25"},rs=["textContent"],cs={class:"item-input-wrap"},ds={class:"col-25"},us=["textContent"],ps={class:"item-input-wrap"},hs={class:"col-25"},ms=["textContent"],fs={class:"item-input-wrap"},bs={class:"col-25"},gs=["textContent"],vs={class:"item-input-wrap"};function ks(){return Math.ceil((new Date).getTime()/1e3)}Ki.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("pictures-editor"),x=l("f7-block-title"),_=l("f7-list-input"),I=l("f7-list-item"),S=l("f7-list"),U=l("f7-page"),D=l("f7-view"),T=l("f7-popup");return n(),o(T,{"close-by-backdrop-click":!0},{default:r((()=>[c(D,{"stack-pages":!0},{default:r((()=>[c(U,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[1]||(t[1]=e=>p.save())})])),_:1})])),_:1}),c(y,{value:s.picture,type:"photo",onChange:p.pictureChange},null,8,["value","onChange"]),c(x,{medium:"",textContent:u(e.$t("basic"))},null,8,["textContent"]),c(S,null,{default:r((()=>[c(_,{label:e.$t("name"),class:"required",type:"text",maxlength:"128",value:s.name,"onUpdate:value":t[2]||(t[2]=e=>s.name=e)},null,8,["label","value"]),m("li",Wi,[m("div",Zi,[m("div",Yi,[m("div",Ji,[m("div",{class:"item-title item-label",textContent:u(e.$t("price"))},null,8,Qi),m("div",Xi,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[3]||(t[3]=e=>s.price=e)},null,512),[[q,s.price,void 0,{number:!0}]])])]),m("div",es,[m("div",{class:"item-title item-label",textContent:u(e.$t("value"))},null,8,ts),m("div",as,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=e=>s.value=e)},null,512),[[q,s.value,void 0,{number:!0}]])])])])])]),c(I,{"smart-select":"",title:e.$t("measure"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[5]||(t[5]=e=>s.type=e)},[(n(!0),$(C,null,w(s.units,((e,t)=>(n(),$("option",{value:t,textContent:u(e)},null,8,is)))),256))],512),[[P,s.type]])])),_:1},8,["title"]),m("li",ss,[m("div",ls,[m("div",ns,[m("div",os,[m("div",{class:"item-title item-label",textContent:u(e.$t("proteins"))},null,8,rs),m("div",cs,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[6]||(t[6]=e=>s.proteins=e)},null,512),[[q,s.proteins,void 0,{number:!0}]])])]),m("div",ds,[m("div",{class:"item-title item-label",textContent:u(e.$t("fats"))},null,8,us),m("div",ps,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[7]||(t[7]=e=>s.fats=e)},null,512),[[q,s.fats,void 0,{number:!0}]])])]),m("div",hs,[m("div",{class:"item-title item-label excluded",textContent:u(e.$t("carbohydrates"))},null,8,ms),m("div",fs,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[8]||(t[8]=e=>s.carbohydrates=e)},null,512),[[q,s.carbohydrates,void 0,{number:!0}]])])]),m("div",bs,[m("div",{class:"item-title item-label excluded",textContent:u(e.$t("energy"))},null,8,gs),m("div",vs,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=e=>s.energy=e)},null,512),[[q,s.energy,void 0,{number:!0}]])])])])])]),a.group.required?(n(),o(I,{key:0,checkbox:"",title:e.$t("primary"),checked:s.primary,"onUpdate:checked":t[10]||(t[10]=e=>s.primary=e)},null,8,["title","checked"])):d("",!0),c(_,{label:e.$t("description")+" ("+e.$t("not-required")+")",type:"text",value:s.description,"onUpdate:value":t[11]||(t[11]=e=>s.description=e),maxlength:"16"},null,8,["label","value"]),c(_,{label:e.$t("vendor-code")+" ("+e.$t("not-required")+")",type:"text",value:s.code,"onUpdate:value":t[12]||(t[12]=e=>s.code=e),maxlength:"64"},null,8,["label","value"])])),_:1}),c(g,{onClick:t[13]||(t[13]=e=>p.save())})])),_:1})])),_:1})])),_:1})};const ys={name:"order-popup",components:{SaveButton:et},mixins:[bt,Qe],props:{order:{type:Object,required:!0}},data(){let e,a=this.$t("order-item"),i="",s="",l="",n="";if(this.order.orderid){const t=new Date(this.order.date);a=`${this.order.name}, ${o=this.order.phone,o?("7"===o.substr(0,1)&&11===o.length&&(o="+"+o.replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/,"$1 ($2) $3-$4-$5")),o):""}`,i=`#${this.order.number}, ${t.toLocaleDateString()} ${t.toLocaleTimeString()}`,e=this.order.obtaining,this.order.name&&(s=this.order.name),this.order.phone&&(l=this.order.phone),this.order.email&&(n=this.order.email)}else t.size(this.order.obtainings)&&(e=this.order.obtainings[0]);var o;let r;switch(this.order.status){case"new":case"returned":case"processed":r="preparing";break;case"preparing":case"going":r="delivered";break;case"delivered":r="finished";break;default:r=t.get(this.order,"status","preparing")}return{sortable:!0,status:r,title:a,subtitle:i,employee:this.order.employee,orderItems:[],postalcode:t.get(this.order,"postalcode",""),country:t.get(this.order,"country",""),city:t.get(this.order,"city",""),address:t.get(this.order,"address",""),amount:t.get(this.order,"amount",0),obtainings:this.order.obtainings,obtaining:e,name:s,phone:l,email:n,products:void 0}},computed:{virtualListHeight:()=>"md"===a.theme?48:44,userType(){return this.order.userid?"("+t.toLower(this.$t("user"))+")":"("+t.toLower(this.$t("guest"))+")"}},watch:{orderItems:"update"},mounted(){this.$store.commit("ordersAreActive",!0),xe("add:to:order",(e=>{this.addToOrder(e.product,e.price,e.modifiers,e.quantity,e.index,e.silent)})),this.order.orderid&&t.each(this.order.order,(e=>{this.addToOrder(e.product,e.price,e.modifiers,e.quantity,-1,!0)}))},unmounted(){this.$store.commit("ordersAreActive",!1),_e("add:to:order")},methods:{getUnit:e=>je(e),getPicture:e=>re(e,"small","image"),back(){if(this.order.orderid){let e;switch(this.order.status){case"new":case"returned":case"processed":e="new";break;case"preparing":case"going":e="preparing"}e&&Ie("order:change:status",{orderid:this.order.orderid,status:e})}a.popup.close(this.$el)},clickItem(e,t){this.canClick&&this.editProduct(e,t)},async addProduct(){if(!this.products){const e=await s.get("/v1/user/order/products");this.products=e.data}a.views.current.router.navigate("/order-products/",{props:{products:this.products}})},addToOrder(e,a,i,s=1,l=-1,n=!1){const o=e.productid,r=t.size(i)?`${a.id}-${ks()}`:a.id,c={productid:o,picture:e.picture,quantity:s,priceid:r,price:a.price};if(t.isEmpty(a.description)?c.name=`${e.name} (${a.value} ${je(a.type)})`:c.name=`${e.name} (${a.value} ${je(a.type)}, ${a.description.toLowerCase()})`,t.size(i)&&(c.description="",t.each(i,(e=>{c.price+=e.price,c.description+=e.description})),c.modifiers=i),-1===l)this.orderItems.push(c);else{const e=this.orderItems[l];e.price=c.price,e.quantity=s,e.modifiers=i,c.description&&(e.description=c.description),this.orderItems[l]=e}n||he(`${this.$t("added")}: ${e.name}`),this.$forceUpdate()},async editProduct(e,t){const i=await s.get(`/v1/user/order/product/${e.productid}`);a.views.current.router.navigate(`/order-product/${e.productid}/`,{props:{product:i.data,index:t,position:e}})},removeProduct(e){this.orderItems.splice(e,1)},getCostPacking:()=>0,getCostDelivery:()=>0,getAmount(){let e=0;return t.each(this.orderItems,(t=>{e+=t.price*t.quantity})),e},update(){this.amount=this.getAmount()},sorted(e){this.orderItems.move(e.from,e.to)},cancel(){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{const e={orderid:this.order.orderid,status:"canceled"};await s.patch("/v1/user/order/status",e),Ie("orders:update"),a.popup.close(this.$el)}))},async save(){const e=fe();let i=0;if(t.includes(["seller"],e.type)){const e=fe(),l={};if(l.userid=e.id,l.status=this.status,l.obtaining=this.obtaining,l.order=[],!t.size(this.orderItems))return void he(this.$t("cart-empty"));if(t.each(this.orderItems,(e=>{const t={productid:e.productid,name:e.name,priceid:e.priceid,price:e.price,quantity:e.quantity};e.description&&(t.description=e.description),e.modifiers&&(t.modifiers=e.modifiers),l.order.push(t)})),"delivery"===this.obtaining){const e=t.trim(this.postalcode);e?l.postalcode=e:i++;const a=t.trim(this.country);a?l.country=a:i++;const s=t.trim(this.city);s?l.city=s:i++;const n=t.trim(this.address);n?l.address=n:i++}const n=t.trim(this.name);n?l.name=n:i++;const o=t.trim(this.phone);if(o?l.phone=o:i++,l.email=t.trim(this.email),i>0)return he(this.$t("fill-required-fields"));this.order.orderid?(l.orderid=this.order.orderid,await s.patch("/v1/user/order",l)):await s.post("/v1/user/order",l),he(this.$t("order-save")),Ie("orders:update"),a.popup.close(this.$el)}}}},$s=["textContent"],ws=["textContent"],Cs=["textContent"],xs=["textContent"],_s=["textContent"],Is={class:"block-title",style:{"text-align":"right"}},Ss=["textContent"],Us=["value","textContent"],Ps={class:"item-content item-input required"},Ds={class:"item-inner"},Ts={class:"row",style:{width:"100%"}},qs={class:"col-33"},Ls=["textContent"],Os={class:"item-input-wrap"},zs={class:"col-33"},js=["textContent"],As={class:"item-input-wrap"},Bs={class:"col-33"},Es=["textContent"],Vs={class:"item-input-wrap"};ys.render=function(e,t,a,i,s,p){const h=l("f7-icon"),b=l("f7-link"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-input"),y=l("f7-list-item"),x=l("f7-list"),_=l("f7-block-title"),I=l("f7-swipeout-button"),S=l("f7-swipeout-actions"),U=l("save-button"),D=l("f7-page"),T=l("f7-view"),L=l("f7-popup");return n(),o(L,{"close-by-backdrop-click":!0},{default:r((()=>[c(T,{"stack-pages":!0},{default:r((()=>[c(D,null,{default:r((()=>[c(v,{title:s.title,subtitle:s.subtitle,"back-link":e.$t("back"),"onClick:back":t[2]||(t[2]=e=>p.back())},{default:r((()=>[c(g,null,{default:r((()=>[a.order.orderid?(n(),o(b,{key:0,"icon-only":"",onClick:t[0]||(t[0]=e=>p.cancel())},{default:r((()=>[c(h,{icon:"fas fa-trash"})])),_:1})):d("",!0),c(b,{"icon-only":"",onClick:t[1]||(t[1]=e=>p.save())},{default:r((()=>[c(h,{icon:"fas fa-save"})])),_:1})])),_:1})])),_:1},8,["title","subtitle","back-link"]),c(x,null,{default:r((()=>[s.employee?(n(),o(k,{key:0,class:"employee-name",label:e.$t("processes"),type:"text",value:s.employee.name,readonly:""},null,8,["label","value"])):d("",!0),c(y,{"smart-select":"",title:e.$t("new-status"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"},class:"new-status"},{default:r((()=>[f(m("select",{name:"new-status","onUpdate:modelValue":t[3]||(t[3]=e=>s.status=e)},[m("option",{value:"new",textContent:u(e.$t("new"))},null,8,$s),m("option",{value:"preparing",textContent:u(e.$t("preparing"))},null,8,ws),m("option",{value:"delivered",textContent:u(e.$t("delivered"))},null,8,Cs),m("option",{value:"finished",textContent:u(e.$t("finished"))},null,8,xs),m("option",{value:"canceled",textContent:u(e.$t("canceled"))},null,8,_s)],512),[[P,s.status]])])),_:1},8,["title"])])),_:1}),c(_,{medium:"",textContent:u(e.$t("order-list"))},null,8,["textContent"]),c(x,{"media-list":"",class:"list-order",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":p.sorted},{default:r((()=>[(n(!0),$(C,null,w(s.orderItems,((e,t)=>(n(),o(y,{link:"",key:e.priceid,heder:e.code,title:e.name,subtitle:p.getUnit(e.price)+" x "+e.quantity+" = "+p.getUnit(e.price*e.quantity),media:p.getPicture(e.picture),onClick:a=>p.clickItem(e,t),text:e.description,swipeout:""},{default:r((()=>[c(S,{right:""},{default:r((()=>[c(I,{close:"",color:"blue",onClick:a=>p.editProduct(e,t)},{default:r((()=>[c(h,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(I,{close:"",color:"red",onClick:e=>p.removeProduct(t)},{default:r((()=>[c(h,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["heder","title","subtitle","media","onClick","text"])))),128)),c(y,{link:"",title:e.$t("add"),onClick:t[4]||(t[4]=e=>p.addProduct()),sortable:!1},null,8,["title"])])),_:1},8,["sortable-enabled","onSortable:sort"]),c(x),m("div",Is,[m("div",{style:{"font-size":"1.3em","line-height":"normal"},textContent:u(e.$t("total")+": "+p.getUnit(s.amount))},null,8,Ss)]),c(_,{medium:"",textContent:u(e.$t("obtaining"))},null,8,["textContent"]),c(x,null,{default:r((()=>[c(y,{"smart-select":"",title:e.$t("method"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"obtaining","onUpdate:modelValue":t[5]||(t[5]=e=>s.obtaining=e)},[(n(!0),$(C,null,w(s.obtainings,(t=>(n(),$("option",{value:t,textContent:u(e.$t(t))},null,8,Us)))),256))],512),[[P,s.obtaining]])])),_:1},8,["title"]),"delivery"===s.obtaining?(n(),o(k,{key:0,label:e.$t("postalcode"),class:"required",type:"text",maxlength:"6",value:s.postalcode,"onUpdate:value":t[6]||(t[6]=e=>s.postalcode=e)},null,8,["label","value"])):d("",!0),"delivery"===s.obtaining?(n(),o(k,{key:1,label:e.$t("country"),class:"required",type:"text",maxlength:"32",value:s.country,"onUpdate:value":t[7]||(t[7]=e=>s.country=e)},null,8,["label","value"])):d("",!0),"delivery"===s.obtaining?(n(),o(k,{key:2,label:e.$t("city"),class:"required",type:"text",maxlength:"32",value:s.city,"onUpdate:value":t[8]||(t[8]=e=>s.city=e)},null,8,["label","value"])):d("",!0),"delivery"===s.obtaining?(n(),o(k,{key:3,label:e.$t("address"),class:"required",type:"text",maxlength:"128",value:s.address,"onUpdate:value":t[9]||(t[9]=e=>s.address=e)},null,8,["label","value"])):d("",!0)])),_:1}),c(_,{medium:"",textContent:u(e.$t("contact-details")+" "+p.userType)},null,8,["textContent"]),c(x,null,{default:r((()=>[m("li",Ps,[m("div",Ds,[m("div",Ts,[m("div",qs,[m("div",{class:"item-title item-label",textContent:u(e.$t("username"))},null,8,Ls),m("div",Os,[f(m("input",{type:"text",maxlength:"64","onUpdate:modelValue":t[10]||(t[10]=e=>s.name=e)},null,512),[[q,s.name]])])]),m("div",zs,[m("div",{class:"item-title item-label",textContent:u(e.$t("phone"))},null,8,js),m("div",As,[f(m("input",{type:"tel","onUpdate:modelValue":t[11]||(t[11]=e=>s.phone=e),maxlength:"14"},null,512),[[q,s.phone]])])]),m("div",Bs,[m("div",{class:"item-title item-label excluded",textContent:u(e.$t("email"))},null,8,Es),m("div",Vs,[f(m("input",{type:"text",maxlength:"64","onUpdate:modelValue":t[12]||(t[12]=e=>s.email=e)},null,512),[[q,s.email]])])])])])])])),_:1}),c(U,{onClick:t[13]||(t[13]=e=>p.save())})])),_:1})])),_:1})])),_:1})};const Ms={name:"product-popup",components:{SaveButton:et,PicturesEditor:gt,PlaceSelector:_i,BrandSelector:$t},mixins:[bt,Qe],props:{id:String,value:{type:Object,required:!0}},data(){const e=t.get(this.value,"brands",[]),a=t.get(this.value,"places",[]),i=t.get(this.value,"groups",[]),s=t.get(this.value,"stickers",[]),l=t.get(this.value,"modifiers",[]),n=t.get(this.value,"ingredients",[]),o=t.get(this.value,"cashbackEnabled",!1),r=t.defaults(t.get(this.value,"product",{}),{prices:[],gallery:[],active:!0,hit:!1,additional:!1,quantity:5,places:[],groups:[this.id],ingredients:[],modifiers:[],stickers:[],brand:""});if(t.size(r.stickers)){const e=[];t.each(r.stickers,(t=>{e.push(t._id)})),r.stickers=e}return{product:r,places:a,brands:e,groups:i,stickers:s,modifiers:l,ingredients:n,cashbackEnabled:o,showSort:!1,sortable:!1}},computed:{tabid:()=>ze(),title(){return this.product.id?this.$t("editing"):this.$t("adding")},virtualListHeight:()=>"md"===a.theme?48:44},created(){this.$watch("product.name",(e=>{this.product.url=Ve(e)}))},mounted(){xe("price",(e=>{let a=!0;t.each(this.product.prices,((t,i)=>{if(t.id===e.id)return a=!1,this.product.prices[i]=e,!1})),a&&this.product.prices.push(e)})),this.$forceUpdate()},unmounted(){_e("price")},methods:{getPicture:e=>re(e,"small","image"),galleryChange(e){this.product.gallery=e},formatCost:e=>Ae(e),getUnit:e=>je(e),addPrice(){a.views.current.router.navigate("/price/",{props:{cashbackEnabled:this.cashbackEnabled}})},clickPrice(e){this.canClick&&this.editPrice(e)},editPrice(e){a.views.current.router.navigate("/price/",{props:{cashbackEnabled:this.cashbackEnabled,item:t.cloneDeep(this.product.prices[e])}})},removePrice(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.product.prices.splice(e,1)}))},sortPrices(e){this.sortable=!1,this.product.prices.move(e.from,e.to)},async save(){if(!t.size(this.product.gallery))return he(this.$t("gallery-subtitle"));const e=t.trim(this.product.name);if(t.isEmpty(e))return he(this.$t("title-empty"));if(!t.size(this.product.groups))return void he(this.$t("group-empty"));if(!t.size(this.product.prices))return void he(this.$t("add-the-price"));const a={};a.gallery=this.product.gallery,a.name=e,a.description=t.trim(this.product.description),this.product.url?a.url=this.product.url:a.url=Ve(this.product.name),a.places=this.product.places,a.groups=this.product.groups,a.modifiers=this.product.modifiers,a.ingredients=this.product.ingredients,a.stickers=[],t.each(this.product.stickers,(e=>{const i=t.find(this.stickers,{id:e});a.stickers.push(i)})),a.prices=this.product.prices,a.active=this.product.active,a.hit=this.product.hit,a.additional=this.product.additional,this.product.brand&&(a.brand=this.product.brand),this.product.id?(a.id=this.product.id,await s.patch("/v1/user/product",a)):await s.post("/v1/user/product",a),Ie("catalog:update"),this.close()}}},Ns={class:"required"},Fs={class:"item-content item-input item-input-with-info item-input-with-value"},Rs={class:"item-inner"},Hs=["textContent"],Gs={class:"item-input-wrap"},Ks=["value","textContent","data-option-image"],Ws=["value","textContent"],Zs=["value","textContent"],Ys=["value","textContent"];Ms.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),g=l("f7-nav-title"),v=l("f7-icon"),k=l("f7-link"),y=l("save-button"),_=l("f7-nav-right"),I=l("f7-navbar"),S=l("f7-toolbar"),U=l("pictures-editor"),D=l("f7-list-input"),T=l("place-selector"),L=l("brand-selector"),O=l("f7-list-item"),z=l("f7-list"),j=l("f7-tab"),A=l("f7-swipeout-button"),B=l("f7-swipeout-actions"),E=l("f7-fab"),V=l("f7-tabs"),M=l("f7-page"),N=l("f7-view"),F=l("f7-popup");return n(),o(F,{"close-by-backdrop-click":!0},{default:r((()=>[c(N,{"stack-pages":!0},{default:r((()=>[c(M,null,{default:r((()=>[c(I,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(g,{title:p.title},null,8,["title"]),c(_,null,{default:r((()=>[f(c(k,{"icon-only":"",onClick:t[1]||(t[1]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(v,{icon:"fas fa-sort"})])),_:1},512),[[b,s.showSort]]),c(y,{mini:"",onClick:t[2]||(t[2]=e=>p.save())})])),_:1})])),_:1}),c(S,{tabbar:"",top:""},{default:r((()=>[c(k,{"tab-link":`#tab-1-${p.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(k,{"tab-link":`#tab-2-${p.tabid}`},{default:r((()=>[x(u(e.$t("prices")),1)])),_:1},8,["tab-link"])])),_:1}),c(V,null,{default:r((()=>[c(j,{id:`tab-1-${p.tabid}`,"tab-active":""},{default:r((()=>[c(U,{value:s.product.gallery,type:"gallery",onChange:p.galleryChange},null,8,["value","onChange"]),c(z,null,{default:r((()=>[c(D,{label:e.$t("name"),class:"required",type:"text",maxlength:"128",value:s.product.name,"onUpdate:value":t[3]||(t[3]=e=>s.product.name=e)},null,8,["label","value"]),c(D,{label:e.$t("short-description"),type:"textarea",resizable:"",maxlength:"512",value:s.product.description,"onUpdate:value":t[4]||(t[4]=e=>s.product.description=e)},null,8,["label","value"]),m("li",Ns,[m("div",Fs,[m("div",Rs,[m("div",{class:"item-title item-label",textContent:u(e.$t("link"))},null,8,Hs),m("div",Gs,[f(m("input",{type:"text",maxlength:"64",class:"input-with-value","onUpdate:modelValue":t[5]||(t[5]=e=>s.product.url=e)},null,512),[[q,s.product.url]])])])])]),c(T,{places:s.places,value:s.product.places,"onUpdate:value":t[6]||(t[6]=e=>s.product.places=e),multiple:""},null,8,["places","value"]),c(L,{brands:s.brands,value:s.product.brand,"onUpdate:value":t[7]||(t[7]=e=>s.product.brand=e)},null,8,["brands","value"]),s.groups.length>0?(n(),o(O,{key:0,"smart-select":"","smart-select-params":{searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0},title:e.$t("groups")},{default:r((()=>[f(m("select",{name:"groups",multiple:"",maxlength:"5","onUpdate:modelValue":t[8]||(t[8]=e=>s.product.groups=e)},[(n(!0),$(C,null,w(s.groups,(e=>(n(),$("option",{value:e.id,textContent:u(e.name),"data-option-image":p.getPicture(e.picture)},null,8,Ks)))),256))],512),[[P,s.product.groups]])])),_:1},8,["smart-select-params","title"])):d("",!0),s.ingredients.length>0?(n(),o(O,{key:1,"smart-select":"","smart-select-params":{searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0},title:e.$t("ingredients")},{default:r((()=>[f(m("select",{name:"ingredients",multiple:"","onUpdate:modelValue":t[9]||(t[9]=e=>s.product.ingredients=e)},[(n(!0),$(C,null,w(s.ingredients,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,Ws)))),256))],512),[[P,s.product.ingredients]])])),_:1},8,["smart-select-params","title"])):d("",!0),s.modifiers.length>0?(n(),o(O,{key:2,"smart-select":"","smart-select-params":{searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0},title:e.$t("modifiers")},{default:r((()=>[f(m("select",{name:"modifiers",multiple:"",maxlength:"5","onUpdate:modelValue":t[10]||(t[10]=e=>s.product.modifiers=e)},[(n(!0),$(C,null,w(s.modifiers,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,Zs)))),256))],512),[[P,s.product.modifiers]])])),_:1},8,["smart-select-params","title"])):d("",!0),s.stickers.length>0?(n(),o(O,{key:3,"smart-select":"","smart-select-params":{searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0},title:e.$t("stickers")},{default:r((()=>[f(m("select",{name:"stickers",multiple:"",maxlength:"3","onUpdate:modelValue":t[11]||(t[11]=e=>s.product.stickers=e)},[(n(!0),$(C,null,w(s.stickers,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,Ys)))),256))],512),[[P,s.product.stickers]])])),_:1},8,["smart-select-params","title"])):d("",!0),c(O,{checkbox:"",title:e.$t("products-sold"),checked:s.product.active,"onUpdate:checked":t[12]||(t[12]=e=>s.product.active=e)},null,8,["title","checked"]),c(O,{checkbox:"",title:e.$t("hit"),checked:s.product.hit,"onUpdate:checked":t[13]||(t[13]=e=>s.product.hit=e)},null,8,["title","checked"]),c(O,{checkbox:"",title:e.$t("additional"),checked:s.product.additional,"onUpdate:checked":t[14]||(t[14]=e=>s.product.additional=e)},null,8,["title","checked"])])),_:1}),c(y,{onClick:t[15]||(t[15]=e=>p.save())})])),_:1},8,["id"]),c(j,{id:`tab-2-${p.tabid}`,"onTab:show":t[17]||(t[17]=e=>s.showSort=!0),"onTab:hide":t[18]||(t[18]=e=>{s.showSort=!1,s.sortable=!1})},{default:r((()=>[c(z,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":p.sortPrices},{default:r((()=>[(n(!0),$(C,null,w(s.product.prices,((e,t)=>(n(),o(O,{link:"",key:e.id,media:p.getPicture(e.picture),title:`${p.formatCost(e.price)} / ${e.value} ${p.getUnit(e.type)}`,subtitle:e.description,onClick:e=>p.clickPrice(t),swipeout:""},{default:r((()=>[c(B,{right:""},{default:r((()=>[c(A,{close:"",color:"blue",onClick:e=>p.editPrice(t)},{default:r((()=>[c(v,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(A,{close:"",color:"red",onClick:e=>p.removePrice(t)},{default:r((()=>[c(v,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["media","title","subtitle","onClick"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort"]),c(E,{onClick:t[16]||(t[16]=e=>p.addPrice())},{default:r((()=>[c(v,{icon:"fas fa-plus"})])),_:1})])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const Js={name:"avatar-editor",emits:["change"],props:{avatar:{type:String,required:!1}},computed:{src(){return re(this.avatar,"big","avatar")}},methods:{dragOver(e){e.preventDefault(),_(e.target).addClass("active-state")},dragLeave(e){e.preventDefault(),_(e.target).removeClass("active-state")},drop(e){e.preventDefault(),_(e.target).removeClass("active-state"),this.uploadPicture(e.dataTransfer.files[0])},changePicture(){const e=_("#file");e.val(""),e.attr("accept",".jpg,.jpeg,.png"),e.removeAttr("multiple"),e.once("change",(e=>{if(void 0===window.File||void 0===window.FileReader||void 0===window.FileList||void 0===window.Blob)return he(this.$t("not-support-file-uploads"));this.uploadPicture(e.currentTarget.files[0])})),e.click()},async uploadPicture(e){if(("image/png"===e.type||"image/jpeg"===e.type)&&e.size<=512e4){const a=new FormData;a.append("file",e);const i=await s.post("/v1/user/upload/avatar",a);this.setPicture(t.get(i.data,"0.file"))}else he(this.$t("picture-text"))},setPicture(e){this.$emit("change",e)}}},Qs=["src"];Js.render=function(e,t,a,i,s,c){const d=l("f7-block-title");return n(),o(d,{class:"profile-avatar-div"},{default:r((()=>[m("img",{class:"profile-avatar-img",src:c.src,onClick:t[0]||(t[0]=e=>c.changePicture()),onDragover:t[1]||(t[1]=e=>c.dragOver(e)),onDragleave:t[2]||(t[2]=e=>c.dragLeave(e)),onDrop:t[3]||(t[3]=e=>c.drop(e))},null,40,Qs)])),_:1})};const Xs={name:"profile-popup",components:{AvatarEditor:Js,SaveButton:et},data(){const e=fe();return{name:e.name,email:e.email,phone:t.get(e,"phone",""),avatar:e.avatar}},methods:{changeAvatar(e){this.avatar=e},async save(){const e=fe();let i=0;const l={};if(l.avatar=this.avatar,this.name?l.name=this.name:i++,this.phone&&(l.phone=this.phone),this.email?l.email=this.email:i++,i>0)return void he(this.$t("fill-required-fields"));const n=await s.patch("/v1/user/profile",l);me(t.defaults(n.data,e)),he(this.$t("profile-successful")),a.popup.close(this.$el)}}};Xs.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("avatar-editor"),g=l("f7-list-input"),v=l("f7-list"),k=l("f7-page"),y=l("f7-view"),$=l("f7-popup");return n(),o($,null,{default:r((()=>[c(y,{"stack-pages":!0},{default:r((()=>[c(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),class:"popup-close"},null,8,["back-link"]),c(p,{title:e.$t("profile")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(b,{avatar:s.avatar,onChange:d.changeAvatar},null,8,["avatar","onChange"]),c(v,null,{default:r((()=>[c(g,{label:e.$t("username"),class:"required",type:"text",value:s.name,"onUpdate:value":t[1]||(t[1]=e=>s.name=e)},null,8,["label","value"]),c(g,{label:e.$t("phone")+" ("+e.$t("not-required")+")",type:"text",maxlength:"12",value:s.phone,"onUpdate:value":t[2]||(t[2]=e=>s.phone=e)},null,8,["label","value"]),c(g,{label:e.$t("email"),class:"required",type:"text",maxlength:"64",value:s.email,"onUpdate:value":t[3]||(t[3]=e=>s.email=e)},null,8,["label","value"])])),_:1}),c(h,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const el=["red","green","blue","pink","yellow","orange","purple","deeppurple","lightblue","teal","lime","deeporange","gray","black"],tl=["light","dark"];function al(){let a=e.get("color")||"black";return t.includes(el,a)?a:"gray"}function il(){let a=e.get("theme")||"light";return t.includes(tl,a)?a:"light"}function sl(){let e=al(),t=il();const a=_("body"),i=a[0].className.match(/color-theme-([a-z]*)/);let s;switch(i&&a.removeClass(i[0]),a.addClass("color-theme-"+e),e){case"red":s="#ff3b30";break;case"green":s="#4cd964";break;case"blue":s="#2196f3";break;case"pink":s="#ff2d55";break;case"yellow":s="#ffcc00";break;case"orange":s="#ff9500";break;case"purple":s="#9c27b0";break;case"deeppurple":s="#673ab7";break;case"lightblue":s="#5ac8fa";break;case"teal":s="#009688";break;case"lime":s="#cddc39";break;case"deeporange":s="#ff6b22";break;case"gray":s="#8e8e93";break;case"black":s="#000000"}if(s){document.querySelector("meta[name=theme-color]").setAttribute("content",s)}a.removeClass("theme-dark theme-light").addClass("theme-"+t)}const ll={name:"popup-skin-editor",data:()=>({theme:il(),colors:el,color:al()}),methods:{setLayoutTheme(t){this.theme=t,e.set("theme",t),sl()},setColorTheme(t){e.set("color",t),sl()}}};ll.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),m=l("f7-nav-title"),f=l("f7-navbar"),b=l("f7-block-title"),g=l("f7-checkbox"),v=l("f7-col"),k=l("f7-row"),y=l("f7-block"),_=l("f7-button"),I=l("f7-page"),S=l("f7-view"),U=l("f7-popup");return n(),o(U,null,{default:r((()=>[c(S,null,{default:r((()=>[c(I,null,{default:r((()=>[c(f,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),class:"popup-close"},null,8,["back-link"]),c(m,{title:e.$t("skin")},null,8,["title"])])),_:1}),c(b,{textContent:u(e.$t("layout-theme"))},null,8,["textContent"]),c(y,{strong:""},{default:r((()=>[c(k,null,{default:r((()=>[c(v,{width:"50",class:"bg-color-white skin-theme-picker",onClick:t[0]||(t[0]=e=>p.setLayoutTheme("light"))},{default:r((()=>["light"===s.theme?(n(),o(g,{key:0,checked:"",disabled:""})):d("",!0)])),_:1}),c(v,{width:"50",class:"bg-color-black skin-theme-picker",onClick:t[1]||(t[1]=e=>p.setLayoutTheme("dark"))},{default:r((()=>["dark"===s.theme?(n(),o(g,{key:0,checked:"",disabled:""})):d("",!0)])),_:1})])),_:1})])),_:1}),c(b,{textContent:u(e.$t("color-theme"))},null,8,["textContent"]),c(y,{strong:""},{default:r((()=>[c(k,null,{default:r((()=>[(n(!0),$(C,null,w(s.colors,((e,t)=>(n(),o(v,{width:"33",large:"25",xlarge:"20",key:t},{default:r((()=>[c(_,{fill:"",round:"",small:"",class:"skin-color-picker-button",color:e,onClick:t=>p.setColorTheme(e)},{default:r((()=>[x(u(e),1)])),_:2},1032,["color","onClick"])])),_:2},1024)))),128)),c(v,{width:"33",large:"25",xlarge:"20"}),c(v,{width:"33",large:"25",xlarge:"20"}),c(v,{width:"33",large:"25",xlarge:"20"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})};const nl={name:"stickers-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("stickers:update",(()=>{this.getItems()}))},unmounted(){_e("stickers:update")},methods:{footer(e){return`${this.$t("color")}: ${e.color.color}`},searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/stickers",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},addItem(){this.f7router.navigate("/sticker/new/")},async editItem(e){const t=await s.get(`/v1/user/sticker/${e}`);this.f7router.navigate(`/sticker/${e}/`,{props:{sticker:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/sticker/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.stickerid)})),await s.put("/v1/user/stickers",{ids:a})}}};nl.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),g=l("f7-searchbar"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list"),x=l("f7-swipeout-button"),_=l("f7-swipeout-actions"),S=l("f7-fab"),P=l("f7-page");return n(),o(P,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(v,{title:e.$t("stickers"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(g,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(y,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(k,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(y,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(k,{link:"",key:e.stickerid,title:e.name,onClick:t=>d.clickItem(e.stickerid),subtitle:d.footer(e),swipeout:""},{media:r((()=>[m("div",null,[m("i",{class:"fas fa-circle fa-fw",style:U("font-size: 1.2em; color: "+e.color.hex)},null,4)])])),default:r((()=>[c(_,{right:""},{default:r((()=>[c(x,{close:"",color:"blue",onClick:t=>d.editItem(e.stickerid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(x,{close:"",color:"red",onClick:t=>d.removeItem(e.stickerid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick","subtitle"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(S,{onClick:t[2]||(t[2]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])},nl.__scopeId="data-v-314a4036";const ol={name:"sticker-popup",components:{SaveButton:et},mixins:[bt],props:{sticker:Object},data(){return{stickerid:t.get(this.sticker,"stickerid",""),name:t.get(this.sticker,"name",""),color:t.get(this.sticker,"color.color",t.get(this.$store.state,"colors.14.color","#000000")),colors:this.$store.state.colors}},computed:{title(){return this.sticker?this.$t("editing"):this.$t("adding")}},watch:{color(e){this.setColor()}},mounted(){this.setColor()},methods:{setColor(){let e;t.each(this.colors,(t=>{if(t.color===this.color)return e=t.hex,!1})),_(this.$el).find(".item-after").css("color",e)},async save(){const e=t.trim(this.name);if(t.isEmpty(e))return he(this.$t("title-empty"));const a={};a.name=e,a.color=t.trim(this.colors[14]),t.each(this.colors,(e=>{if(e.color===this.color)return a.color=e,!1})),this.stickerid?(a.stickerid=this.stickerid,await s.patch("/v1/user/sticker",a)):await s.post("/v1/user/sticker",a),Ie("stickers:update"),this.close()}}},rl=["value","textContent"];ol.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-input"),y=l("f7-list-item"),x=l("f7-list"),_=l("f7-page"),I=l("f7-view"),S=l("f7-popup");return n(),o(S,{"close-by-backdrop-click":!0},{default:r((()=>[c(I,{"stack-pages":!0},{default:r((()=>[c(_,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(x,null,{default:r((()=>[c(k,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[2]||(t[2]=e=>s.name=e)},null,8,["label","value"]),c(y,{"smart-select":"",title:e.$t("color"),class:"color-item","smart-select-params":{closeOnSelect:!0,searchbar:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"color","onUpdate:modelValue":t[3]||(t[3]=e=>s.color=e)},[(n(!0),$(C,null,w(s.colors,(e=>(n(),$("option",{value:e.color,textContent:u(e.name)},null,8,rl)))),256))],512),[[P,s.color]])])),_:1},8,["title"])])),_:1}),c(b,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const cl={name:"ingredients-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("ingredients:update",(()=>{this.getItems()}))},unmounted(){_e("ingredients:update")},methods:{footer(e){return`${this.$t("allergen")}: ${e.allergen?this.$t("yes").toLowerCase():this.$t("no").toLowerCase()}`},searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/ingredients",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},addItem(){this.f7router.navigate("/ingredient/new/")},async editItem(e){const t=await s.get(`/v1/user/ingredient/${e}`);this.f7router.navigate(`/ingredient/${e}/`,{props:{ingredient:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/ingredient/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.ingredientid)})),await s.put("/v1/user/ingredients",{ids:a})}}};cl.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("ingredients"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.ingredientid,title:e.name,onClick:t=>d.clickItem(e.ingredientid),subtitle:d.footer(e),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:t=>d.editItem(e.ingredientid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.ingredientid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick","subtitle"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const dl={name:"ingredient-popup",components:{SaveButton:et},mixins:[bt],props:{ingredient:Object},data(){return{ingredientid:t.get(this.ingredient,"ingredientid",""),name:t.get(this.ingredient,"name",""),allergen:t.get(this.ingredient,"allergen",!1)}},computed:{title(){return this.ingredient?this.$t("editing"):this.$t("adding")}},methods:{async save(){const e=t.trim(this.name);if(t.isEmpty(e))return he(this.$t("title-empty"));const a={};a.name=e,a.allergen=this.allergen,this.ingredientid?(a.ingredientid=this.ingredientid,await s.patch("/v1/user/ingredient",a)):await s.post("/v1/user/ingredient",a),Ie("ingredients:update"),this.close()}}};dl.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list-item"),v=l("f7-list"),k=l("f7-page"),y=l("f7-view"),$=l("f7-popup");return n(),o($,{"close-by-backdrop-click":!0},{default:r((()=>[c(y,{"stack-pages":!0},{default:r((()=>[c(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(v,null,{default:r((()=>[c(b,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[2]||(t[2]=e=>s.name=e)},null,8,["label","value"]),c(g,{checkbox:"",title:e.$t("allergen"),checked:s.allergen,"onUpdate:checked":t[3]||(t[3]=e=>s.allergen=e)},null,8,["title","checked"])])),_:1}),c(h,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const ul={name:"promotions-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("promotions:update",(()=>{this.getItems()}))},unmounted(){_e("promotions:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},bannerUrl:e=>ce(e,"mini","app"),async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/promotions",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/promotion/${e}`);this.f7router.navigate(`/promotion/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/promotion/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/promotions",{ids:a})}}};ul.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("promotions"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:"banners-list"},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(v,{link:"",key:t.id,badge:e.$t("placement-"+t.placement),media:d.bannerUrl(t.picture),title:t.name,subtitle:t.description,class:I({grayscale:!1===t.active}),onClick:e=>d.clickItem(t.id),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["badge","media","title","subtitle","class","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const pl={name:"html-editor",emits:["change"],components:{VueEditor:S.exports.VueEditor},props:{value:String},data(){return{html:this.value,editorHeight:0}},computed:{language:()=>a.params.language,editorToolbar:()=>[[{header:[2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},watch:{html(e){this.$emit("change",e)}}};pl.render=function(e,t,a,i,s,r){const c=l("vue-editor");return n(),o(c,{ref:"editor",class:I(`ql-${r.language}`),modelValue:s.html,"onUpdate:modelValue":t[0]||(t[0]=e=>s.html=e),editorToolbar:r.editorToolbar,style:{height:"100%"}},null,8,["class","modelValue","editorToolbar"])};const hl={name:"f7-list-item-placement-selector",emits:["update:value"],props:{value:{type:[Array,String],default:"everywhere"}},watch:{value(e){this.$emit("update:value",e)}},computed:{smartSelectParams:()=>({closeOnSelect:!0,openIn:"popover"})}},ml=["textContent"],fl=["textContent"],bl=["textContent"];hl.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return n(),o(d,{"smart-select":"",title:e.$t("placement"),"smart-select-params":c.smartSelectParams},{default:r((()=>[f(m("select",{name:"placement","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},[m("option",{value:"everywhere",textContent:u(e.$t("placement-everywhere"))},null,8,ml),m("option",{value:"site",textContent:u(e.$t("placement-site"))},null,8,fl),m("option",{value:"app",textContent:u(e.$t("placement-app"))},null,8,bl)],512),[[P,a.value]])])),_:1},8,["title","smart-select-params"])};const gl={name:"f7-list-item-content-selector",emits:["update:value"],props:{type:{type:String,required:!0},items:{type:Array,required:!0},value:{type:String,default:void 0}},watch:{items(){this.$nextTick((()=>{this.$emit("update:value","");const e=a.smartSelect.get("#content-selector .smart-select");e&&e.unsetValue()}))},value(e){this.$emit("update:value",e)}},computed:{title(){return this.$t(this.type||"content")},smartSelectParams(){return{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:"group"===this.type||"product"===this.type?96:"md"===a.theme?48:44,scrollToSelectedItem:!0,formatValueText:e=>0===t.size(e)?this.$t("no"):e[0]}}},methods:{picture(e){let a;return"group"===this.type?a=re(t.get(e,"picture"),"small","image"):"product"===this.type&&(a=re(t.get(e,"gallery.0.picture"),"small","image")),a}}},vl=["value","textContent","data-option-image"];gl.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return n(),o(d,{id:"content-selector","smart-select":"","smart-select-params":c.smartSelectParams,title:c.title},{default:r((()=>[f(m("select",{name:"content-type","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},[(n(!0),$(C,null,w(a.items,(e=>(n(),$("option",{value:e.id,textContent:u(e.name),"data-option-image":c.picture(e)},null,8,vl)))),256))],512),[[P,a.value]])])),_:1},8,["smart-select-params","title"])};const kl={name:"promotion-popup",components:{SaveButton:et,HtmlEditor:pl,BannerEditor:zt,PlaceSelector:_i,PlacementSelector:hl,ContentSelector:gl},mixins:[bt],props:{value:Object},data(){const e=t.get(this.value,"places",[]),a=t.get(this.value,"groups",[]),i=t.get(this.value,"products",[]),s=t.get(this.value,"seasons",[]),l=t.get(this.value,"gifts",[]),n=["text"];t.size(a)&&n.push("group"),t.size(i)&&n.push("product"),t.size(s)&&n.push("season"),t.size(l)&&n.push("gift"),n.push("link");const o=t.defaults(t.get(this.value,"promotion",{}),{picture:"",banner:"",text:"",placement:"everywhere",active:!0,places:[]}),r=t.get(o,"content.type","text"),c={};return"text"===r?(c.type="text",c.value=""):"link"===r?(c.type="link",c.value=t.get(o,"content.value","")):r&&(c.type=t.get(o,"content.type"),c.value=t.get(o,"content.value")),{promotion:o,contents:n,content:c,places:e,groups:a,products:i,seasons:s,gifts:l}},computed:{tabid:()=>ze(),title(){return this.promotion.id?this.$t("editing"):this.$t("adding")},afterText(){return t.truncate(Me(this.text),{length:32})},virtualListHeight:()=>"md"===a.theme?48:44,items(){let e=[];switch(this.content.type){case"group":e=this.groups;break;case"product":e=this.products;break;case"season":e=this.seasons;break;case"gift":e=this.gifts}return e}},methods:{changeText(e){this.promotion.text=e},pictureChange(e){this.promotion.picture=e},bannerChange(e){this.promotion.banner=e},async save(){const e=this.promotion.picture,a=this.promotion.banner,i=t.trim(this.promotion.name),l=t.trim(this.promotion.description),n=t.trim(this.promotion.text),o={};if(t.isEmpty(e))return he(this.$t("picture-subtitle"));if(t.isEmpty(a))return he(this.$t("picture-subtitle"));if(t.isEmpty(i))return he(this.$t("title-empty"));if(t.isEmpty(l))return he(this.$t("description-empty"));switch(this.content.type){case"link":if(!ue(this.content.value))return he(this.$t("link-empty"));break;case"group":if(t.isEmpty(this.content.value))return he(this.$t("group-empty"));break;case"product":if(t.isEmpty(this.content.value))return he(this.$t("product-empty"));break;case"season":if(t.isEmpty(this.content.value))return he(this.$t("season-empty"));break;case"gift":if(t.isEmpty(this.content.value))return he(this.$t("gift-empty"));break;case"text":if(t.isEmpty(n))return he(this.$t("full-description-empty"));o.text=n}o.picture=e,o.banner=a,o.name=i,o.description=l,o.placement=this.promotion.placement,o.active=this.promotion.active,o.places=this.promotion.places,"text"!==this.content.type&&(o.content=this.content),this.promotion.id?(o.id=this.promotion.id,await s.patch("/v1/user/promotion",o)):await s.post("/v1/user/promotion",o),Ie("promotions:update"),this.close()}}},yl=["value","textContent"];kl.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("f7-link"),_=l("f7-toolbar"),I=l("banner-editor"),S=l("f7-list-input"),U=l("placement-selector"),D=l("place-selector"),T=l("f7-list-item"),q=l("f7-list"),L=l("f7-block-title"),O=l("content-selector"),z=l("f7-tab"),j=l("html-editor"),A=l("f7-tabs"),B=l("f7-page"),E=l("f7-view"),V=l("f7-popup");return n(),o(V,{"close-by-backdrop-click":!0},{default:r((()=>[c(E,{"stack-pages":!0},{default:r((()=>[c(B,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[1]||(t[1]=e=>p.save())})])),_:1})])),_:1}),"text"===s.content.type?(n(),o(_,{key:0,tabbar:"",top:""},{default:r((()=>[c(y,{"tab-link":`#tab-1-${p.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(y,{"tab-link":`#tab-2-${p.tabid}`},{default:r((()=>[x(u(e.$t("full-description")),1)])),_:1},8,["tab-link"])])),_:1})):d("",!0),c(A,null,{default:r((()=>[c(z,{id:`tab-1-${p.tabid}`,"tab-active":""},{default:r((()=>[c(I,{type:"picture",title:e.$t("banner-app"),value:s.promotion.picture,onChange:p.pictureChange},null,8,["title","value","onChange"]),c(I,{type:"banner",title:e.$t("banner-site"),value:s.promotion.banner,onChange:p.bannerChange},null,8,["title","value","onChange"]),c(q,null,{default:r((()=>[c(S,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.promotion.name,"onUpdate:value":t[2]||(t[2]=e=>s.promotion.name=e)},null,8,["label","value"]),c(S,{label:e.$t("short-description"),class:"required",type:"textarea",resizable:"",maxlength:"512",value:s.promotion.description,"onUpdate:value":t[3]||(t[3]=e=>s.promotion.description=e)},null,8,["label","value"]),c(U,{value:s.promotion.placement,"onUpdate:value":t[4]||(t[4]=e=>s.promotion.placement=e)},null,8,["value"]),c(D,{places:s.places,value:s.promotion.places,"onUpdate:value":t[5]||(t[5]=e=>s.promotion.places=e),multiple:""},null,8,["places","value"]),c(T,{checkbox:"",title:e.$t("displayed"),checked:s.promotion.active,"onUpdate:checked":t[6]||(t[6]=e=>s.promotion.active=e)},null,8,["title","checked"])])),_:1}),c(L,{medium:"",textContent:u(e.$t("content"))},null,8,["textContent"]),c(q,null,{default:r((()=>[c(T,{"smart-select":"",title:e.$t("type"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"content-type","onUpdate:modelValue":t[7]||(t[7]=e=>s.content.type=e)},[(n(!0),$(C,null,w(s.contents,(t=>(n(),$("option",{key:t,value:t,textContent:u(e.$t(t))},null,8,yl)))),128))],512),[[P,s.content.type]])])),_:1},8,["title"]),"link"===s.content.type?(n(),o(S,{key:0,label:e.$t("link"),type:"url",maxlength:"512",value:s.content.value,"onUpdate:value":t[8]||(t[8]=e=>s.content.value=e)},null,8,["label","value"])):d("",!0),"link"!==s.content.type&&"text"!==s.content.type?(n(),o(O,{key:1,items:p.items,type:s.content.type,value:s.content.value,"onUpdate:value":t[9]||(t[9]=e=>s.content.value=e)},null,8,["items","type","value"])):d("",!0)])),_:1}),c(g,{onClick:t[10]||(t[10]=e=>p.save())})])),_:1},8,["id"]),c(z,{id:`tab-2-${p.tabid}`},{default:r((()=>[c(j,{value:s.promotion.text,onChange:p.changeText},null,8,["value","onChange"])])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const $l={name:"notifications-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("notifications:update",(e=>{this.getItems(),e&&this.send(e)}))},unmounted(){_e("notifications:update")},methods:{send(e){a.dialog.confirm(this.$t("send-confirm"),this.$t("sending"),(async()=>{await s.post("/v1/user/notification/send",{id:e})}))},searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},bannerUrl:e=>ce(e,"mini","app"),async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/notifications",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/notification/${e}`);this.f7router.navigate(`/notification/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/notification/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/notifications",{ids:a})}}};$l.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("notifications"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:"banners-list"},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(v,{link:"",key:t.id,badge:e.$t("placement-"+t.placement),media:d.bannerUrl(t.picture),title:t.name,subtitle:t.description,class:I({grayscale:!1===t.active}),onClick:e=>d.clickItem(t.id),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"green",onClick:e=>d.send(t.id)},{default:r((()=>[c(u,{icon:"fas fa-paper-plane"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["badge","media","title","subtitle","class","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const wl={name:"notification-popup",components:{SaveButton:et,HtmlEditor:pl,BannerEditor:zt,PlaceSelector:_i,PlacementSelector:hl,ContentSelector:gl},mixins:[bt],props:{value:Object},data(){const e=t.get(this.value,"places",[]),a=t.get(this.value,"groups",[]),i=t.get(this.value,"products",[]),s=t.get(this.value,"seasons",[]),l=t.get(this.value,"gifts",[]),n=t.get(this.value,"promotions",[]),o=["text"];t.size(a)&&o.push("group"),t.size(i)&&o.push("product"),t.size(s)&&o.push("season"),t.size(l)&&o.push("gift"),t.size(n)&&o.push("promotion"),o.push("link");const r=t.defaults(t.get(this.value,"notification",{}),{picture:"",placement:"everywhere",active:!0,places:[]}),c=t.get(r,"content.type","text"),d={};return"text"===c?(d.type="text",d.value=""):"link"===c?(d.type="link",d.value=t.get(r,"content.value","")):c&&(d.type=t.get(r,"content.type"),d.value=t.get(r,"content.value")),{notification:r,contents:o,content:d,places:e,groups:a,products:i,seasons:s,gifts:l,promotions:n}},computed:{tabid:()=>ze(),title(){return this.notification.id?this.$t("editing"):this.$t("adding")},virtualListHeight:()=>"md"===a.theme?48:44,items(){let e=[];switch(this.content.type){case"group":e=this.groups;break;case"product":e=this.products;break;case"season":e=this.seasons;break;case"gift":e=this.gifts;break;case"promotion":e=this.promotions}return e}},methods:{pictureChange(e){this.notification.picture=e},async save(e){const a=this.notification.picture,i=t.trim(this.notification.name),l=t.trim(this.notification.description),n={};if(t.isEmpty(a))return he(this.$t("picture-subtitle"));if(t.isEmpty(i))return he(this.$t("title-empty"));if(t.isEmpty(l))return he(this.$t("description-empty"));switch(this.content.type){case"link":if(!ue(this.content.value))return he(this.$t("link-empty"));break;case"group":if(t.isEmpty(this.content.value))return he(this.$t("group-empty"));break;case"product":if(t.isEmpty(this.content.value))return he(this.$t("product-empty"));break;case"season":if(t.isEmpty(this.content.value))return he(this.$t("season-empty"));break;case"gift":if(t.isEmpty(this.content.value))return he(this.$t("gift-empty"));break;case"promotion":if(t.isEmpty(this.content.value))return he(this.$t("promotion-empty"))}let o;n.picture=a,n.name=i,n.description=l,n.placement=this.notification.placement,n.active=this.notification.active,n.places=this.notification.places,"text"!==this.content.type&&(n.content=this.content),this.notification.id?(n.id=this.notification.id,o=await s.patch("/v1/user/notification",n)):o=await s.post("/v1/user/notification",n),Ie("notifications:update",e?o.data.id:void 0),this.close()}}},Cl=["value","textContent"];wl.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("banner-editor"),x=l("f7-list-input"),_=l("placement-selector"),I=l("place-selector"),S=l("f7-list-item"),U=l("f7-list"),D=l("f7-block-title"),T=l("content-selector"),q=l("f7-page"),L=l("f7-view"),O=l("f7-popup");return n(),o(O,{"close-by-backdrop-click":!0},{default:r((()=>[c(L,{"stack-pages":!0},{default:r((()=>[c(q,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[1]||(t[1]=e=>p.save(!1))})])),_:1})])),_:1}),c(y,{type:"picture",title:e.$t("banner"),value:s.notification.picture,onChange:p.pictureChange},null,8,["title","value","onChange"]),c(U,null,{default:r((()=>[c(x,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.notification.name,"onUpdate:value":t[2]||(t[2]=e=>s.notification.name=e)},null,8,["label","value"]),c(x,{label:e.$t("short-description"),class:"required",type:"textarea",resizable:"",maxlength:"512",value:s.notification.description,"onUpdate:value":t[3]||(t[3]=e=>s.notification.description=e)},null,8,["label","value"]),c(_,{value:s.notification.placement,"onUpdate:value":t[4]||(t[4]=e=>s.notification.placement=e)},null,8,["value"]),c(I,{places:s.places,value:s.notification.places,"onUpdate:value":t[5]||(t[5]=e=>s.notification.places=e),multiple:""},null,8,["places","value"]),c(S,{checkbox:"",title:e.$t("displayed"),checked:s.notification.active,"onUpdate:checked":t[6]||(t[6]=e=>s.notification.active=e)},null,8,["title","checked"])])),_:1}),c(D,{medium:"",textContent:u(e.$t("content"))},null,8,["textContent"]),c(U,null,{default:r((()=>[c(S,{"smart-select":"",title:e.$t("type"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"content-type","onUpdate:modelValue":t[7]||(t[7]=e=>s.content.type=e)},[(n(!0),$(C,null,w(s.contents,(t=>(n(),$("option",{key:t,value:t,textContent:u(e.$t(t))},null,8,Cl)))),128))],512),[[P,s.content.type]])])),_:1},8,["title"]),"link"===s.content.type?(n(),o(x,{key:0,label:e.$t("link"),type:"url",maxlength:"512",value:s.content.value,"onUpdate:value":t[8]||(t[8]=e=>s.content.value=e)},null,8,["label","value"])):d("",!0),"link"!==s.content.type&&"text"!==s.content.type?(n(),o(T,{key:1,items:p.items,type:s.content.type,value:s.content.value,"onUpdate:value":t[9]||(t[9]=e=>s.content.value=e)},null,8,["items","type","value"])):d("",!0)])),_:1}),c(g,{onClick:t[10]||(t[10]=e=>p.save(!1))}),c(g,{fill:!1,label:e.$t("save-and-send"),onClick:t[11]||(t[11]=e=>p.save(!0))},null,8,["label"])])),_:1})])),_:1})])),_:1})};const xl={name:"seasons-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("seasons:update",(()=>{this.getItems()}))},unmounted(){_e("seasons:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},bannerUrl:e=>ce(e,"mini","app"),async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/seasons",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/season/${e}`);this.f7router.navigate(`/season/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/season/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/seasons",{ids:a})}}};xl.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("seasons"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:"banners-list"},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(v,{link:"",key:t.id,badge:e.$t("placement-"+t.placement),media:d.bannerUrl(t.picture),title:t.name,subtitle:t.description,class:I({grayscale:!1===t.active}),onClick:e=>d.clickItem(t.id),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["badge","media","title","subtitle","class","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const _l={name:"f7-list-item-product-selector",emits:["update:value"],props:{products:{type:Array,required:!0},value:{type:Array,default:void 0},title:String},watch:{value(e){this.$emit("update:value",e)}},computed:{smartSelectParams(){return{searchbar:!0,virtualList:!0,virtualListHeight:96,scrollToSelectedItem:!0,formatValueText:e=>0===t.size(e)?this.$t("no"):t.size(e)}}},methods:{picture:e=>re(t.get(e,"gallery.0.picture"),"small","image")}},Il=["value","textContent","data-option-image"];_l.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return f((n(),o(d,{"smart-select":"","smart-select-params":c.smartSelectParams,title:a.title||e.$t("products")},{default:r((()=>[f(m("select",{name:"products",multiple:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},[(n(!0),$(C,null,w(a.products,(e=>(n(),$("option",{value:e.id,textContent:u(e.name),"data-option-image":c.picture(e)},null,8,Il)))),256))],512),[[P,a.value]])])),_:1},8,["smart-select-params","title"])),[[b,a.products.length>0]])};const Sl={name:"season-popup",components:{SaveButton:et,BannerEditor:zt,PlaceSelector:_i,PlacementSelector:hl,ProductSelector:_l},mixins:[bt],props:{value:Object},data(){const e=t.get(this.value,"places",[]),a=t.get(this.value,"products",[]),i=t.get(this.value,"purchases",[]),s=t.defaults(t.get(this.value,"season",{}),{picture:"",name:"",description:"",placement:"everywhere",duration:14,price:1,amount:1,active:!0,places:[],products:[]});return{searchbarid:ze(),search:!1,season:s,places:e,products:a,purchases:i}},computed:{tabid:()=>ze(),title(){return this.season.id?this.$t("editing"):this.$t("adding")},virtualListHeight:()=>"md"===a.theme?48:44},methods:{pictureChange(e){this.season.picture=e},getHeader:e=>e.place.address,getTitle:e=>e.customer.name,getSubtitle(e){const a=[];return e.customer.phone&&a.push(`${this.$t("phone")}: ${e.customer.phone}`),e.customer.email&&a.push(`${this.$t("email")}: ${e.customer.email}`),t.join(a,", ")},getBadge(e){return y(A(e.date),this.$t("date-format"))},removePurchase(e,t){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/customer-seasons/${e}`),this.purchases.splice(t,1)}))},async save(){const e=this.season.picture,a=t.trim(this.season.name),i=t.trim(this.season.description),l=t.parseInt(this.season.duration),n=t.parseInt(this.season.price),o=t.parseInt(this.season.amount);if(t.isEmpty(e))return he(this.$t("picture-subtitle"));if(t.isEmpty(a))return he(this.$t("title-empty"));if(t.isEmpty(i))return he(this.$t("description-empty"));if(!(t.isNumber(n)&&n>0))return he(this.$t("price-empty"));if(!(t.isNumber(o)&&o>0))return he(this.$t("amount-empty"));const r={};if(r.picture=e,r.name=a,r.description=i,r.placement=this.season.placement,r.duration=l,r.price=n,r.amount=o,r.active=this.season.active,r.places=this.season.places,t.isEmpty(this.season.products))return he(this.$t("add-product"));r.products=this.season.products,this.season.id?(r.id=this.season.id,await s.patch("/v1/user/season",r)):await s.post("/v1/user/season",r),Ie("seasons:update"),this.close()}}},Ul={class:"item-content item-input required"},Pl={class:"item-inner"},Dl=["textContent"],Tl={class:"item-input-wrap"},ql={class:"item-content item-input required"},Ll={class:"item-inner"},Ol=["textContent"],zl={class:"item-input-wrap"},jl=[m("option",{value:"7"},"7",-1),m("option",{value:"14"},"14",-1),m("option",{value:"21"},"21",-1),m("option",{value:"30"},"30",-1)];Sl.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),g=l("f7-icon"),v=l("f7-link"),k=l("save-button"),y=l("f7-nav-right"),_=l("f7-searchbar"),S=l("f7-navbar"),U=l("f7-toolbar"),D=l("banner-editor"),T=l("f7-list-input"),L=l("f7-list-item"),O=l("placement-selector"),z=l("place-selector"),j=l("product-selector"),A=l("f7-list"),B=l("f7-tab"),E=l("f7-swipeout-button"),V=l("f7-swipeout-actions"),M=l("f7-tabs"),N=l("f7-page"),F=l("f7-view"),R=l("f7-popup");return n(),o(R,{"close-by-backdrop-click":!0},{default:r((()=>[c(F,{"stack-pages":!0},{default:r((()=>[c(N,null,{default:r((()=>[c(S,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(y,null,{default:r((()=>[f(c(v,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(g,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"]),[[b,s.search]]),c(k,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1}),c(_,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-header,.item-title,.item-subtitle",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1}),c(U,{tabbar:"",top:""},{default:r((()=>[c(v,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(v,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[x(u(e.$t("purchases")),1)])),_:1},8,["tab-link"])])),_:1}),c(M,null,{default:r((()=>[c(B,{id:`tab-1-${d.tabid}`,"tab-active":""},{default:r((()=>[c(D,{type:"picture",value:s.season.picture,onChange:d.pictureChange},null,8,["value","onChange"]),c(A,null,{default:r((()=>[c(T,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.season.name,"onUpdate:value":t[2]||(t[2]=e=>s.season.name=e)},null,8,["label","value"]),c(T,{label:e.$t("short-description"),class:"required",type:"textarea",resizable:"",maxlength:"1024",value:s.season.description,"onUpdate:value":t[3]||(t[3]=e=>s.season.description=e)},null,8,["label","value"]),m("li",Ul,[m("div",Pl,[m("div",{class:"item-title item-label",textContent:u(e.$t("price"))},null,8,Dl),m("div",Tl,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=e=>s.season.price=e)},null,512),[[q,s.season.price,void 0,{number:!0}]])])])]),m("li",ql,[m("div",Ll,[m("div",{class:"item-title item-label",textContent:u(e.$t("amount"))},null,8,Ol),m("div",zl,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=e=>s.season.amount=e)},null,512),[[q,s.season.amount,void 0,{number:!0}]])])])]),c(L,{"smart-select":"",title:e.$t("duration"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"placement","onUpdate:modelValue":t[6]||(t[6]=e=>s.season.duration=e)},jl,512),[[P,s.season.duration]])])),_:1},8,["title"]),c(O,{value:s.season.placement,"onUpdate:value":t[7]||(t[7]=e=>s.season.placement=e)},null,8,["value"]),c(z,{places:s.places,value:s.season.places,"onUpdate:value":t[8]||(t[8]=e=>s.season.places=e),multiple:""},null,8,["places","value"]),c(j,{products:s.products,value:s.season.products,"onUpdate:value":t[9]||(t[9]=e=>s.season.products=e)},null,8,["products","value"]),c(L,{checkbox:"",title:e.$t("displayed"),checked:s.season.active,"onUpdate:checked":t[10]||(t[10]=e=>s.season.active=e)},null,8,["title","checked"])])),_:1}),c(k,{onClick:t[11]||(t[11]=e=>d.save())})])),_:1},8,["id"]),c(B,{id:`tab-2-${d.tabid}`,"onTab:show":t[12]||(t[12]=e=>s.search=!0),"onTab:hide":t[13]||(t[13]=e=>s.search=!1)},{default:r((()=>[f(c(A,{id:`list-${s.searchbarid}`,"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.purchases,((e,t)=>(n(),o(L,{link:"",key:e.id,header:d.getHeader(e),title:d.getTitle(e),subtitle:d.getSubtitle(e),badge:d.getBadge(e),swipeout:""},{default:r((()=>[c(V,{right:""},{default:r((()=>[c(E,{close:"",color:"red",onClick:a=>d.removePurchase(e.id,t)},{default:r((()=>[c(g,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["header","title","subtitle","badge"])))),128))])),_:1},8,["id"]),[[b,s.purchases.length]])])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const Al={name:"gifts-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("gifts:update",(()=>{this.getItems()}))},unmounted(){_e("gifts:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/gifts",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/gift/${e}`);this.f7router.navigate(`/gift/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/gift/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/gifts",{ids:a})}}};Al.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("gifts"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:"banners-list"},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(v,{link:"",key:t.id,badge:e.$t("placement-"+t.placement),title:t.name,subtitle:t.description,class:I({grayscale:!1===t.active}),onClick:e=>d.clickItem(t.id),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["badge","title","subtitle","class","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const Bl={name:"picture-editor",emits:["change"],props:{type:{type:String,required:!0,validator:e=>-1!==["logo","icon","banner","svg"].indexOf(e)},value:String},data(){return{picture:this.value}},computed:{title(){let e;switch(this.type){case"icon":case"svg":e=this.$t("icon");break;case"logo":e=this.$t("logo");break;case"banner":e=this.$t("banner")}return e},height(){let e;switch(this.type){case"icon":case"svg":e=48;break;case"logo":e=32;break;case"banner":e=128}return e},src(){return this.picture?oe(`/v1/images/${this.picture}`):"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}},methods:{dragOver(e){_(e.target).addClass("active-state")},dragLeave(e){_(e.target).removeClass("active-state")},drop(e){_(e.target).removeClass("active-state"),this.uploadPicture(e.dataTransfer.files[0])},upload(){const e=_("#file");e.val(""),"banner"===this.type?e.attr("accept",".jpg,.jpeg,.png"):"svg"===this.type?e.attr("accept",".svg"):e.attr("accept",".png"),e.removeAttr("multiple"),e.once("change",(e=>{if(void 0===window.File||void 0===window.FileReader||void 0===window.FileList||void 0===window.Blob)return he(this.$t("not-support-file-uploads"));this.uploadPicture(e.currentTarget.files[0])})),e.click()},async uploadPicture(e){if(("image/png"===e.type||"image/jpeg"===e.type||"image/svg+xml"===e.type)&&e.size<=512e4){const i=new FormData;i.append("file",e);const l={headers:{type:this.type,lang:a.params.language}};let n;switch(this.type){case"icon":n="/v1/user/upload/icon";break;case"svg":n="/v1/user/upload/svg";break;case"logo":case"banner":n="/v1/user/upload/image"}const o=await s.post(n,i,l),r=t.get(o.data,"0.file");this.$emit("change",r),this.setPicture(r)}else he(this.$t("gallery-text"))},setPicture(e){this.picture=e}}},El=["src","height"];Bl.render=function(e,t,a,i,s,o){const d=l("f7-block-title"),p=l("f7-list-item"),h=l("f7-list");return n(),$(C,null,[c(d,{textContent:u(o.title)},null,8,["textContent"]),c(h,{class:"graphics-list"},{default:r((()=>[c(p,{link:"",onClick:t[3]||(t[3]=e=>o.upload())},{default:r((()=>[m("div",{slot:"content",class:"contextmenu",onDragover:t[0]||(t[0]=e=>o.dragOver(e)),onDragleave:t[1]||(t[1]=e=>o.dragLeave(e)),onDrop:t[2]||(t[2]=e=>o.drop(e))},null,32),m("img",{src:o.src,height:o.height,alt:"picture"},null,8,El)])),_:1})])),_:1})],64)};const Vl={name:"gift-popup",components:{PlaceSelector:_i,SaveButton:et,BannerEditor:zt,PictureEditor:Bl,PlacementSelector:hl,ProductSelector:_l},mixins:[bt],props:{value:Object},data(){const e=t.get(this.value,"places",[]),a=t.get(this.value,"products",[]),i=t.get(this.value,"purchases",[]),s=t.defaults(t.get(this.value,"gift",{}),{placement:"everywhere",quantity:5,active:!0,places:[],products:[],gifts:[]});return{searchbarid:ze(),search:!1,gift:s,places:e,products:a,purchases:i}},computed:{tabid:()=>ze(),title(){return this.gift.id?this.$t("editing"):this.$t("adding")},virtualListHeight:()=>"md"===a.theme?48:44},methods:{changeIcon(e){this.gift.icon=e},getTitle:e=>e.customer.name,getSubtitle(e){const a=[];return e.customer.phone&&a.push(`${this.$t("phone")}: ${e.customer.phone}`),e.customer.email&&a.push(`${this.$t("email")}: ${e.customer.email}`),t.join(a,", ")},getBadge:e=>e.count,async save(){const e=t.trim(t.get(this.gift,"name")),a=t.trim(t.get(this.gift,"description")),i=t.trim(t.get(this.gift,"message"));let l=t.parseInt(this.gift.quantity);if(l<2&&(l=2),l>5&&(l=5),t.isEmpty(e))return he(this.$t("title-empty"));if(t.isEmpty(a))return he(this.$t("description-empty"));if(t.isEmpty(i))return he(this.$t("message-empty"));const n={};return n.name=e,n.description=a,n.message=i,n.placement=this.gift.placement,n.quantity=l,n.active=this.gift.active,this.gift.icon&&(n.icon=this.gift.icon),n.places=this.gift.places,t.isEmpty(this.gift.products)?he(this.$t("add-product")):(n.products=this.gift.products,t.isEmpty(this.gift.gifts)?he(this.$t("add-gift")):(n.gifts=this.gift.gifts,this.gift.id?(n.id=this.gift.id,await s.patch("/v1/user/gift",n)):await s.post("/v1/user/gift",n),Ie("gifts:update"),void this.close()))}}},Ml={class:"item-content item-input required"},Nl={class:"item-inner"},Fl=["textContent"],Rl={class:"item-input-wrap"};Vl.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),g=l("f7-icon"),v=l("f7-link"),k=l("save-button"),y=l("f7-nav-right"),_=l("f7-searchbar"),S=l("f7-navbar"),U=l("f7-toolbar"),P=l("picture-editor"),D=l("f7-list-input"),T=l("placement-selector"),L=l("place-selector"),O=l("product-selector"),z=l("f7-list-item"),j=l("f7-list"),A=l("f7-tab"),B=l("f7-swipeout-button"),E=l("f7-swipeout-actions"),V=l("f7-tabs"),M=l("f7-page"),N=l("f7-view"),F=l("f7-popup");return n(),o(F,{"close-by-backdrop-click":!0},{default:r((()=>[c(N,{"stack-pages":!0},{default:r((()=>[c(M,null,{default:r((()=>[c(S,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(y,null,{default:r((()=>[f(c(v,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(g,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"]),[[b,s.search]]),c(k,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1}),c(_,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-subtitle",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1}),c(U,{tabbar:"",top:""},{default:r((()=>[c(v,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(v,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[x(u(e.$t("purchases")),1)])),_:1},8,["tab-link"])])),_:1}),c(V,null,{default:r((()=>[c(A,{id:`tab-1-${d.tabid}`,"tab-active":""},{default:r((()=>[c(P,{type:"svg",value:s.gift.icon,onChange:d.changeIcon},null,8,["value","onChange"]),c(j,null,{default:r((()=>[c(D,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.gift.name,"onUpdate:value":t[2]||(t[2]=e=>s.gift.name=e)},null,8,["label","value"]),c(D,{label:e.$t("short-description"),class:"required",type:"textarea",resizable:"",maxlength:"512",value:s.gift.description,"onUpdate:value":t[3]||(t[3]=e=>s.gift.description=e)},null,8,["label","value"]),c(D,{label:e.$t("message"),class:"required",type:"textarea",resizable:"",maxlength:"512",value:s.gift.message,"onUpdate:value":t[4]||(t[4]=e=>s.gift.message=e)},null,8,["label","value"]),m("li",Ml,[m("div",Nl,[m("div",{class:"item-title item-label",textContent:u(e.$t("quantity"))},null,8,Fl),m("div",Rl,[f(m("input",{type:"number",step:"1",min:"2",max:"5","onUpdate:modelValue":t[5]||(t[5]=e=>s.gift.quantity=e)},null,512),[[q,s.gift.quantity,void 0,{number:!0}]])])])]),c(T,{value:s.gift.placement,"onUpdate:value":t[6]||(t[6]=e=>s.gift.placement=e)},null,8,["value"]),c(L,{places:s.places,value:s.gift.places,"onUpdate:value":t[7]||(t[7]=e=>s.gift.places=e),multiple:""},null,8,["places","value"]),c(O,{title:e.$t("products"),products:s.products,value:s.gift.products,"onUpdate:value":t[8]||(t[8]=e=>s.gift.products=e)},null,8,["title","products","value"]),c(O,{title:e.$t("gifts"),products:s.products,value:s.gift.gifts,"onUpdate:value":t[9]||(t[9]=e=>s.gift.gifts=e)},null,8,["title","products","value"]),c(z,{checkbox:"",title:e.$t("displayed"),checked:s.gift.active,"onUpdate:checked":t[10]||(t[10]=e=>s.gift.active=e)},null,8,["title","checked"])])),_:1}),c(k,{onClick:t[11]||(t[11]=e=>d.save())})])),_:1},8,["id"]),c(A,{id:`tab-2-${d.tabid}`,"onTab:show":t[12]||(t[12]=e=>s.search=!0),"onTab:hide":t[13]||(t[13]=e=>s.search=!1)},{default:r((()=>[f(c(j,{id:`list-${s.searchbarid}`,"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.purchases,((t,a)=>(n(),o(z,{link:"",key:t.id,title:d.getTitle(t),subtitle:d.getSubtitle(t),badge:d.getBadge(t),swipeout:""},{default:r((()=>[c(E,{right:""},{default:r((()=>[c(B,{close:"",color:"red",onClick:i=>e.removePurchase(t.id,a)},{default:r((()=>[c(g,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","subtitle","badge"])))),128))])),_:1},8,["id"]),[[b,s.purchases.length]])])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const Hl={name:"promocodes-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("promocodes:update",(()=>{this.getItems()}))},unmounted(){_e("promocodes:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/promocodes",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/promocode/${e}`);this.f7router.navigate(`/promocode/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/promocode/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/promocodes",{ids:a})}}};Hl.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("promocodes"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:"banners-list"},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(v,{link:"",key:t.id,badge:e.$t("placement-"+t.placement),title:t.code,subtitle:t.description,class:I({grayscale:!1===t.active}),onClick:e=>d.clickItem(t.id),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(t.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["badge","title","subtitle","class","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const Gl={name:"period-editor",emits:["change"],props:{value:{type:[Object],required:!1}},data(){const e=t.get(this.value,"start"),a=t.get(this.value,"end"),i=[];for(let t=0;t<24;t++)for(let e=0;e<60;e++)if(e%5==0){let a=t>9?t.toString():`0${t}`,s=e>9?e.toString():`0${e}`;i.push(`${a}:${s}`)}return{type:t.get(this.value,"type","always"),dates:t.get(this.value,"dates",[]),times:i,start:e,end:a,fullDay:void 0===e&&void 0===a}},computed:{virtualListHeight:()=>"md"===a.theme?48:44,datesAfter(){let e="";return 1===t.size(this.dates)?e=y(new Date(this.dates[0]),this.$t("date-format")):t.size(this.dates)>1&&(e=`${y(new Date(this.dates[0]),this.$t("date-format"))} - ${y(new Date(this.dates[t.size(this.dates)-1]),this.$t("date-format"))}`),e}},watch:{type(){this.dates=[],this.setCalendar(),this.change()},dates(){this.change()},start(){this.change()},end(){this.change()},fullDay(e){e?(this.start=void 0,this.end=void 0):(this.start=this.times[0],this.end=this.times[t.size(this.times)-1])}},mounted(){this.setCalendar()},methods:{formatTime:e=>Be(e),strToDate(e){let a=t.split(e,"-"),i=t.parseInt(a[0]),s=t.parseInt(a[1]-1),l=t.parseInt(a[2]);return new Date(i,s,l)},setCalendar(){this.$nextTick((()=>{if(this.calendar&&(this.calendar.close(),this.calendar.destroy(),delete this.calendar),"till"===this.type||"range"===this.type||"multiple"===this.type){let e=new Date;e.setDate(e.getDate()-1);let i={inputEl:"#dates-link",minDate:e,on:{init:e=>{0===t.size(this.dates)&&e.open()},change:(e,a)=>{let i=[];t.each(a,(e=>{i.push(y(e,"yyyy-MM-dd"))})),this.dates=i}}};"till"===this.type&&(i.closeOnSelect=!0,1===t.size(this.dates)&&(i.value=[this.strToDate(this.dates[0])])),"range"===this.type&&(i.rangePicker=!0,i.rangePickerMinDays=1,i.rangePickerMaxDays=90,2===t.size(this.dates)&&(i.value=[this.strToDate(this.dates[0]),this.strToDate(this.dates[1])])),"multiple"===this.type&&(i.multiple=!0,t.size(this.dates)>0&&(i.value=[],t.each(this.dates,(e=>{i.value.push(this.strToDate(e))})))),this.calendar=a.calendar.create(i)}}))},change(){let e={};e.type=this.type,t.size(this.dates)&&(e.dates=this.dates),this.start&&this.end&&(e.start=this.start,e.end=this.end),this.$emit("change",e)}}},Kl=["textContent"],Wl=["textContent"],Zl=["textContent"],Yl=["textContent"],Jl=["value","textContent"],Ql=["value","textContent"];Gl.render=function(e,t,a,i,s,p){const h=l("f7-block-title"),b=l("f7-list-item"),g=l("f7-list");return n(),$(C,null,[c(h,{medium:"",textContent:u(e.$t("period"))},null,8,["textContent"]),c(g,null,{default:r((()=>[c(b,{"smart-select":"",title:e.$t("period-type"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[0]||(t[0]=e=>s.type=e)},[m("option",{value:"always",textContent:u(e.$t("period-always"))},null,8,Kl),m("option",{value:"till",textContent:u(e.$t("period-till"))},null,8,Wl),m("option",{value:"range",textContent:u(e.$t("period-range"))},null,8,Zl),m("option",{value:"multiple",textContent:u(e.$t("period-multiple"))},null,8,Yl)],512),[[P,s.type]])])),_:1},8,["title"]),"till"===s.type||"range"===s.type||"multiple"===s.type?(n(),o(b,{key:0,id:"dates-link",link:"",title:e.$t("dates"),after:p.datesAfter},null,8,["title","after"])):d("",!0),c(b,{checkbox:"",title:e.$t("full-day"),checked:s.fullDay,"onUpdate:checked":t[1]||(t[1]=e=>s.fullDay=e)},null,8,["title","checked"]),s.fullDay?d("",!0):(n(),o(b,{key:1,"smart-select":"",title:e.$t("period-start"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"start","onUpdate:modelValue":t[2]||(t[2]=e=>s.start=e)},[(n(!0),$(C,null,w(s.times,(e=>(n(),$("option",{value:e,textContent:u(p.formatTime(e))},null,8,Jl)))),256))],512),[[P,s.start]])])),_:1},8,["title","smart-select-params"])),s.fullDay?d("",!0):(n(),o(b,{key:2,"smart-select":"",title:e.$t("period-end"),"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"end","onUpdate:modelValue":t[3]||(t[3]=e=>s.end=e)},[(n(!0),$(C,null,w(s.times,(e=>(n(),$("option",{value:e,textContent:u(p.formatTime(e))},null,8,Ql)))),256))],512),[[P,s.end]])])),_:1},8,["title","smart-select-params"]))])),_:1})],64)};const Xl={name:"promocode-popup",components:{SaveButton:et,PeriodEditor:Gl,PlaceSelector:_i,PlacementSelector:hl,ProductSelector:_l},mixins:[bt],props:{value:Object},data(){const e=t.get(this.value,"places",[]),a=t.get(this.value,"products",[]);return{promocode:t.defaults(t.get(this.value,"promocode",{}),{placement:"everywhere",code:"",description:"",type:"percent",once:!1,amount:1,active:!0,places:[],products:[]}),places:e,products:a}},computed:{title(){return this.promocode.id?this.$t("editing"):this.$t("adding")},virtualListHeight:()=>"md"===a.theme?48:44},methods:{periodChange(e){this.promocode.period=e},async save(){const e=t.trim(this.promocode.code),a=t.trim(this.promocode.description),i=this.promocode.once,l=this.promocode.amount;if(t.isEmpty(e))return he(this.$t("title-empty"));if(!(t.isNumber(l)&&l>0))return he(this.$t("amount-empty"));const n={};n.code=e,n.description=a,n.placement=this.promocode.placement,n.type=this.promocode.type,n.once=i,n.amount=l,n.active=this.promocode.active,this.promocode.period&&(n.period=this.promocode.period),n.places=this.promocode.places,n.products=this.promocode.products,this.promocode.id?(n.id=this.promocode.id,await s.patch("/v1/user/promocode",n)):await s.post("/v1/user/promocode",n),Ie("promocodes:update"),this.close()}}},en=["textContent"],tn=["textContent"],an={class:"item-content item-input required"},sn={class:"item-inner"},ln=["textContent"],nn={class:"item-input-wrap"};Xl.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list-input"),$=l("placement-selector"),w=l("place-selector"),C=l("product-selector"),x=l("f7-list"),_=l("period-editor"),I=l("f7-page"),S=l("f7-view"),U=l("f7-popup");return n(),o(U,{"close-by-backdrop-click":!0},{default:r((()=>[c(S,{"stack-pages":!0},{default:r((()=>[c(I,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(x,null,{default:r((()=>[c(k,{"smart-select":"",title:e.$t("type"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[2]||(t[2]=e=>s.promocode.type=e)},[m("option",{value:"percent",textContent:u(e.$t("placement-everywhere"))},null,8,en),m("option",{value:"fixed",textContent:u(e.$t("placement-site"))},null,8,tn)],512),[[P,s.promocode.type]])])),_:1},8,["title"]),c(y,{label:e.$t("code"),class:"required",type:"text",maxlength:"64",value:s.promocode.code,"onUpdate:value":t[3]||(t[3]=e=>s.promocode.code=e)},null,8,["label","value"]),c(y,{label:e.$t("short-description"),class:"required",type:"textarea",resizable:"",maxlength:"512",value:s.promocode.description,"onUpdate:value":t[4]||(t[4]=e=>s.promocode.description=e)},null,8,["label","value"]),m("li",an,[m("div",sn,[m("div",{class:"item-title item-label",textContent:u(e.$t("amount"))},null,8,ln),m("div",nn,[f(m("input",{type:"number",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=e=>s.promocode.amount=e)},null,512),[[q,s.promocode.amount,void 0,{number:!0}]])])])]),c(k,{checkbox:"",title:e.$t("once"),checked:s.promocode.once,"onUpdate:checked":t[6]||(t[6]=e=>s.promocode.once=e)},null,8,["title","checked"]),c($,{value:s.promocode.placement,"onUpdate:value":t[7]||(t[7]=e=>s.promocode.placement=e)},null,8,["value"]),c(w,{places:s.places,value:s.promocode.places,"onUpdate:value":t[8]||(t[8]=e=>s.promocode.places=e),multiple:""},null,8,["places","value"]),c(C,{products:s.products,value:s.promocode.products,"onUpdate:value":t[9]||(t[9]=e=>s.promocode.products=e)},null,8,["products","value"]),c(k,{checkbox:"",title:e.$t("displayed"),checked:s.promocode.active,"onUpdate:checked":t[10]||(t[10]=e=>s.promocode.active=e)},null,8,["title","checked"])])),_:1}),c(_,{value:s.promocode.period,onChange:d.periodChange},null,8,["value","onChange"]),c(b,{onClick:t[11]||(t[11]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const on={name:"reviews-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],photos:[]}),mounted(){this.getItems(),xe("reviews:update",(()=>{this.getItems()}))},unmounted(){_e("reviews:update")},methods:{getHeader(e){return y(new Date(e.created),this.$t("date-and-time-format"))},getText(e){const a=[e.author.name];return e.author.phone&&a.push(e.author.phone),e.author.email&&a.push(e.author.email),`- ${t.join(a," / ")}`},getBadge:e=>e.rating,getBadgeColor(e){let t;switch(e.rating){case 1:t="red";break;case 2:t="orange";break;case 3:t="yellow";break;case 4:t="teal";break;case 5:t="green"}return t},getPicture:e=>re(t.get(e,"photos.0.picture"),"small","image"),searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},clickItem(e){if(this.canClick&&t.size(e.photos)){const a=[];t.each(e.photos,(e=>{a.push(oe(`/v1/images/${e.picture}`))})),this.photos=a,this.$nextTick((()=>{this.$refs.photoBrowser.open()}))}},async getItems(e){const a=await s.get("/v1/user/reviews",{params:{type:"customer"}});t.isFunction(e)&&e(),0===t.size(a.data)&&he(this.$t("nothing-found")),this.items=a.data,this.$forceUpdate()},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/review/${e}`),this.getItems()}))}}};on.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-photo-browser"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("reviews"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-header,.item-subtitle,.item-header",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,class:"reviews-list","media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.id,title:e.name,onClick:t=>d.clickItem(e),media:d.getPicture(e),header:d.getHeader(e),text:d.getText(e),subtitle:e.message,badge:d.getBadge(e),"badge-color":d.getBadgeColor(e),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick","media","header","text","subtitle","badge","badge-color"])))),128))])),_:1},8,["id"]),[[b,s.items.length]]),c(_,{photos:s.photos,type:"popup",theme:"dark",ref:"photoBrowser","routable-modals":!1,"popup-close-link-text":e.$t("close")},null,8,["photos","popup-close-link-text"])])),_:1},8,["onPtr:refresh"])};const rn={name:"support-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[]}),mounted(){this.getItems(),xe("support:update",(()=>{this.getItems()}))},unmounted(){_e("support:update")},methods:{getHeader(e){return y(new Date(e.created),this.$t("date-and-time-format"))},getText(e){const a=[e.author.name];return e.author.phone&&a.push(e.author.phone),e.author.email&&a.push(e.author.email),`- ${t.join(a," / ")}`},pullToRefresh(e,t){this.getItems(t)},clickItem(e){},async getItems(e){const a=await s.get("/v1/user/support",{params:{type:"customer"}});t.isFunction(e)&&e(),0===t.size(a.data)&&he(this.$t("nothing-found")),this.items=a.data,this.$forceUpdate()},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/support/${e}`),this.getItems()}))}}};rn.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-page");return n(),o(_,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("support"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-header,.item-subtitle,.item-header",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,class:"support-list","media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.id,title:e.name,onClick:t=>d.clickItem(e),header:d.getHeader(e),text:d.getText(e),subtitle:e.message,swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick","header","text","subtitle"])))),128))])),_:1},8,["id"]),[[b,s.items.length]])])),_:1},8,["onPtr:refresh"])};const cn={name:"customers-page",mixins:[Qe],props:{f7router:Object},data(){return{virtualList:void 0,virtualListParams:{items:[],height:"md"===a.theme?108:99,renderExternal:this.renderExternal},virtualListData:{},searchbarid:ze(),items:[],page:1,more:!0}},computed:{showList(){return!!t.size(t.get(this.virtualListData,"items"))}},mounted(){this.getItems(),xe("customers:update",this.getItems)},unmounted(){_e("customers:update",this.getItems)},methods:{getSubtitle(e){const a=[];return e.phone&&a.push(e.phone),e.email&&a.push(e.email),t.join(a," | ")},getBadge(e){let t="";return e.test?t=this.$t("test"):e.purchases&&(t=e.purchases),t},getBadgeColor(e){let t="";return e.test&&(t="red"),t},getPicture:e=>re(e,"small","avatar"),renderExternal(e,t){this.virtualList=e,this.virtualListData=t},searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},infiniteScroll(){this.more&&this.getItems(!0)},async getItems(e){!0===e?this.page++:(this.page=1,this.more=!0);let a={};a.page=this.page,"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/customers",{params:a});"function"==typeof e&&e(),0===t.size(i.data)&&1===this.page&&he(this.$t("nothing-found")),t.size(i.data)<100&&(this.more=!1),1===this.page?this.virtualList.replaceAllItems(i.data):this.virtualList.appendItems(i.data),this.$forceUpdate()},addItem(){this.f7router.navigate("/customer/new/")},async editItem(e){const t=await s.get(`/v1/user/customer/${e}`);this.f7router.navigate(`/customer/${e}/`,{props:{customer:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/customer/${e}`),await this.getItems()}))}}};cn.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),g=l("f7-searchbar"),v=l("f7-navbar"),k=l("f7-swipeout-button"),y=l("f7-swipeout-actions"),x=l("f7-list-item"),_=l("f7-list"),S=l("f7-fab"),P=l("f7-page");return n(),o(P,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh,infinite:"","infinite-preloader":!1,onInfinite:d.infiniteScroll},{default:r((()=>[c(v,{title:e.$t("customers"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(g,{class:I(`searchbar-${s.searchbarid}`),placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"custom-search":"",expandable:"",backdrop:!1,"onSearchbar:search":d.searchbarSearch},null,8,["class","placeholder","disable-button-text","onSearchbar:search"])])),_:1},8,["title","back-link"]),f(c(_,{"media-list":"","virtual-list":"","virtual-list-params":s.virtualListParams},{default:r((()=>[m("ul",null,[(n(!0),$(C,null,w(s.virtualListData.items,((e,t)=>(n(),o(x,{link:"",key:t,style:U(`top: ${s.virtualListData.topPosition}px`),title:e.name,media:d.getPicture(e.avatar),subtitle:d.getSubtitle(e),badge:d.getBadge(e),"badge-color":d.getBadgeColor(e),onClick:t=>d.editItem(e.customerid),swipeout:""},{default:r((()=>[c(y,{right:""},{default:r((()=>[c(k,{close:"",color:"blue",onClick:t=>d.editItem(e.customerid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(k,{close:"",color:"red",onClick:t=>d.removeItem(e.customerid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["style","title","media","subtitle","badge","badge-color","onClick"])))),128))])])),_:1},8,["virtual-list-params"]),[[b,d.showList]]),c(S,{onClick:t[0]||(t[0]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh","onInfinite"])};const dn={name:"customer-popup",components:{SaveButton:et,AvatarEditor:Js},mixins:[bt],props:{customer:Object},data(){return{customerid:t.get(this.customer,"customerid"),avatar:t.get(this.customer,"avatar",""),name:t.get(this.customer,"name",""),email:t.get(this.customer,"email",""),phone:t.get(this.customer,"phone",""),password:"",test:t.get(this.customer,"test",!1),code:t.get(this.customer,"code","1234")}},computed:{title(){return this.customerid?this.$t("editing"):this.$t("adding")},passwordText(){let e=this.$t("password");return this.customer&&(e+=` (${this.$t("not-required")})`),e}},methods:{changeAvatar(e){this.avatar=e},async save(){if(!this.name)return he(this.$t("name-empty"));if(!this.phone)return he(this.$t("phone-empty"));if(!this.customerid&&!this.password)return he(this.$t("password-empty"));const e={};this.customerid?(e.customerid=this.customerid,this.password&&(e.password=this.password)):e.password=this.password,e.name=this.name,e.email=this.email,e.phone=this.phone,e.avatar=this.avatar,e.test=this.test,this.test&&this.code&&(e.code=this.code),this.customerid?await s.patch("/v1/user/customer",e):await s.post("/v1/user/customer",e),Ie("customers:update"),this.close()}}};dn.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("avatar-editor"),y=l("f7-block-title"),$=l("f7-list-input"),w=l("f7-list-item"),C=l("f7-list"),x=l("f7-page"),_=l("f7-view"),S=l("f7-popup");return n(),o(S,{"close-by-backdrop-click":!0},{default:r((()=>[c(_,{"stack-pages":!0},{default:r((()=>[c(x,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(g,null,{default:r((()=>[c(m,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(k,{avatar:s.avatar,onChange:d.changeAvatar},null,8,["avatar","onChange"]),c(y,{medium:"",textContent:u(e.$t("basic"))},null,8,["textContent"]),c(C,{form:"",autocomplete:"off"},{default:r((()=>[c($,{id:"username",name:"username",autocomplete:"username",label:e.$t("username"),class:"required",type:"text",maxlength:"32",value:s.name,"onUpdate:value":t[2]||(t[2]=e=>s.name=e)},null,8,["label","value"]),c($,{id:"phone",name:"phone",autocomplete:"phone",label:e.$t("phone"),class:"required",type:"tel",maxlength:"14",value:s.phone,"onUpdate:value":t[3]||(t[3]=e=>s.phone=e)},null,8,["label","value"]),c($,{id:"email",name:"email",autocomplete:"email",label:e.$t("email")+" ("+e.$t("not-required")+")",type:"email",maxlength:"64",value:s.email,"onUpdate:value":t[4]||(t[4]=e=>s.email=e)},null,8,["label","value"]),c($,{id:"new-password",name:"new-password",autocomplete:"new-password",label:d.passwordText,class:I({required:!s.customerid}),type:"text",maxlength:"32",value:s.password,"onUpdate:value":t[5]||(t[5]=e=>s.password=e)},null,8,["label","class","value"]),c(w,{checkbox:"",title:e.$t("test"),checked:s.test,"onUpdate:checked":t[6]||(t[6]=e=>s.test=e)},null,8,["title","checked"]),f(c($,{label:e.$t("code"),type:"text",maxlength:"4",value:s.code,"onUpdate:value":t[7]||(t[7]=e=>s.code=e)},null,8,["label","value"]),[[b,s.test]])])),_:1}),c(m,{onClick:t[8]||(t[8]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const un={name:"users-page",mixins:[Qe],props:{f7router:Object},data(){return{virtualList:void 0,virtualListParams:{items:[],height:"md"===a.theme?108:99,renderExternal:this.renderExternal},virtualListData:{},searchbarid:ze(),items:[],places:[],placeids:[],page:1,more:!0}},computed:{showList(){return!!t.size(t.get(this.virtualListData,"items"))}},mounted(){this.getItems(),xe("users:update",this.getItems),xe("users:filter",(e=>{this.placeids=e.placeids,this.getItems()}))},unmounted(){_e("users:update",this.getItems),_e("users:filter")},methods:{filter(){this.f7router.navigate("/users-filter/",{props:{places:this.places,placeids:this.placeids}})},getSubtitle(e){const a=[];return e.phone&&a.push(e.phone),e.email&&a.push(e.email),t.join(a," | ")},getBadge(e){return this.$t(e.role)},getBadgeColor:e=>"",getPicture:e=>re(e,"small","avatar"),renderExternal(e,t){this.virtualList=e,this.virtualListData=t},searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},infiniteScroll(){this.more&&this.getItems(!0)},async getItems(e){!0===e?this.page++:(this.page=1,this.more=!0);let a={};a.page=this.page,"string"==typeof e&&e&&(a.search=e),t.size(this.placeids)&&(a.placeids=this.placeids);const i=await s.get("/v1/user/users",{params:a});this.places=t.get(i.data,"places",[]);const l=t.get(i.data,"items",[]);"function"==typeof e&&e(),0===t.size(l)&&1===this.page&&he(this.$t("nothing-found")),t.size(l)<100&&(this.more=!1),1===this.page?this.virtualList.replaceAllItems(l):this.virtualList.appendItems(l),this.$forceUpdate()},async editItem(e){if(e===fe().id)return he(this.$t("no-access"));const t=await s.get(`/v1/user/user/${e}`);this.f7router.navigate(`/user/${e}/`,{props:{value:t.data}})},removeItem(e,t){const i=fe();if(e===i.id||"admin"===t)return he(this.$t("no-access"));a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/user/${e}`),await this.getItems()}))}}};un.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),g=l("f7-searchbar"),v=l("f7-navbar"),k=l("f7-swipeout-button"),y=l("f7-swipeout-actions"),x=l("f7-list-item"),_=l("f7-list"),S=l("f7-fab"),P=l("f7-page");return n(),o(P,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh,infinite:"","infinite-preloader":!1,onInfinite:d.infiniteScroll},{default:r((()=>[c(v,{title:e.$t("employees"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>d.filter())},{default:r((()=>[c(u,{icon:"fas fa-filter"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(g,{class:I(`searchbar-${s.searchbarid}`),placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"custom-search":"",expandable:"",backdrop:!1,"onSearchbar:search":d.searchbarSearch},null,8,["class","placeholder","disable-button-text","onSearchbar:search"])])),_:1},8,["title","back-link"]),f(c(_,{"media-list":"","virtual-list":"","virtual-list-params":s.virtualListParams},{default:r((()=>[m("ul",null,[(n(!0),$(C,null,w(s.virtualListData.items,((e,t)=>(n(),o(x,{link:"",key:t,style:U(`top: ${s.virtualListData.topPosition}px`),title:e.name,media:d.getPicture(e.avatar),subtitle:d.getSubtitle(e),badge:d.getBadge(e),"badge-color":d.getBadgeColor(e),onClick:t=>d.editItem(e.id),swipeout:""},{default:r((()=>[c(y,{right:""},{default:r((()=>[c(k,{close:"",color:"blue",onClick:t=>d.editItem(e.id)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(k,{close:"",color:"red",onClick:t=>d.removeItem(e.id,e.role)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["style","title","media","subtitle","badge","badge-color","onClick"])))),128))])])),_:1},8,["virtual-list-params"]),[[b,d.showList]]),c(S,{onClick:t[1]||(t[1]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh","onInfinite"])};const pn={emits:["change"],props:{item:{type:Object,required:!0},value:{required:!1}},data(){return{answer:this.value}},watch:{answer(e){this.$emit("change",this.item.name,e)}}},hn={name:"form-viewer-yesno",mixins:[pn],methods:{toggleChanged(e){this.answer=e.target.checked?"yes":"no"}}};hn.render=function(e,t,a,i,s,d){const p=l("f7-toggle"),h=l("f7-list-item");return n(),o(h,null,{default:r((()=>[m("span",null,u(e.item.title),1),c(p,{checked:"yes"===e.answer,onChange:d.toggleChanged},null,8,["checked","onChange"])])),_:1})};const mn={name:"form-viewer-text",mixins:[pn]};mn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"text",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"])};const fn={name:"form-viewer-textarea",mixins:[pn]};fn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"textarea",resizable:"",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"])};const bn={name:"form-viewer-number",mixins:[pn]};bn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"number",placeholder:e.item.placeholder,info:e.item.info,min:e.item.min,max:e.item.max,step:e.item.step,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","min","max","step","value"])};const gn={name:"form-viewer-email",mixins:[pn]};gn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"email",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"])};const vn={name:"form-viewer-password",mixins:[pn]};vn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"password",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"])};const kn={name:"form-viewer-url",mixins:[pn]};kn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"url",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"])};const yn={name:"form-viewer-tel",mixins:[pn]};yn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{label:e.item.title,type:"tel",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"])};const $n={name:"form-viewer-color",mixins:[pn],data(){return{colorPickerParams:{modules:["wheel","hex"],value:{hex:this.value||"#000000"},hexLabel:!0,hexValueEditable:!0,on:{change:(e,t)=>{this.answer=t.hex}}}}}};$n.render=function(e,t,a,i,s,c){const d=l("f7-list-input");return n(),o(d,{type:"colorpicker",placeholder:e.item.placeholder,info:e.item.info,readonly:"","color-picker-params":s.colorPickerParams},{media:r((()=>[m("i",{style:U([`background-color: ${e.answer||"#000000"}`,{width:"24px",height:"24px","border-radius":"4px"}]),class:"icon"},null,4)])),_:1},8,["placeholder","info","color-picker-params"])};const wn={name:"form-viewer-date",mixins:[pn],data(){return{calendarParams:{value:this.value?[new Date(this.value)]:[],closeOnSelect:!0,on:{change:this.change}}}},methods:{change(e,t){t[0]&&(this.answer=t[0])}}};wn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{type:"datepicker",placeholder:e.item.placeholder||e.item.title,info:e.item.info,readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","info","calendar-params"])};const Cn={name:"form-viewer-time",mixins:[pn],data(){return{calendarParams:{value:this.value?[new Date(this.value)]:[],timePicker:!0,timePickerPlaceholder:this.$t("select-time"),toolbarCloseText:this.$t("done"),on:{change:this.change}}}},methods:{change(e,t){t[0]&&(this.answer=t[0])}}};Cn.render=function(e,t,a,i,s,r){const c=l("f7-list-input");return n(),o(c,{type:"datepicker",placeholder:e.item.placeholder||e.item.title,info:e.item.info,readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","info","calendar-params"])};const xn={name:"form-viewer-checkbox",mixins:[pn]},_n=["name"],In=["value","textContent"];xn.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return n(),o(d,{"smart-select":"",title:e.item.title,"smart-select-params":{openIn:"popover"}},{default:r((()=>[f(m("select",{name:e.item.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.answer=t),multiple:""},[(n(!0),$(C,null,w(e.item.options,(e=>(n(),$("option",{value:e.name,textContent:u(e.title)},null,8,In)))),256))],8,_n),[[P,e.answer]])])),_:1},8,["title"])};const Sn={name:"form-viewer-radio",mixins:[pn]},Un=["name"],Pn=["value","textContent"];Sn.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return n(),o(d,{"smart-select":"",title:e.item.title,"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:e.item.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.answer=t)},[(n(!0),$(C,null,w(e.item.options,(e=>(n(),$("option",{value:e.title,textContent:u(e.title)},null,8,Pn)))),256))],8,Un),[[P,e.answer]])])),_:1},8,["title"])};const Dn={name:"form-viewer-separator",mixins:[pn]};Dn.render=function(e,t,a,i,s,r){const c=l("f7-list-item");return n(),o(c,{title:e.item.title,"group-title":""},null,8,["title"])};const Tn={name:"form-viewer",components:{FormViewerYesNo:hn,FormViewerText:mn,FormViewerTextarea:fn,FormViewerNumber:bn,FormViewerEmail:gn,FormViewerPassword:vn,FormViewerURL:kn,FormViewerTel:yn,FormViewerColor:$n,FormViewerDate:wn,FormViewerTime:Cn,FormViewerCheckbox:xn,FormViewerRadio:Sn,FormViewerSeparator:Dn},props:{items:{type:Array,required:!0},values:{type:Object,required:!1}},data(){return{answers:this.values||{}}},emits:["change"],methods:{getValue(e){return"separator"===e.type?{}:t.get(this.values,[e.name])},change(e,a){t.isString(a)&&(a=t.trim(a)),a?this.answers[e]=a:delete this.answers[e],this.$emit("change",this.answers)}}};Tn.render=function(e,t,a,i,s,c){const d=l("f7-list");return n(),o(d,null,{default:r((()=>[(n(!0),$(C,null,w(a.items,(e=>(n(),o(B(`form-viewer-${e.type}`),{item:e,value:c.getValue(e),onChange:c.change},null,8,["item","value","onChange"])))),256))])),_:1})};const qn={name:"user-popup",components:{SaveButton:et,AvatarEditor:Js,FormViewer:Tn,PlaceSelector:_i},mixins:[bt,Qe],props:{value:Object},data(){const e=t.get(this.value,"places",[]),a=t.get(this.value,"profile",{}),i=t.get(this.value,"reviews",[]),s=t.defaults(t.get(this.value,"user",{}),{role:"manager",profile:{}}),l=t.get(s,"permits",{});t.isUndefined(l.orders)&&(l.orders="not"),t.isUndefined(l.places)&&(l.places="not"),t.isUndefined(l.checklists)&&(l.checklists="not"),t.isUndefined(l.content)&&(l.content="not"),t.isUndefined(l.showcase)&&(l.showcase="not"),t.isUndefined(l.customers)&&(l.customers="not"),t.isUndefined(l.marketing)&&(l.marketing="not"),t.isUndefined(l.users)&&(l.users="read"),t.isUndefined(l.reports)&&(l.reports="not"),t.isUndefined(l.settings)&&(l.settings="not"),s.permits=l;const n=[];return"admin"===fe().role&&n.push({value:"admin",label:this.$t("admin")}),n.push({value:"manager",label:this.$t("manager")}),n.push({value:"operator",label:this.$t("operator")}),{user:s,places:e,profile:a,reviews:i,roles:n}},computed:{tabid:()=>ze(),title(){return this.user.id?this.$t("editing"):this.$t("adding")},passwordText(){let e=this.$t("password");return this.user.id&&(e+=` (${this.$t("not-required")})`),e},virtualListHeight:()=>"md"===a.theme?48:44},methods:{changeAvatar(e){this.user.avatar=e},changeProfile(e){this.user.profile=e},getHeader(e){return y(new Date(e.created),this.$t("date-and-time-format"))},getFooter:e=>`- ${e.author.name}`,getBadge(e){return this.$t(5===e.rating?"positive":"negative")},getBadgeColor:e=>5===e.rating?"green":"red",async save(){if(!this.user.name)return he(this.$t("name-empty"));if(!this.user.email)return he(this.$t("email-empty"));if(!this.user.id&&!this.user.password)return he(this.$t("password-empty"));const e={};if(this.user.id?(e.id=this.user.id,this.user.password&&(e.password=this.user.password)):e.password=this.user.password,e.name=this.user.name,e.email=this.user.email,e.phone=this.user.phone||"",e.avatar=this.user.avatar,e.role=this.user.role,"manager"===this.user.role&&(e.permits=this.user.permits),"admin"!==this.user.role&&t.size(this.user.places)>0&&(e.places=this.user.places,"operator"===this.user.role)){if(0===t.size(e.places))return he(this.$t("place-empty"));if(t.size(e.places)>1)return he(this.$t("place-only-one"))}t.size(this.user.profile)&&(e.profile=this.user.profile),this.user.id?await s.patch("/v1/user/user",e):await s.post("/v1/user/user",e),Ie("users:update"),this.close()},giveReview(){this.close(),a.views.main.router.navigate("/review/",{props:{id:this.user.id}})},removeReview(e,t){if("admin"!==fe().role)return he(this.$t("no-access"));a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/review/${e}`),this.reviews.splice(t,1)}))}}},Ln=["value","textContent"],On=["textContent"],zn=["textContent"],jn=["textContent"],An=["textContent"],Bn=["textContent"],En=["textContent"],Vn=["textContent"],Mn=["textContent"],Nn=["textContent"],Fn=["textContent"],Rn=["textContent"],Hn=["textContent"],Gn=["textContent"],Kn=["textContent"],Wn=["textContent"],Zn=["textContent"],Yn=["textContent"],Jn=["textContent"],Qn=["textContent"],Xn=["textContent"],eo=["textContent"],to=["textContent"],ao=["textContent"],io=["textContent"],so=["textContent"],lo=["textContent"],no=["textContent"],oo=["textContent"],ro=["textContent"];qn.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),g=l("f7-nav-title"),v=l("save-button"),k=l("f7-nav-right"),y=l("f7-navbar"),_=l("f7-link"),S=l("f7-toolbar"),U=l("avatar-editor"),D=l("f7-list-input"),T=l("f7-list-item"),q=l("place-selector"),L=l("f7-list"),O=l("f7-block-title"),z=l("f7-tab"),j=l("form-viewer"),A=l("f7-icon"),B=l("f7-swipeout-button"),E=l("f7-swipeout-actions"),V=l("f7-button"),M=l("f7-col"),N=l("f7-row"),F=l("f7-block"),R=l("f7-tabs"),H=l("f7-page"),G=l("f7-view"),K=l("f7-popup");return n(),o(K,{"close-by-backdrop-click":!0},{default:r((()=>[c(G,{"stack-pages":!0},{default:r((()=>[c(H,null,{default:r((()=>[c(y,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(g,{title:p.title},null,8,["title"]),c(k,null,{default:r((()=>[c(v,{mini:"",onClick:t[1]||(t[1]=e=>p.save())})])),_:1})])),_:1}),s.profile||s.user.id?(n(),o(S,{key:0,tabbar:"",top:""},{default:r((()=>[c(_,{"tab-link":`#tab-1-${p.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),s.profile?(n(),o(_,{key:0,"tab-link":`#tab-3-${p.tabid}`},{default:r((()=>[x(u(e.$t("profile")),1)])),_:1},8,["tab-link"])):d("",!0),s.user.id?(n(),o(_,{key:1,"tab-link":`#tab-4-${p.tabid}`},{default:r((()=>[x(u(e.$t("reviews")),1)])),_:1},8,["tab-link"])):d("",!0)])),_:1})):d("",!0),c(R,null,{default:r((()=>[c(z,{id:`tab-1-${p.tabid}`,"tab-active":""},{default:r((()=>[c(U,{avatar:s.user.avatar,onChange:p.changeAvatar},null,8,["avatar","onChange"]),c(L,{form:"",autocomplete:"off"},{default:r((()=>[c(D,{id:"username",name:"username",autocomplete:"username",label:e.$t("username"),class:"required",type:"text",maxlength:"32",value:s.user.name,"onUpdate:value":t[2]||(t[2]=e=>s.user.name=e)},null,8,["label","value"]),c(D,{id:"phone",name:"phone",autocomplete:"phone",label:e.$t("phone")+" ("+e.$t("not-required")+")",type:"tel",maxlength:"14",value:s.user.phone,"onUpdate:value":t[3]||(t[3]=e=>s.user.phone=e)},null,8,["label","value"]),c(D,{id:"email",name:"email",autocomplete:"email",label:e.$t("email"),class:"required",type:"email",maxlength:"64",value:s.user.email,"onUpdate:value":t[4]||(t[4]=e=>s.user.email=e)},null,8,["label","value"]),c(D,{id:"new-password",name:"new-password",autocomplete:"new-password",label:p.passwordText,class:I({required:!s.user.id}),type:"text",maxlength:"32",value:s.user.password,"onUpdate:value":t[5]||(t[5]=e=>s.user.password=e)},null,8,["label","class","value"]),c(T,{"smart-select":"",title:e.$t("role"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"role","onUpdate:modelValue":t[6]||(t[6]=e=>s.user.role=e)},[(n(!0),$(C,null,w(s.roles,(e=>(n(),$("option",{value:e.value,textContent:u(e.label)},null,8,Ln)))),256))],512),[[P,s.user.role]])])),_:1},8,["title"]),f(c(q,{places:s.places,value:s.user.places,"onUpdate:value":t[7]||(t[7]=e=>s.user.places=e),multiple:""},null,8,["places","value"]),[[b,"admin"!==s.user.role]])])),_:1}),f(c(O,{medium:"",textContent:u(e.$t("permits"))},null,8,["textContent"]),[[b,"manager"===s.user.role]]),f(c(L,null,{default:r((()=>[c(T,{"smart-select":"",title:e.$t("orders"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"orders","onUpdate:modelValue":t[8]||(t[8]=e=>s.user.permits.orders=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,On),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,zn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,jn)],512),[[P,s.user.permits.orders]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("places"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"places","onUpdate:modelValue":t[9]||(t[9]=e=>s.user.permits.places=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,An),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,Bn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,En)],512),[[P,s.user.permits.places]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("checklists"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"checklists","onUpdate:modelValue":t[10]||(t[10]=e=>s.user.permits.checklists=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,Vn),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,Mn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,Nn)],512),[[P,s.user.permits.checklists]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("content"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"content","onUpdate:modelValue":t[11]||(t[11]=e=>s.user.permits.content=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,Fn),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,Rn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,Hn)],512),[[P,s.user.permits.content]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("showcase"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"showcase","onUpdate:modelValue":t[12]||(t[12]=e=>s.user.permits.showcase=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,Gn),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,Kn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,Wn)],512),[[P,s.user.permits.showcase]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("customers"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"customers","onUpdate:modelValue":t[13]||(t[13]=e=>s.user.permits.customers=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,Zn),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,Yn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,Jn)],512),[[P,s.user.permits.customers]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("marketing"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"marketing","onUpdate:modelValue":t[14]||(t[14]=e=>s.user.permits.marketing=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,Qn),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,Xn),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,eo)],512),[[P,s.user.permits.marketing]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("users"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"users","onUpdate:modelValue":t[15]||(t[15]=e=>s.user.permits.users=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,to),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,ao),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,io)],512),[[P,s.user.permits.users]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("reports"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"reports","onUpdate:modelValue":t[16]||(t[16]=e=>s.user.permits.reports=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,so),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,lo)],512),[[P,s.user.permits.reports]])])),_:1},8,["title"]),c(T,{"smart-select":"",title:e.$t("settings"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"settings","onUpdate:modelValue":t[17]||(t[17]=e=>s.user.permits.settings=e)},[m("option",{value:"not",textContent:u(e.$t("not"))},null,8,no),m("option",{value:"read",textContent:u(e.$t("read"))},null,8,oo),m("option",{value:"write",textContent:u(e.$t("write"))},null,8,ro)],512),[[P,s.user.permits.settings]])])),_:1},8,["title"])])),_:1},512),[[b,"manager"===s.user.role]]),c(v,{onClick:t[18]||(t[18]=e=>p.save())})])),_:1},8,["id"]),s.profile?(n(),o(z,{key:0,id:`tab-3-${p.tabid}`},{default:r((()=>[c(j,{items:s.profile,values:s.user.profile,onChange:p.changeProfile},null,8,["items","values","onChange"])])),_:1},8,["id"])):d("",!0),s.user.id?(n(),o(z,{key:1,id:`tab-4-${p.tabid}`},{default:r((()=>[f(c(L,{"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.reviews,((e,t)=>(n(),o(T,{link:"",key:e.id,header:p.getHeader(e),footer:p.getFooter(e),text:e.message,badge:p.getBadge(e),"badge-color":p.getBadgeColor(e),swipeout:""},{default:r((()=>[c(E,{right:""},{default:r((()=>[c(B,{close:"",color:"red",onClick:a=>p.removeReview(e.id,t)},{default:r((()=>[c(A,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["header","footer","text","badge","badge-color"])))),128))])),_:1},512),[[b,s.reviews.length]]),c(F,null,{default:r((()=>[c(N,null,{default:r((()=>[c(M,null,{default:r((()=>[c(V,{large:"",fill:"",onClick:p.giveReview,textContent:u(e.$t("give-review"))},null,8,["onClick","textContent"])])),_:1})])),_:1})])),_:1})])),_:1},8,["id"])):d("",!0)])),_:1})])),_:1})])),_:1})])),_:1})};const co={name:"agreements-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("agreements:update",(()=>{this.getItems()}))},unmounted(){_e("agreements:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/agreements",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},addItem(){a.views.current.router.navigate("/agreement/new/")},async editItem(e){const t=await s.get(`/v1/user/agreement/${e}`);a.views.current.router.navigate(`/agreement/${e}/`,{props:{agreement:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/agreement/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.agreementid)})),await s.put("/v1/user/agreements",{ids:a})}}};co.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("agreements"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.agreementid,title:e.name,onClick:t=>d.clickItem(e.agreementid),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:t=>d.editItem(e.agreementid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.agreementid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const uo={name:"agreement-popup",components:{SaveButton:et,HtmlEditor:pl},mixins:[bt],props:{agreement:Object,f7router:Object},data(){return{agreementid:t.get(this.agreement,"agreementid",""),name:t.get(this.agreement,"name",""),text:t.get(this.agreement,"text","")}},computed:{title(){return this.agreement?this.$t("editing"):this.$t("adding")},afterText(){return t.truncate(Me(this.text),{length:32})},tabid:()=>ze()},methods:{changeText(e){this.text=e},async save(){const e=t.trim(this.name),a=t.trim(this.text);if(t.isEmpty(e))return he(this.$t("title-empty"));if(t.isEmpty(a))return he(this.$t("description-empty"));const i={name:e,text:a};this.agreementid?(i.agreementid=this.agreementid,await s.patch("/v1/user/agreement",i)):await s.post("/v1/user/agreement",i),Ie("agreements:update"),this.close()}}};uo.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("save-button"),f=l("f7-nav-right"),b=l("f7-navbar"),g=l("f7-link"),v=l("f7-toolbar"),k=l("f7-list-input"),y=l("f7-list"),$=l("f7-tab"),w=l("html-editor"),C=l("f7-tabs"),_=l("f7-page"),I=l("f7-view"),S=l("f7-popup");return n(),o(S,{"close-by-backdrop-click":!0},{default:r((()=>[c(I,{"stack-pages":!0},{default:r((()=>[c(_,null,{default:r((()=>[c(b,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(f,null,{default:r((()=>[c(m,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(v,{tabbar:"",top:""},{default:r((()=>[c(g,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(g,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[x(u(e.$t("text")),1)])),_:1},8,["tab-link"])])),_:1}),c(C,null,{default:r((()=>[c($,{id:`tab-1-${d.tabid}`,"tab-active":""},{default:r((()=>[c(y,null,{default:r((()=>[c(k,{label:e.$t("name"),class:"required",type:"text",maxlength:"64",value:s.name,"onUpdate:value":t[2]||(t[2]=e=>s.name=e)},null,8,["label","value"])])),_:1}),c(m,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1},8,["id"]),c($,{id:`tab-2-${d.tabid}`},{default:r((()=>[c(w,{value:s.text,onChange:d.changeText},null,8,["value","onChange"])])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const po={name:"domains-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[]}),mounted(){this.getItems(),xe("domains:update",(()=>{this.getItems()}))},unmounted(){_e("domains:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/domains",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},addItem(){a.views.current.router.navigate("/domain/new/")},async editItem(e){const t=await s.get(`/v1/user/domain/${e}`);a.views.current.router.navigate(`/domain/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/domain/${e}`),this.getItems()}))}}};po.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("domains"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.domainid,title:e.domain,onClick:t=>d.clickItem(e.domainid),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:t=>d.editItem(e.domainid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.domainid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick"])))),128))])),_:1},8,["id"]),[[b,s.items.length]]),c(_,{onClick:t[0]||(t[0]=e=>d.addItem()),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const ho={name:"domain-popup",components:{SaveButton:et},props:{value:Object,f7router:Object},data(){const e=t.defaults(t.get(this.value,"content",{}),{type:"no",url:"",title:""});return{domainid:t.get(this.value,"domainid",""),domain:t.get(this.value,"domain",""),content:e}},computed:{title(){return this.value?this.$t("editing"):this.$t("adding")}},methods:{async save(){const e=t.trim(this.domain),a=this.content;if(t.isEmpty(e))return he(this.$t("domain-empty"));const i={};if(i.domain=e,"no"!==a.type){if(!ue(a.url))return he(this.$t("link-empty"));if("iframe"===a.type&&t.isEmpty(a.title))return he(this.$t("title-empty"));i.content=a}this.domainid?(i.domainid=this.domainid,await s.patch("/v1/user/domain",i)):await s.post("/v1/user/domain",i),Ie("domains:update"),this.f7router.back()}}},mo=["textContent"],fo=["textContent"],bo=["textContent"];ho.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("f7-list-input"),$=l("f7-list-item"),w=l("f7-list"),C=l("f7-page");return n(),o(C,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back")},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[0]||(t[0]=e=>p.save())})])),_:1})])),_:1}),c(w,null,{default:r((()=>[c(y,{label:e.$t("domain"),class:"required",type:"text",maxlength:"64",value:s.domain,"onUpdate:value":t[1]||(t[1]=e=>s.domain=e)},null,8,["label","value"]),c($,{"smart-select":"",title:e.$t("content"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"authorization","onUpdate:modelValue":t[2]||(t[2]=e=>s.content.type=e)},[m("option",{value:"no",textContent:u(e.$t("no"))},null,8,mo),m("option",{value:"redirect",textContent:u(e.$t("redirect"))},null,8,fo),m("option",{value:"iframe",textContent:u(e.$t("iframe"))},null,8,bo)],512),[[P,s.content.type]])])),_:1},8,["title"]),"iframe"===s.content.type?(n(),o(y,{key:0,class:"required",label:e.$t("title"),type:"text",maxlength:"60",value:s.content.title,"onUpdate:value":t[3]||(t[3]=e=>s.content.title=e)},null,8,["label","value"])):d("",!0),"no"!==s.content.type?(n(),o(y,{key:1,class:"required",label:e.$t("link"),type:"url",maxlength:"512",value:s.content.url,"onUpdate:value":t[4]||(t[4]=e=>s.content.url=e)},null,8,["label","value"])):d("",!0)])),_:1}),c(g,{onClick:t[5]||(t[5]=e=>p.save())})])),_:1})};const go={name:"payment-methods-page",mixins:[Qe],data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("update:payment:methods",(()=>{this.getItems()}))},destroyed(){_e("update:payment:methods")},methods:{pullToRefresh(e,t){this.getItems(t)},header(e){let t=this.$t(e.type);return e.test&&(t+=` (${this.$t("test").toLowerCase()})`),t},async getItems(e){this.sortable=!1;const a=await s.get("/v1/user/payment-methods");t.isFunction(e)&&e(),this.items=a.data,this.$forceUpdate()},selectItem(e){this.canClick&&this.editItem(e.id)},async editItem(e){const t=await s.get(`/v1/user/payment-method/${e}`);a.views.current.router.navigate(`/payment-method/${e}/`,{props:{value:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/payment-method/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.id)})),await s.put("/v1/user/payment-methods",{ids:a})}}};go.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-icon"),m=l("f7-link"),g=l("f7-nav-right"),v=l("f7-searchbar"),k=l("f7-navbar"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-list-item"),S=l("f7-list"),U=l("f7-fab"),P=l("f7-page");return n(),o(P,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(k,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("payment-methods")},null,8,["title"]),c(g,null,{default:r((()=>[c(m,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(h,{icon:"fas fa-sort"})])),_:1}),c(m,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(h,{ios:"f7:search",md:"material:search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(v,{"search-container":`.search-list-${s.searchbarid}`,"search-in":".item-title,.item-footer",placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),class:I(`searchbar-${s.searchbarid}`),expandable:"","onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["search-container","placeholder","disable-button-text","class"])])),_:1}),f(c(S,{"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems,class:I(`search-list-${s.searchbarid} searchbar-found`)},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(_,{link:"",key:t.id,header:d.header(t),title:t.name,badge:e.$t("placement-"+t.placement),onClick:e=>d.selectItem(t),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(t.id)},{default:r((()=>[c(h,{ios:"f7:square_pencil",md:"material:edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(t.id)},{default:r((()=>[c(h,{ios:"f7:trash",md:"material:delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["header","title","badge","onClick"])))),128))])),_:1},8,["sortable-enabled","onSortable:sort","class"]),[[b,s.items.length]]),c(U,{onClick:t[2]||(t[2]=e=>d.editItem("new"))},{default:r((()=>[c(h,{ios:"f7:plus",md:"material:add",tooltip:e.$t("add")},null,8,["tooltip"])])),_:1})])),_:1},8,["onPtr:refresh"])};const vo={name:"shop-payment-method-popup",components:{SaveButton:et,PlaceSelector:_i,PlacementSelector:hl},props:{value:Object,f7router:Object},data(){const e=t.get(this.value,"places",[]),a=t.defaults(t.get(this.value,"method",{}),{type:"cash",placement:"everywhere",active:!0,test:!0,places:[]}),i=t.get(a,"type","cash"),s=this.getCurrencies(i);if(this.isOnline(i))switch(i){case"sberbank":case"alfabank":a.param1=t.get(a,"params.userName",""),a.param2=t.get(a,"params.password",""),a.param3=t.get(a,"params.merchCode","");break;case"tinkoff":a.param1=t.get(a,"params.key",""),a.param2=t.get(a,"params.password","");break;case"cloudpayments":a.param1=t.get(a,"params.id",""),a.param2=t.get(a,"params.key","");break;case"stripe":a.param1=t.get(a,"params.pk",""),a.param2=t.get(a,"params.sk","");break;case"google":a.param1=t.get(a,"params.gatewayName",""),a.param2=t.get(a,"params.gatewayMerchantId",""),a.param3=t.get(a,"params.merchantId","");break;case"apple":a.param1=t.get(a,"params.merchantIdentifier",""),a.param2=t.get(a,"params.gatewayMerchantId","")}return a.currency=t.get(a,"params.currency",s[0]),{places:e,currencies:s,method:a}},computed:{virtualListHeight:()=>"md"===a.theme?48:44,showParams(){return this.isOnline(this.method.type)},paramOneTitle(){let e="";switch(this.method.type){case"sberbank":case"alfabank":e="User Name";break;case"tinkoff":e="Terminal Key";break;case"cloudpayments":e="Public Id";break;case"stripe":e="Public Key";break;case"google":e="Gateway Name";break;case"apple":e="Merchant Identifier"}return e},paramTwoTitle(){let e="";switch(this.method.type){case"sberbank":case"alfabank":e="Password";break;case"tinkoff":e="Terminal Password";break;case"cloudpayments":e="Key";break;case"stripe":e="Secure Key";break;case"google":case"apple":e="Gateway Merchant Id"}return e},paramThreeTitle(){let e="";switch(this.method.type){case"google":e="Merchant Id"}return e}},watch:{type(){this.method.param1="",this.method.param2="",this.method.param3="",this.setCurrencies()}},methods:{isOnline:e=>!1===t.includes(["cash","terminal","balance","bonuses"],e),getCurrencies(e){let t=[];switch(e){case"sberbank":case"alfabank":case"tinkoff":case"cloudpayments":t=["RUB","USD","EUR"];break;case"stripe":t=["USD","AUD","BRL","CAD","CHF","DKK","EUR","GBP","HKD","JPY","MXN","NOK","NZD","SEK","SGD"];break;case"google":case"apple":t=["RUB","USD","AUD","BRL","CAD","CHF","DKK","EUR","GBP","HKD","JPY","MXN","NOK","NZD","SEK","SGD"]}return t},setCurrencies(){this.currencies=this.getCurrencies(this.method.type),1===t.size(this.currencies)&&(this.method.currency=this.currencies[0])},async save(){const e={type:this.method.type};e.active=this.method.active,e.places=this.method.places;let a=t.trim(this.method.name);if(!a)switch(this.method.type){case"cash":a=this.$t("payment-cash");break;case"terminal":a=this.$t("payment-terminal");break;case"balance":a=this.$t("balance");break;case"bonuses":a=this.$t("bonuses");break;default:a=this.$t("payment-online")}if(e.name=a,e.test=this.method.test,e.placement=this.method.placement,this.isOnline(this.method.type)){let a=0;if(this.method.param1||a++,this.paramTwoTitle&&!this.method.param2&&a++,this.paramThreeTitle&&!this.method.param3&&a++,a>0)return he(this.$t("fill-required-fields"));if(t.size(this.currencies)>0&&!this.method.currency)return he(this.$t("currency-empty"));switch(t.set(e,"params.currency",this.method.currency),this.method.type){case"sberbank":t.set(e,"params.userName",this.method.param1),t.set(e,"params.password",this.method.param2);break;case"alfabank":t.set(e,"params.userName",this.method.param1),t.set(e,"params.password",this.method.param2),this.method.param3&&t.set(e,"params.merchCode",this.method.param3);break;case"tinkoff":t.set(e,"params.key",this.method.param1),t.set(e,"params.password",this.method.param2);break;case"cloudpayments":t.set(e,"params.id",this.method.param1),t.set(e,"params.key",this.method.param2);break;case"stripe":t.set(e,"params.pk",this.method.param1),t.set(e,"params.sk",this.method.param2);break;case"google":t.set(e,"params.gatewayName",this.method.param1),t.set(e,"params.gatewayMerchantId",this.method.param2),t.set(e,"params.merchantId",this.method.param3);break;case"apple":t.set(e,"params.merchantIdentifier",this.method.param1),t.set(e,"params.gatewayMerchantId",this.method.param2)}}this.method.id?(e.id=this.method.id,await s.patch("/v1/user/payment-method",e)):await s.post("/v1/user/payment-method",e),Ie("update:payment:methods"),this.f7router.back()}}},ko=["textContent"],yo=["textContent"],$o=["textContent"],wo=["textContent"],Co=["textContent"],xo=["textContent"],_o=["textContent"],Io=["textContent"],So=["textContent"],Uo=["textContent"],Po=["textContent"],Do=["value","textContent"];vo.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("f7-list-item"),x=l("f7-list-input"),_=l("placement-selector"),I=l("place-selector"),S=l("f7-list"),U=l("f7-page");return n(),o(U,null,{default:r((()=>[c(k,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("payment-methods")},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(S,null,{default:r((()=>[c(y,{"smart-select":"",title:e.$t("payment-method"),"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[1]||(t[1]=e=>s.method.type=e)},[m("option",{value:"cash",textContent:u(e.$t("cash"))},null,8,ko),m("option",{value:"terminal",textContent:u(e.$t("terminal"))},null,8,yo),m("option",{value:"balance",textContent:u(e.$t("balance"))},null,8,$o),m("option",{value:"bonuses",textContent:u(e.$t("bonuses"))},null,8,wo),m("option",{value:"sberbank",textContent:u(e.$t("sberbank"))},null,8,Co),m("option",{value:"alfabank",textContent:u(e.$t("alfabank"))},null,8,xo),m("option",{value:"tinkoff",textContent:u(e.$t("tinkoff"))},null,8,_o),m("option",{value:"cloudpayments",textContent:u(e.$t("cloudpayments"))},null,8,Io),m("option",{value:"stripe",textContent:u(e.$t("stripe"))},null,8,So),m("option",{value:"google",textContent:u(e.$t("google"))},null,8,Uo),m("option",{value:"apple",textContent:u(e.$t("apple"))},null,8,Po)],512),[[P,s.method.type]])])),_:1},8,["title"]),c(x,{label:e.$t("name"),type:"text",maxlength:"32",value:s.method.name,"onUpdate:value":t[2]||(t[2]=e=>s.method.name=e)},null,8,["label","value"]),f(c(x,{label:d.paramOneTitle,class:"required",type:"text",value:s.method.param1,"onUpdate:value":t[3]||(t[3]=e=>s.method.param1=e)},null,8,["label","value"]),[[b,d.showParams&&d.paramOneTitle]]),f(c(x,{label:d.paramTwoTitle,class:"required",type:"text",value:s.method.param2,"onUpdate:value":t[4]||(t[4]=e=>s.method.param2=e)},null,8,["label","value"]),[[b,d.showParams&&d.paramTwoTitle]]),f(c(x,{label:d.paramThreeTitle,type:"text",value:s.method.param3,"onUpdate:value":t[5]||(t[5]=e=>s.method.param3=e)},null,8,["label","value"]),[[b,d.showParams&&d.paramThreeTitle]]),f(c(y,{"smart-select":"",title:e.$t("currency"),"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"currency","onUpdate:modelValue":t[6]||(t[6]=e=>s.method.currency=e)},[(n(!0),$(C,null,w(s.currencies,(e=>(n(),$("option",{value:e,textContent:u(e)},null,8,Do)))),256))],512),[[P,s.method.currency]])])),_:1},8,["title"]),[[b,d.showParams]]),c(y,{checkbox:"",title:e.$t("test"),checked:s.method.test,"onUpdate:checked":t[7]||(t[7]=e=>s.method.test=e)},null,8,["title","checked"]),c(_,{value:s.method.placement,"onUpdate:value":t[8]||(t[8]=e=>s.method.placement=e)},null,8,["value"]),c(I,{places:s.places,value:s.method.places,"onUpdate:value":t[9]||(t[9]=e=>s.method.places=e),multiple:""},null,8,["places","value"]),c(y,{checkbox:"",title:e.$t("displayed"),checked:s.method.active,"onUpdate:checked":t[10]||(t[10]=e=>s.method.active=e)},null,8,["title","checked"])])),_:1}),c(g,{onClick:t[11]||(t[11]=e=>d.save())})])),_:1})};const To={name:"form-popup",components:{SaveButton:et},mixins:[bt,Qe],props:{type:{type:String,required:!0,validator:e=>-1!==["user-profile"].indexOf(e)},value:Array},data(){return{sortable:!1,items:t.cloneDeep(this.value)}},mounted(){xe("add:form:item",(e=>{this.items.push(e),this.$forceUpdate()})),xe("edit:form:item",(e=>{this.items[e.index]=e.item}))},unmounted(){_e("add:form:item"),_e("edit:form:item")},methods:{getFooter(e){return"separator"===e.type?"":`${this.$t("required")}: ${e.required?t.toLower(this.$t("yes")):t.toLower(this.$t("no"))}`},fieldTitle(e){if(e.title||e.description||e.placeholder)return e.title||e.description||e.placeholder;if(t.size(e.options)){let a=[];return t.each(e.options,(e=>{a.push(e.text)})),t.join(a,", ")}return this.$t("field")},selectItem(e){this.canClick&&this.editItem(e)},addItem(){a.views.current.router.navigate("/form-item/")},editItem(e){const i=t.cloneDeep(this.items[e]);"separator"===i.type?a.dialog.prompt(this.$t("title-empty"),this.$t("title"),(a=>{const i=t.trim(a);i&&(this.items[e].title=i)}),null,i.title):a.views.current.router.navigate("/form-item/",{props:{index:e,item:i}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.items.splice(e,1)}))},addSeparator(){a.dialog.prompt(this.$t("title-empty"),this.$t("title"),(e=>{const a=t.trim(e);a&&(this.items.push({type:"separator",title:a}),this.$forceUpdate())}))},sort(e){this.items.move(e.from,e.to)},async save(){if(t.size(this.items)){const e={};e.type=this.type,e.items=t.cloneDeep(this.items),await s.patch("/v1/user/form",e)}else await s.delete(`/v1/user/form/${this.type}`);this.close()}}};To.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("f7-icon"),f=l("f7-link"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-block-title"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-list-item"),I=l("f7-list"),S=l("f7-popover"),U=l("f7-page"),P=l("f7-view"),D=l("f7-popup");return n(),o(D,{"close-by-backdrop-click":!0},{default:r((()=>[c(P,{"stack-pages":!0},{default:r((()=>[c(U,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:e.$t(this.type)},null,8,["title"]),c(g,null,{default:r((()=>[c(f,{"icon-only":"",onClick:t[1]||(t[1]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(m,{icon:"fas fa-sort"})])),_:1}),c(b,{mini:"",onClick:t[2]||(t[2]=e=>d.save())})])),_:1})])),_:1}),c(k,{textContent:u(e.$t("fields"))},null,8,["textContent"]),c(I,{sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sort},{default:r((()=>[(n(!0),$(C,null,w(s.items,((t,a)=>(n(),o(_,{link:"",key:t.name,title:d.fieldTitle(t),after:e.$t(t.type),subtitle:d.getFooter(t),onClick:e=>d.selectItem(a),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:e=>d.editItem(a)},{default:r((()=>[c(m,{ios:"f7:square_pencil",md:"material:edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:e=>d.removeItem(a)},{default:r((()=>[c(m,{ios:"f7:trash",md:"material:delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","after","subtitle","onClick"])))),128)),c(_,{link:"",title:e.$t("add"),"popover-open":".add-popover",sortable:!1},null,8,["title"]),c(S,{class:"add-popover"},{default:r((()=>[c(I,null,{default:r((()=>[c(_,{link:"","popover-close":"",title:e.$t("field"),onClick:t[3]||(t[3]=e=>d.addItem())},null,8,["title"]),c(_,{link:"","popover-close":"",title:e.$t("separator"),onClick:t[4]||(t[4]=e=>d.addSeparator())},null,8,["title"])])),_:1})])),_:1})])),_:1},8,["sortable-enabled","onSortable:sort"]),c(b,{onClick:t[5]||(t[5]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const qo={name:"form-item-page",components:{SaveButton:et},mixins:[Qe],props:{index:Number,item:Object},data(){return{sortable:!1,types:["yesno","text","textarea","number","email","password","url","tel","color","date","time","checkbox","radio"],type:t.get(this.item,"type","text"),title:t.get(this.item,"title",""),info:t.get(this.item,"info",""),placeholder:t.get(this.item,"placeholder",""),min:t.get(this.item,"min",""),max:t.get(this.item,"max",""),step:t.get(this.item,"step",""),required:t.get(this.item,"required",!0),rows:t.get(this.item,"rows",2),multiple:t.get(this.item,"multiple",!1),items:t.get(this.item,"options",[])}},computed:{isTextarea(){return t.includes(["textarea"],this.type)},isNumber(){return t.includes(["number"],this.type)},showPlaceholder(){return t.includes(["text","number","email","password","url","tel","textarea","file","color","date","time"],this.type)},showMultiple(){return t.includes(["file"],this.type)},showItems(){return t.includes(["checkbox","radio","select"],this.type)}},mounted(){xe("add:form:option",(e=>{this.items.push(e),this.$forceUpdate()})),xe("edit:form:option",(e=>{this.items[e.index]=e.item}))},unmounted(){_e("add:form:option"),_e("edit:form:option")},methods:{selectItem(e,t){this.canClick&&this.editItem(t)},addItem(){a.views.current.router.navigate("/form-option/")},editItem(e){a.views.current.router.navigate("/form-option/",{props:{index:e,item:t.cloneDeep(this.items[e])}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.items.splice(e,1)}))},sort(e){this.items.move(e.from,e.to)},save(){const e={type:this.type,title:t.trim(this.title),info:t.trim(this.info),required:this.required};if(this.showPlaceholder&&(e.placeholder=t.trim(this.placeholder)),t.isEmpty(e.title)&&t.isEmpty(e.placeholder)&&(e.title=this.$t("field")),this.isNumber){const a=t.parseInt(this.min);t.isNaN(a)||(e.min=a);const i=t.parseInt(this.max);t.isNaN(i)||(e.max=i);const s=t.parseInt(this.step);t.isNaN(s)||(e.step=s)}this.showMultiple&&(e.multiple=this.multiple),this.isTextarea&&(e.rows=this.rows),this.showItems&&(e.options=t.cloneDeep(this.items)),e.name=t.get(this.item,"name",`item-${ks()}`),t.isUndefined(this.index)?Ie("add:form:item",e):Ie("edit:form:item",{index:this.index,item:e}),a.views.current.router.back()}}},Lo=["value","textContent"],Oo=["value","textContent"];qo.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),g=l("f7-icon"),v=l("f7-link"),k=l("save-button"),y=l("f7-nav-right"),x=l("f7-navbar"),_=l("f7-block-title"),I=l("f7-list-item"),S=l("f7-list-input"),U=l("f7-swipeout-button"),D=l("f7-swipeout-actions"),T=l("f7-list"),q=l("f7-page");return n(),o(q,null,{default:r((()=>[c(x,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("editing")},null,8,["title"]),c(y,null,{default:r((()=>[c(v,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(g,{icon:"fas fa-sort"})])),_:1}),c(k,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(_,{textContent:u(e.$t("settings"))},null,8,["textContent"]),c(T,null,{default:r((()=>[c(I,{"smart-select":"",title:e.$t("type"),disabled:void 0!==a.index,"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[2]||(t[2]=e=>s.type=e)},[(n(!0),$(C,null,w(s.types,(t=>(n(),$("option",{value:t,textContent:u(e.$t(t))},null,8,Lo)))),256))],512),[[P,s.type]])])),_:1},8,["title","disabled"]),c(S,{label:e.$t("title"),type:"text",maxlength:"256",value:s.title,"onUpdate:value":t[3]||(t[3]=e=>s.title=e),class:"required"},null,8,["label","value"]),c(S,{label:e.$t("info"),type:"text",maxlength:"256",value:s.info,"onUpdate:value":t[4]||(t[4]=e=>s.info=e)},null,8,["label","value"]),f(c(S,{label:e.$t("placeholder"),type:"text",maxlength:"256",value:s.placeholder,"onUpdate:value":t[5]||(t[5]=e=>s.placeholder=e)},null,8,["label","value"]),[[b,d.showPlaceholder]]),f(c(S,{label:e.$t("min"),type:"number",value:s.min,"onUpdate:value":t[6]||(t[6]=e=>s.min=e)},null,8,["label","value"]),[[b,d.isNumber]]),f(c(S,{label:e.$t("max"),type:"number",value:s.max,"onUpdate:value":t[7]||(t[7]=e=>s.max=e)},null,8,["label","value"]),[[b,d.isNumber]]),f(c(S,{label:e.$t("step"),type:"number",value:s.step,"onUpdate:value":t[8]||(t[8]=e=>s.step=e)},null,8,["label","value"]),[[b,d.isNumber]]),f(c(I,{checkbox:"",title:e.$t("multiple"),checked:s.multiple,"onUpdate:checked":t[9]||(t[9]=e=>s.multiple=e)},null,8,["title","checked"]),[[b,d.showMultiple]]),c(I,{checkbox:"",title:e.$t("required"),checked:s.required,"onUpdate:checked":t[10]||(t[10]=e=>s.required=e)},null,8,["title","checked"]),f(c(I,{"smart-select":"",title:e.$t("rows"),"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"rows","onUpdate:modelValue":t[11]||(t[11]=e=>s.rows=e)},[(n(),$(C,null,w([2,3,4,5,6,7,8,9,10],(e=>m("option",{value:e,textContent:u(e)},null,8,Oo))),64))],512),[[P,s.rows]])])),_:1},8,["title"]),[[b,d.isTextarea]]),f(c(_,{textContent:u(e.$t("items"))},null,8,["textContent"]),[[b,d.showItems]]),f(c(T,{sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sort},{default:r((()=>[(n(!0),$(C,null,w(s.items,((e,t)=>(n(),o(I,{link:"",key:t,title:e.title,onClick:e=>d.selectItem(e,t),swipeout:""},{default:r((()=>[c(D,{right:""},{default:r((()=>[c(U,{close:"",color:"blue",onClick:e=>d.editItem(t)},{default:r((()=>[c(g,{ios:"f7:square_pencil",md:"material:edit"})])),_:2},1032,["onClick"]),c(U,{close:"",color:"red",onClick:e=>d.removeItem(t)},{default:r((()=>[c(g,{ios:"f7:trash",md:"material:delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick"])))),128)),c(I,{link:"",title:e.$t("add"),onClick:t[12]||(t[12]=e=>d.addItem()),sortable:!1},null,8,["title"])])),_:1},8,["sortable-enabled","onSortable:sort"]),[[b,d.showItems]])])),_:1}),c(k,{onClick:t[13]||(t[13]=e=>d.save())})])),_:1})};const zo={name:"form-option-page",components:{SaveButton:et},props:{index:Number,item:Object},data(){return{title:t.get(this.item,"title",""),disabled:t.get(this.item,"disabled",!1)}},methods:{save(){const e={title:this.title,disabled:this.disabled};e.name=t.get(this.item,"name",`item-${ks()}`),t.isUndefined(this.index)?Ie("add:form:option",e):Ie("edit:form:option",{index:this.index,item:e}),a.views.current.router.back()}}};zo.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("save-button"),f=l("f7-nav-right"),b=l("f7-navbar"),g=l("f7-block-title"),v=l("f7-list-input"),k=l("f7-list-item"),y=l("f7-list"),$=l("f7-page");return n(),o($,null,{default:r((()=>[c(b,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("editing")},null,8,["title"]),c(f,null,{default:r((()=>[c(m,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(g,{textContent:u(e.$t("settings"))},null,8,["textContent"]),c(y,null,{default:r((()=>[c(v,{label:e.$t("title"),type:"text",maxlength:"64",value:s.title,"onUpdate:value":t[1]||(t[1]=e=>s.title=e),class:"required"},null,8,["label","value"]),c(k,{checkbox:"",title:e.$t("disabled"),checked:s.disabled,"onUpdate:checked":t[2]||(t[2]=e=>s.disabled=e)},null,8,["title","checked"])])),_:1}),c(m,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})};const jo={name:"checklists-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],sortable:!1}),mounted(){this.getItems(),xe("checklists:update",(()=>{this.getItems()}))},unmounted(){_e("checklists:update")},methods:{searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},async getItems(e){this.sortable=!1;const a={};"string"==typeof e&&e&&(a.search=e);const i=await s.get("/v1/user/checklists",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/checklist/${e}`);this.f7router.navigate(`/checklist/${e}/`,{props:{checklist:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/checklist/${e}`),this.getItems()}))},async sortItems(e){this.sortable=!1,this.items.move(e.from,e.to);const a=[];t.each(this.items,(e=>{a.push(e.checklistid)})),await s.put("/v1/user/checklists",{ids:a})}}};jo.render=function(e,t,a,i,s,d){const u=l("f7-icon"),p=l("f7-link"),h=l("f7-nav-right"),m=l("f7-searchbar"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list"),y=l("f7-swipeout-button"),x=l("f7-swipeout-actions"),_=l("f7-fab"),S=l("f7-page");return n(),o(S,{ptr:"","ptr-preloader":!1,"onPtr:refresh":d.pullToRefresh},{default:r((()=>[c(g,{title:e.$t("checklists"),"back-link":e.$t("back")},{default:r((()=>[c(h,null,{default:r((()=>[c(p,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(u,{icon:"fas fa-sort"})])),_:1}),c(p,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(u,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(m,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1,"onSearchbar:enable":t[1]||(t[1]=e=>s.sortable=!1)},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(k,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(v,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(k,{id:`list-${s.searchbarid}`,"media-list":"",sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sortItems},{default:r((()=>[(n(!0),$(C,null,w(s.items,(e=>(n(),o(v,{link:"",key:e.checklistid,title:e.name,subtitle:e.description,onClick:t=>d.clickItem(e.checklistid),swipeout:""},{default:r((()=>[c(x,{right:""},{default:r((()=>[c(y,{close:"",color:"blue",onClick:t=>d.editItem(e.checklistid)},{default:r((()=>[c(u,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(y,{close:"",color:"red",onClick:t=>d.removeItem(e.checklistid)},{default:r((()=>[c(u,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","subtitle","onClick"])))),128))])),_:1},8,["id","sortable-enabled","onSortable:sort"]),[[b,s.items.length]]),c(_,{onClick:t[2]||(t[2]=e=>d.editItem("new")),text:e.$t("add")},{default:r((()=>[c(u,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const Ao={name:"checklist-popup",components:{SaveButton:et},mixins:[bt,Qe],props:{checklist:Object},data(){return{sortable:!1,name:t.get(this.checklist,"name",""),description:t.get(this.checklist,"description",""),minWeight:t.get(this.checklist,"minWeight",0),items:t.get(this.checklist,"items",[])}},computed:{title(){return this.checklist.checklistid?this.$t("editing"):this.$t("adding")}},mounted(){xe("add:checklist:item",(e=>{this.items.push(e),this.$forceUpdate()})),xe("edit:checklist:item",(e=>{this.items[e.index]=e.item}))},unmounted(){_e("add:checklist:item"),_e("edit:checklist:item")},methods:{getFooter(e){if("separator"===e.type)return"";const a=[];return a.push(`${this.$t("required")}: ${e.required?t.toLower(this.$t("yes")):t.toLower(this.$t("no"))}`),a.push(`${this.$t("attach-photo")}: ${e.attachPhoto?t.toLower(this.$t("yes")):t.toLower(this.$t("no"))}`),t.join(a," | ")},fieldTitle(e){if(e.title||e.description||e.placeholder)return e.title||e.description||e.placeholder;if(t.size(e.options)){let a=[];return t.each(e.options,(e=>{a.push(e.text)})),t.join(a,", ")}return this.$t("field")},selectItem(e){this.canClick&&this.editItem(e)},addItem(){a.views.current.router.navigate("/checklist-item/")},editItem(e){const i=t.cloneDeep(this.items[e]);"separator"===i.type?a.dialog.prompt(this.$t("title-empty"),this.$t("title"),(a=>{const i=t.trim(a);i&&(this.items[e].title=i)}),null,i.title):a.views.current.router.navigate("/checklist-item/",{props:{index:e,item:i}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.items.splice(e,1)}))},addSeparator(){a.dialog.prompt(this.$t("title-empty"),this.$t("title"),(e=>{const a=t.trim(e);a&&(this.items.push({type:"separator",title:a}),this.$forceUpdate())}))},sort(e){this.items.move(e.from,e.to)},async save(){const e=t.trim(this.name);if(t.isEmpty(e))return he(this.$t("title-empty"));if(t.isEmpty(this.items))return he(this.$t("items-empty"));const a={};a.name=e,a.description=t.trim(this.description),a.minWeight=t.parseInt(this.minWeight),a.items=t.cloneDeep(this.items),this.checklist.checklistid?(a.checklistid=this.checklist.checklistid,await s.patch("/v1/user/checklist",a)):await s.post("/v1/user/checklist",a),Ie("checklists:update"),this.close()}}};Ao.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("f7-icon"),f=l("f7-link"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-block-title"),y=l("f7-list-input"),x=l("f7-list"),_=l("f7-swipeout-button"),I=l("f7-swipeout-actions"),S=l("f7-list-item"),U=l("f7-popover"),P=l("f7-page"),D=l("f7-view"),T=l("f7-popup");return n(),o(T,{"close-by-backdrop-click":!0},{default:r((()=>[c(D,{"stack-pages":!0},{default:r((()=>[c(P,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:d.title},null,8,["title"]),c(g,null,{default:r((()=>[c(f,{"icon-only":"",onClick:t[1]||(t[1]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(m,{icon:"fas fa-sort"})])),_:1}),c(b,{mini:"",onClick:t[2]||(t[2]=e=>d.save())})])),_:1})])),_:1}),c(k,{medium:"",textContent:u(e.$t("basic"))},null,8,["textContent"]),c(x,null,{default:r((()=>[c(y,{label:e.$t("title"),class:"required",type:"text",maxlength:"32",value:s.name,"onUpdate:value":t[3]||(t[3]=e=>s.name=e)},null,8,["label","value"]),c(y,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"512",value:s.description,"onUpdate:value":t[4]||(t[4]=e=>s.description=e)},null,8,["label","value"]),c(y,{label:e.$t("min-weight"),type:"number",min:"0",step:"1",resizable:"",value:s.minWeight,"onUpdate:value":t[5]||(t[5]=e=>s.minWeight=e)},null,8,["label","value"])])),_:1}),c(k,{textContent:u(e.$t("fields"))},null,8,["textContent"]),c(x,{sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sort},{default:r((()=>[(n(!0),$(C,null,w(s.items,((t,a)=>(n(),o(S,{link:"",key:t.name,title:d.fieldTitle(t),after:e.$t(t.type),subtitle:d.getFooter(t),onClick:e=>d.selectItem(a),swipeout:""},{default:r((()=>[c(I,{right:""},{default:r((()=>[c(_,{close:"",color:"blue",onClick:e=>d.editItem(a)},{default:r((()=>[c(m,{ios:"f7:square_pencil",md:"material:edit"})])),_:2},1032,["onClick"]),c(_,{close:"",color:"red",onClick:e=>d.removeItem(a)},{default:r((()=>[c(m,{ios:"f7:trash",md:"material:delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","after","subtitle","onClick"])))),128)),c(S,{link:"",title:e.$t("add"),"popover-open":".add-popover",sortable:!1},null,8,["title"]),c(U,{class:"add-popover"},{default:r((()=>[c(x,null,{default:r((()=>[c(S,{link:"","popover-close":"",title:e.$t("field"),onClick:t[6]||(t[6]=e=>d.addItem())},null,8,["title"]),c(S,{link:"","popover-close":"",title:e.$t("separator"),onClick:t[7]||(t[7]=e=>d.addSeparator())},null,8,["title"])])),_:1})])),_:1})])),_:1},8,["sortable-enabled","onSortable:sort"]),c(b,{onClick:t[8]||(t[8]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const Bo={name:"checklist-item-page",components:{SaveButton:et},mixins:[Qe],props:{index:Number,item:Object},data(){return{sortable:!1,types:["yesno","text","number","checkbox","radio"],type:t.get(this.item,"type","yesno"),title:t.get(this.item,"title",""),info:t.get(this.item,"info",""),placeholder:t.get(this.item,"placeholder",""),min:t.get(this.item,"min",0),max:t.get(this.item,"max",100),step:t.get(this.item,"step",1),required:t.get(this.item,"required",!0),weight:t.get(this.item,"weight",1),attachPhoto:t.get(this.item,"attachPhoto",!1),items:t.get(this.item,"options",[])}},computed:{isNumber(){return t.includes(["number"],this.type)},showPlaceholder(){return t.includes(["text","number"],this.type)},showItems(){return t.includes(["checkbox","radio"],this.type)}},mounted(){xe("add:checklist:option",(e=>{this.items.push(e),this.$forceUpdate()})),xe("edit:checklist:option",(e=>{this.items[e.index]=e.item}))},unmounted(){_e("add:checklist:option"),_e("edit:checklist:option")},methods:{selectItem(e,t){this.canClick&&this.editItem(t)},addItem(){a.views.current.router.navigate("/checklist-option/")},editItem(e){a.views.current.router.navigate("/checklist-option/",{props:{index:e,item:t.cloneDeep(this.items[e])}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.items.splice(e,1)}))},sort(e){this.items.move(e.from,e.to)},save(){const e={type:this.type,title:t.trim(this.title),info:t.trim(this.info),required:this.required,attachPhoto:this.attachPhoto,weight:this.weight};if(this.showItems||(e.weight=this.weight),this.showPlaceholder&&(e.placeholder=t.trim(this.placeholder)),t.isEmpty(e.title)&&t.isEmpty(e.placeholder)&&(e.title=this.$t("field")),this.isNumber){const a=t.parseInt(this.min);t.isNaN(a)||(e.min=a);const i=t.parseInt(this.max);t.isNaN(i)||(e.max=i);const s=t.parseInt(this.step);t.isNaN(s)||(e.step=s)}if(this.showItems){if(t.isEmpty(this.items))return he(this.$t("items-empty"));e.options=t.cloneDeep(this.items)}e.name=t.get(this.item,"name",`item-${ks()}`),t.isUndefined(this.index)?Ie("add:checklist:item",e):Ie("edit:checklist:item",{index:this.index,item:e}),a.views.current.router.back()}}},Eo=["value","textContent"];Bo.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),g=l("f7-icon"),v=l("f7-link"),k=l("save-button"),y=l("f7-nav-right"),x=l("f7-navbar"),_=l("f7-block-title"),I=l("f7-list-item"),S=l("f7-list-input"),U=l("f7-swipeout-button"),D=l("f7-swipeout-actions"),T=l("f7-list"),q=l("f7-page");return n(),o(q,null,{default:r((()=>[c(x,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("editing")},null,8,["title"]),c(y,null,{default:r((()=>[c(v,{"icon-only":"",onClick:t[0]||(t[0]=e=>s.sortable=!s.sortable)},{default:r((()=>[c(g,{icon:"fas fa-sort"})])),_:1}),c(k,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(_,{textContent:u(e.$t("settings"))},null,8,["textContent"]),c(T,null,{default:r((()=>[c(I,{"smart-select":"",title:e.$t("type"),disabled:void 0!==a.index,"smart-select-params":{closeOnSelect:!0,scrollToSelectedItem:!0}},{default:r((()=>[f(m("select",{name:"type","onUpdate:modelValue":t[2]||(t[2]=e=>s.type=e)},[(n(!0),$(C,null,w(s.types,(t=>(n(),$("option",{value:t,textContent:u(e.$t(t))},null,8,Eo)))),256))],512),[[P,s.type]])])),_:1},8,["title","disabled"]),c(S,{label:e.$t("title"),type:"text",maxlength:"512",value:s.title,"onUpdate:value":t[3]||(t[3]=e=>s.title=e),class:"required"},null,8,["label","value"]),c(S,{label:e.$t("info"),type:"text",maxlength:"512",value:s.info,"onUpdate:value":t[4]||(t[4]=e=>s.info=e)},null,8,["label","value"]),f(c(S,{label:e.$t("placeholder"),type:"text",maxlength:"64",value:s.placeholder,"onUpdate:value":t[5]||(t[5]=e=>s.placeholder=e)},null,8,["label","value"]),[[b,d.showPlaceholder]]),f(c(S,{label:e.$t("min"),type:"number",value:s.min,"onUpdate:value":t[6]||(t[6]=e=>s.min=e)},null,8,["label","value"]),[[b,d.isNumber]]),f(c(S,{label:e.$t("max"),type:"number",value:s.max,"onUpdate:value":t[7]||(t[7]=e=>s.max=e)},null,8,["label","value"]),[[b,d.isNumber]]),f(c(S,{label:e.$t("step"),type:"number",value:s.step,"onUpdate:value":t[8]||(t[8]=e=>s.step=e)},null,8,["label","value"]),[[b,d.isNumber]]),c(I,{checkbox:"",title:e.$t("required"),checked:s.required,"onUpdate:checked":t[9]||(t[9]=e=>s.required=e)},null,8,["title","checked"]),f(c(S,{label:e.$t("weight"),type:"number",min:"1",max:"100",value:s.weight,"onUpdate:value":t[10]||(t[10]=e=>s.weight=e),class:"required"},null,8,["label","value"]),[[b,!d.showItems]]),c(I,{checkbox:"",title:e.$t("attach-photo"),checked:s.attachPhoto,"onUpdate:checked":t[11]||(t[11]=e=>s.attachPhoto=e)},null,8,["title","checked"]),f(c(_,{textContent:u(e.$t("items"))},null,8,["textContent"]),[[b,d.showItems]]),f(c(T,{sortable:"","sortable-enabled":s.sortable,"onSortable:sort":d.sort},{default:r((()=>[(n(!0),$(C,null,w(s.items,((e,t)=>(n(),o(I,{link:"",key:t,title:e.title,onClick:e=>d.selectItem(e,t),swipeout:""},{default:r((()=>[c(D,{right:""},{default:r((()=>[c(U,{close:"",color:"blue",onClick:e=>d.editItem(t)},{default:r((()=>[c(g,{ios:"f7:square_pencil",md:"material:edit"})])),_:2},1032,["onClick"]),c(U,{close:"",color:"red",onClick:e=>d.removeItem(t)},{default:r((()=>[c(g,{ios:"f7:trash",md:"material:delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","onClick"])))),128)),c(I,{link:"",title:e.$t("add"),onClick:t[12]||(t[12]=e=>d.addItem()),sortable:!1},null,8,["title"])])),_:1},8,["sortable-enabled","onSortable:sort"]),[[b,d.showItems]])])),_:1}),c(k,{onClick:t[13]||(t[13]=e=>d.save())})])),_:1})};const Vo={name:"checklist-option-page",components:{SaveButton:et},props:{index:Number,item:Object},data(){return{title:t.get(this.item,"title",""),weight:t.get(this.item,"weight",1),violation:t.get(this.item,"violation",!1)}},methods:{save(){const e={title:this.title,weight:t.parseInt(this.weight),violation:!0===this.violation};e.name=t.get(this.item,"name",`item-${ks()}`),t.isUndefined(this.index)?Ie("add:checklist:option",e):Ie("edit:checklist:option",{index:this.index,item:e}),a.views.current.router.back()}}};Vo.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("save-button"),f=l("f7-nav-right"),b=l("f7-navbar"),g=l("f7-block-title"),v=l("f7-list-input"),k=l("f7-list-item"),y=l("f7-list"),$=l("f7-page");return n(),o($,null,{default:r((()=>[c(b,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("editing")},null,8,["title"]),c(f,null,{default:r((()=>[c(m,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(g,{textContent:u(e.$t("settings"))},null,8,["textContent"]),c(y,null,{default:r((()=>[c(v,{label:e.$t("title"),type:"text",maxlength:"64",value:s.title,"onUpdate:value":t[1]||(t[1]=e=>s.title=e),class:"required"},null,8,["label","value"]),c(v,{label:e.$t("weight"),type:"number",min:"1",max:"100",value:s.weight,"onUpdate:value":t[2]||(t[2]=e=>s.weight=e),class:"required"},null,8,["label","value"]),c(k,{checkbox:"",title:e.$t("violation"),checked:s.violation,"onUpdate:checked":t[3]||(t[3]=e=>s.violation=e)},null,8,["title","checked"])])),_:1}),c(m,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})};const Mo={name:"inspections-page",mixins:[Qe],props:{f7router:Object},data:()=>({searchbarid:ze(),items:[],places:[],placeids:[]}),computed:{showFilter(){const e=fe();return t.includes(["write"],t.get(e,"permits.checklists"))}},mounted(){this.getItems(),xe("inspections:update",(()=>{this.getItems()})),xe("inspections:filter",(e=>{this.placeids=e.placeids,this.getItems()}))},unmounted(){_e("inspections:update"),_e("inspections:filter")},methods:{filter(){this.f7router.navigate("/inspections-filter/",{props:{places:this.places,placeids:this.placeids}})},searchbarSearch:t.debounce((function(e,t,a){this.getItems(t)}),3e3),pullToRefresh(e,t){this.getItems(t)},getHeader(e){return`${y(A(e.created),this.$t("date-format"))} | ${e.place}`},getText(e){const a=[];return e.author&&(e.author.name&&a.push(e.author.name),e.author.phone&&a.push(e.author.phone),e.author.email&&a.push(e.author.email)),t.size(a)?`- ${t.join(a," / ")}`:""},async getItems(e){const a={};"string"==typeof e&&e&&(a.search=e),t.size(this.placeids)&&(a.placeids=this.placeids);const i=await s.get("/v1/user/inspections",{params:a});t.isFunction(e)&&e(),0===t.size(i.data)&&he(this.$t("nothing-found")),this.items=i.data.items,this.places=i.data.places,this.$forceUpdate()},clickItem(e){this.canClick&&this.editItem(e)},async editItem(e){const t=await s.get(`/v1/user/inspection/${e}`);this.f7router.navigate(`/inspection/${e}/`,{props:{inspection:t.data}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/inspection/${e}`),await this.getItems()}))}}};Mo.render=function(e,t,a,i,s,u){const p=l("f7-icon"),h=l("f7-link"),m=l("f7-nav-right"),g=l("f7-searchbar"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list"),x=l("f7-swipeout-button"),_=l("f7-swipeout-actions"),S=l("f7-fab"),U=l("f7-page");return n(),o(U,{ptr:"","ptr-preloader":!1,"onPtr:refresh":u.pullToRefresh},{default:r((()=>[c(v,{title:e.$t("inspections"),"back-link":e.$t("back")},{default:r((()=>[c(m,null,{default:r((()=>[u.showFilter?(n(),o(h,{key:0,"icon-only":"",onClick:t[0]||(t[0]=e=>u.filter())},{default:r((()=>[c(p,{icon:"fas fa-filter"})])),_:1})):d("",!0),c(h,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(p,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"])])),_:1}),c(g,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-title,.item-footer",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1},8,["title","back-link"]),c(y,{id:`not-found-${s.searchbarid}`,class:"searchbar-not-found"},{default:r((()=>[c(k,{title:e.$t("nothing-found")},null,8,["title"])])),_:1},8,["id"]),f(c(y,{id:`list-${s.searchbarid}`,"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.items,(t=>(n(),o(k,{link:"",key:t.inspectionid,header:u.getHeader(t),title:t.checklist,text:u.getText(t),badge:t.violations>0?`${e.$t("violations")}: ${t.violations}`:"","badge-color":"red",onClick:e=>u.clickItem(t.inspectionid),swipeout:""},{default:r((()=>[c(_,{right:""},{default:r((()=>[c(x,{close:"",color:"blue",onClick:e=>u.editItem(t.inspectionid)},{default:r((()=>[c(p,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(x,{close:"",color:"red",onClick:e=>u.removeItem(t.inspectionid)},{default:r((()=>[c(p,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["header","title","text","badge","onClick"])))),128))])),_:1},8,["id"]),[[b,s.items.length]]),c(S,{onClick:t[1]||(t[1]=e=>u.editItem("new")),text:e.$t("add")},{default:r((()=>[c(p,{icon:"fas fa-plus"})])),_:1},8,["text"])])),_:1},8,["onPtr:refresh"])};const No={emits:["change"],props:{item:{type:Object,required:!0},value:{required:!1}},data(){let e=t.get(this.value,"answer");if(t.isUndefined(e))switch(this.item.type){case"yesno":e="no";break;case"number":case"text":case"radio":e="";break;case"checkbox":e=[]}return{answer:e,photo:t.get(this.value,"photo"),violations:t.get(this.value,"violations",0)}},computed:{attachPhoto(){return!0===this.item.attachPhoto}},watch:{answer(){this.changeAnswer()},photo(){this.changeAnswer()},violations(){this.changeAnswer()}},methods:{changeAnswer(){this.$emit("change",this.item.name,{answer:this.answer,photo:this.photo,violations:this.violations})},changePhoto(e){this.photo=e}}},Fo={name:"checklist-viewer-photo",emits:["change"],props:{value:{type:Object,required:!1}},data(){return{picture:this.value}},computed:{media(){return re(t.get(this.picture,"file"),"small","image")},photos(){return[oe(`/v1/images/${t.get(this.picture,"file")}`)]}},methods:{dragOver(e){_(e.target).parents(".item-link").addClass("active-state")},dragLeave(e){_(e.target).parents(".item-link").removeClass("active-state")},drop(e){_(e.target).parents(".item-link").removeClass("active-state"),this.uploadPicture(e.dataTransfer.files)},upload(){if(this.picture)this.$refs.photoBrowser.open();else{const e=_("#file");e.val(""),e.attr("accept",".jpg,.jpeg,.png"),e.removeAttr("multiple"),e.once("change",(e=>{if(void 0===window.File||void 0===window.FileReader||void 0===window.FileList||void 0===window.Blob)return he(this.$t("not-support-file-uploads"));this.uploadPicture(e.currentTarget.files)})),e.click()}},async uploadPicture(e){const a=e[0];if("image/jpeg"!==a.type)return he(this.$t("banner-note",{width:this.size.width,height:this.size.height}));const i=new FormData;i.append("file",a);const l=await s.post("/v1/user/upload/image",i);this.setPicture(t.get(l.data,"0"))},setPicture(e){this.picture=e,this.$emit("change",e)}}};Fo.render=function(e,t,a,i,s,o){const d=l("f7-list-item"),u=l("f7-photo-browser");return n(),$(C,null,[c(d,{link:"",title:e.$t("attach-photo"),media:o.media,onClick:t[3]||(t[3]=e=>o.upload())},{default:r((()=>[m("div",{slot:"content",class:"contextmenu",onDragover:t[0]||(t[0]=e=>o.dragOver(e)),onDragleave:t[1]||(t[1]=e=>o.dragLeave(e)),onDrop:t[2]||(t[2]=e=>o.drop(e))},null,32)])),_:1},8,["title","media"]),c(u,{photos:o.photos,type:"popup",theme:"dark",ref:"photoBrowser","routable-modals":!1,"popup-close-link-text":e.$t("close")},null,8,["photos","popup-close-link-text"])],64)};const Ro={name:"checklist-viewer-yesno",mixins:[No],components:{ChecklistViewerPhoto:Fo},methods:{toggleChanged(e){this.answer=e.target.checked?"yes":"no",this.violations=e.target.checked?0:1}}};Ro.render=function(e,t,a,i,s,p){const h=l("f7-toggle"),f=l("f7-list-item"),b=l("checklist-viewer-photo");return n(),$(C,null,[c(f,null,{default:r((()=>[m("span",null,u(e.item.title),1),c(h,{checked:"yes"===e.answer,onChange:p.toggleChanged},null,8,["checked","onChange"])])),_:1}),e.attachPhoto?(n(),o(b,{key:0,value:e.photo,onChange:e.changePhoto},null,8,["value","onChange"])):d("",!0)],64)};const Ho={name:"checklist-viewer-text",mixins:[No],components:{ChecklistViewerPhoto:Fo}};Ho.render=function(e,t,a,i,s,r){const u=l("f7-list-input"),p=l("checklist-viewer-photo");return n(),$(C,null,[c(u,{label:e.item.title,type:"text",placeholder:e.item.placeholder,info:e.item.info,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","value"]),e.attachPhoto?(n(),o(p,{key:0,value:e.photo,onChange:e.changePhoto},null,8,["value","onChange"])):d("",!0)],64)};const Go={name:"checklist-viewer-number",mixins:[No],components:{ChecklistViewerPhoto:Fo}};Go.render=function(e,t,a,i,s,r){const u=l("f7-list-input"),p=l("checklist-viewer-photo");return n(),$(C,null,[c(u,{label:e.item.title,type:"number",placeholder:e.item.placeholder,info:e.item.info,min:e.item.min,max:e.item.max,step:e.item.step,value:e.answer,"onUpdate:value":t[0]||(t[0]=t=>e.answer=t)},null,8,["label","placeholder","info","min","max","step","value"]),e.attachPhoto?(n(),o(p,{key:0,value:e.photo,onChange:e.changePhoto},null,8,["value","onChange"])):d("",!0)],64)};const Ko={name:"checklist-viewer-checkbox",mixins:[No],components:{ChecklistViewerPhoto:Fo},watch:{answer(e){let a=0;t.each(e,(e=>{t.find(this.item.options,{name:e}).violation&&a++})),this.violations=a}}},Wo=["name"],Zo=["value","textContent"];Ko.render=function(e,t,a,i,s,p){const h=l("f7-list-item"),b=l("checklist-viewer-photo");return n(),$(C,null,[c(h,{"smart-select":"",title:e.item.title,"smart-select-params":{openIn:"popover"}},{default:r((()=>[f(m("select",{name:e.item.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.answer=t),multiple:""},[(n(!0),$(C,null,w(e.item.options,(e=>(n(),$("option",{value:e.name,textContent:u(e.title)},null,8,Zo)))),256))],8,Wo),[[P,e.answer]])])),_:1},8,["title"]),e.attachPhoto?(n(),o(b,{key:0,value:e.photo,onChange:e.changePhoto},null,8,["value","onChange"])):d("",!0)],64)};const Yo={name:"checklist-viewer-radio",mixins:[No],components:{ChecklistViewerPhoto:Fo},watch:{answer(e){const a=t.find(this.item.options,{name:e});this.violations=a.violation?1:0}}},Jo=["name"],Qo=["value","textContent"];Yo.render=function(e,t,a,i,s,p){const h=l("f7-list-item"),b=l("checklist-viewer-photo");return n(),$(C,null,[c(h,{"smart-select":"",title:e.item.title,"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:e.item.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.answer=t)},[(n(!0),$(C,null,w(e.item.options,(e=>(n(),$("option",{value:e.name,textContent:u(e.title)},null,8,Qo)))),256))],8,Jo),[[P,e.answer]])])),_:1},8,["title"]),e.attachPhoto?(n(),o(b,{key:0,value:e.photo,onChange:e.changePhoto},null,8,["value","onChange"])):d("",!0)],64)};const Xo={name:"checklist-viewer-separator",mixins:[No]};Xo.render=function(e,t,a,i,s,r){const c=l("f7-list-item");return n(),o(c,{title:e.item.title,"group-title":""},null,8,["title"])};const er={name:"checklist-viewer",components:{ChecklistViewerYesNo:Ro,ChecklistViewerText:Ho,ChecklistViewerNumber:Go,ChecklistViewerCheckbox:Ko,ChecklistViewerRadio:Yo,ChecklistViewerSeparator:Xo},props:{items:{type:Array,required:!0},values:{type:Object,required:!1}},data(){return{answers:this.values||{}}},emits:["change"],methods:{getValue(e){return"separator"===e.type?{}:t.get(this.values,[e.name])},change(e,a){t.isString(a)&&(a=t.trim(a)),a?this.answers[e]=a:delete this.answers[e],this.$emit("change",this.answers)}}};er.render=function(e,t,a,i,s,c){const d=l("f7-list");return n(),o(d,null,{default:r((()=>[(n(!0),$(C,null,w(a.items,(e=>(n(),o(B(`checklist-viewer-${e.type}`),{item:e,value:c.getValue(e),onChange:c.change},null,8,["item","value","onChange"])))),256))])),_:1})};const tr={name:"f7-list-item-checklist-selector",emits:["update:value"],props:{checklists:{type:Array,required:!0},value:{type:String,default:void 0},disabled:{type:Boolean,default:!1}},watch:{value(e){this.$emit("update:value",e)}},computed:{title(){return this.$t("checklist")},smartSelectParams:()=>({closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:"md"===a.theme?48:44,scrollToSelectedItem:!0})}},ar=["value","textContent"];tr.render=function(e,t,a,i,s,c){const d=l("f7-list-item");return f((n(),o(d,{disabled:a.disabled,"smart-select":"","smart-select-params":c.smartSelectParams,title:c.title},{default:r((()=>[f(m("select",{name:"checklists","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},[(n(!0),$(C,null,w(a.checklists,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,ar)))),256))],512),[[P,a.value]])])),_:1},8,["disabled","smart-select-params","title"])),[[b,a.checklists.length>0]])};const ir={name:"inspection-popup",mixins:[bt],components:{SaveButton:et,ChecklistViewer:er,PlaceSelector:_i,ChecklistSelector:tr},props:{inspection:{type:Object,required:!0}},data(){const e=t.get(this.inspection,"places");let a=t.get(this.inspection,"placeid");1===t.size(e)&&(a=e[0].placeid);const i=t.get(this.inspection,"checklists");let s=t.get(this.inspection,"checklistid");return 1===t.size(i)&&(s=i[0].id),{inspectionid:t.get(this.inspection,"inspectionid"),description:t.get(this.inspection,"description",""),places:e,placeid:a,checklists:i,checklistid:s,values:this.inspection.values||{}}},computed:{placesDisabled(){return!1===t.isUndefined(this.inspectionid)||1===t.size(this.places)},checklistsDisabled(){return!1===t.isUndefined(this.inspectionid)||1===t.size(this.checklists)},virtualListHeight:()=>"md"===a.theme?48:44,items(){let e=[];return t.each(this.checklists,(a=>{a.id===this.checklistid&&(e=t.cloneDeep(a.items))})),e}},methods:{changeInspection(e){this.values=e},async save(){const e={violations:0};if(!this.placeid)return he(this.$t("place-empty"));if(e.placeid=this.placeid,!this.checklistid)return he(this.$t("checklist-empty"));e.checklistid=this.checklistid;const a=t.trim(this.description);let i;if(a&&(e.description=a),t.each(this.items,(a=>{"yesno"===a.type&&t.isUndefined(this.values[a.name])&&(this.values[a.name]={answer:"no",violations:1});const s=t.get(this.values,[a.name,"answer"]),l=t.get(this.values,[a.name,"photo"]),n=t.get(this.values,[a.name,"violations"]);return a.required&&t.isUndefined(s)?(i=`${this.$t("fill-required-field")}: ${a.title}`,!1):a.attachPhoto&&t.isUndefined(l)?(i=`${this.$t("attach-photo")}: ${a.title}`,!1):void(n&&(e.violations+=n))})),i)return he(i);e.values=this.values,this.inspectionid?(e.inspectionid=this.inspectionid,await s.patch("/v1/user/inspection",e)):await s.post("/v1/user/inspection",e),Ie("inspections:update"),this.close()}}};ir.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("place-selector"),g=l("checklist-selector"),v=l("f7-list-input"),k=l("f7-list"),y=l("checklist-viewer"),$=l("f7-page"),w=l("f7-view"),C=l("f7-popup");return n(),o(C,{"close-by-backdrop-click":!0},{default:r((()=>[c(w,{"stack-pages":!0},{default:r((()=>[c($,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:e.$t("inspection")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(k,{"media-list":""},{default:r((()=>[c(b,{places:s.places,value:s.placeid,"onUpdate:value":t[2]||(t[2]=e=>s.placeid=e),disabled:d.placesDisabled},null,8,["places","value","disabled"]),c(g,{checklists:s.checklists,disabled:d.checklistsDisabled,value:s.checklistid,"onUpdate:value":t[3]||(t[3]=e=>s.checklistid=e)},null,8,["checklists","disabled","value"]),c(v,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"512",value:s.description,"onUpdate:value":t[4]||(t[4]=e=>s.description=e)},null,8,["label","value"])])),_:1}),c(y,{items:d.items,values:s.values,onChange:d.changeInspection},null,8,["items","values","onChange"]),c(h,{onClick:t[5]||(t[5]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const sr={name:"inspections-filter-popup",components:{PlaceSelector:_i,SaveButton:et},mixins:[bt],props:{places:Array,placeids:Array},computed:{virtualListHeight:()=>"md"===a.theme?48:44},data(){return{ids:this.placeids}},methods:{async save(){Ie("inspections:filter",{placeids:this.ids}),this.close()}}};sr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("place-selector"),g=l("f7-list"),v=l("f7-page"),k=l("f7-view"),y=l("f7-popup");return n(),o(y,{"close-by-backdrop-click":!0},{default:r((()=>[c(k,{"stack-pages":!0},{default:r((()=>[c(v,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:e.$t("filter")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(g,null,{default:r((()=>[c(b,{places:a.places,value:s.ids,"onUpdate:value":t[2]||(t[2]=e=>s.ids=e),multiple:""},null,8,["places","value"])])),_:1}),c(h,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const lr={name:"cashback-popup",components:{SaveButton:et},mixins:[bt],props:{settings:Object},data(){return{active:t.get(this.settings,"cashback.active",!0),percentage:t.get(this.settings,"cashback.percentage",1),maximum:t.get(this.settings,"cashback.maximum",10)}},methods:{async save(){let e=0;const a=t.parseInt(this.percentage),i=t.parseInt(this.maximum);if(a||e++,i||e++,e>0)return he(this.$t("fill-required-fields"));const l={cashback:{active:this.active,percentage:a,maximum:i}};await s.patch("/v1/user/config/cashback",l),this.close()}}};lr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-item"),g=l("f7-list-input"),v=l("f7-list"),k=l("f7-page"),y=l("f7-view"),$=l("f7-popup");return n(),o($,{"close-by-backdrop-click":!0},{default:r((()=>[c(y,{"stack-pages":!0},{default:r((()=>[c(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:e.$t("cashback")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c(v,null,{default:r((()=>[c(b,{checkbox:"",title:e.$t("active"),checked:s.active,"onUpdate:checked":t[2]||(t[2]=e=>s.active=e)},null,8,["title","checked"]),c(g,{label:e.$t("cashback-percentage"),class:"required",type:"number",min:"1",max:"100",value:s.percentage,"onUpdate:value":t[3]||(t[3]=e=>s.percentage=e)},null,8,["label","value"]),c(g,{label:e.$t("cashback-maximum"),class:"required",type:"number",min:"1",max:"100",value:s.maximum,"onUpdate:value":t[4]||(t[4]=e=>s.maximum=e)},null,8,["label","value"])])),_:1}),c(h,{onClick:t[5]||(t[5]=e=>d.save())})])),_:1})])),_:1})])),_:1})};const nr={name:"mystery-shoppers-popup",components:{SaveButton:et,ChecklistSelector:tr},mixins:[bt,Qe],props:{settings:Object},data(){return{searchbarid:ze(),search:!1,enabled:t.get(this.settings,"mysteryShopper.enabled",!1),title:t.get(this.settings,"mysteryShopper.title",""),description:t.get(this.settings,"mysteryShopper.description",""),bonuses:t.get(this.settings,"mysteryShopper.bonuses",1),checklistid:t.get(this.settings,"mysteryShopper.checklist",""),checklists:t.get(this.settings,"checklists",[]),customers:t.get(this.settings,"customers",[])}},computed:{tabid:()=>ze(),virtualListHeight:()=>"md"===a.theme?48:44},mounted(){this.getItems(),xe("mystery:shoppers:update",this.getItems)},unmounted(){_e("mystery:shoppers:update",this.getItems)},methods:{async getItems(){const e=await s.get("/v1/user/mystery-shoppers");this.customers=e.data,this.$forceUpdate()},getHeader:e=>e.place.address,getTitle:e=>e.customer.name,getSubtitle(e){const a=[];return e.customer.phone&&a.push(`${this.$t("phone")}: ${e.customer.phone}`),e.customer.email&&a.push(`${this.$t("email")}: ${e.customer.email}`),t.join(a,", ")},getBadge(e){return this.$t(e.status)},getBadgeColor:e=>"working"===e.status?"green":"orange",async editItem(e){const t=await s.get(`/v1/user/mystery-shopper/${e}`);a.views.current.router.navigate(`/mystery-shopper/${e}/`,{props:{value:t.data}})},async removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(async()=>{await s.delete(`/v1/user/mystery-shopper/${e}`),await this.getItems()}))},async save(){let e=0;const a=t.trim(this.title),i=t.trim(this.description),l=t.parseInt(this.bonuses),n=this.checklistid;if(a||e++,i||e++,t.isNaN(l)&&e++,n||e++,e>0)return he(this.$t("fill-required-fields"));const o={mysteryShopper:{enabled:this.enabled,title:a,description:i,bonuses:l,checklist:n}};await s.patch("/v1/user/config/mystery-shopper",o),this.close()}}};nr.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("f7-icon"),g=l("f7-link"),v=l("save-button"),k=l("f7-nav-right"),y=l("f7-searchbar"),_=l("f7-navbar"),S=l("f7-toolbar"),U=l("f7-list-item"),P=l("f7-list-input"),D=l("checklist-selector"),T=l("f7-list"),q=l("f7-tab"),L=l("f7-swipeout-button"),O=l("f7-swipeout-actions"),z=l("f7-fab"),j=l("f7-tabs"),A=l("f7-page"),B=l("f7-view"),E=l("f7-popup");return n(),o(E,{"close-by-backdrop-click":!0},{default:r((()=>[c(B,{"stack-pages":!0},{default:r((()=>[c(A,null,{default:r((()=>[c(_,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:e.$t("mystery-shopper")},null,8,["title"]),c(k,null,{default:r((()=>[f(c(g,{"searchbar-enable":`.searchbar-${s.searchbarid}`},{default:r((()=>[c(m,{icon:"fas fa-search"})])),_:1},8,["searchbar-enable"]),[[b,s.search]]),c(v,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1}),c(y,{class:I(`searchbar-${s.searchbarid}`),"search-container":`#list-${s.searchbarid}`,"found-el":`#list-${s.searchbarid}`,"not-foud-el":`#not-found-${s.searchbarid}`,placeholder:e.$t("search"),"disable-button-text":e.$t("cancel"),"search-in":".item-header,.item-title,.item-subtitle",expandable:"",backdrop:!1},null,8,["class","search-container","found-el","not-foud-el","placeholder","disable-button-text"])])),_:1}),c(S,{tabbar:"",top:""},{default:r((()=>[c(g,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(g,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[x(u(e.$t("customers")),1)])),_:1},8,["tab-link"])])),_:1}),c(j,null,{default:r((()=>[c(q,{id:`tab-1-${d.tabid}`,"tab-active":""},{default:r((()=>[c(T,null,{default:r((()=>[c(U,{checkbox:"",title:e.$t("active"),checked:s.enabled,"onUpdate:checked":t[2]||(t[2]=e=>s.enabled=e)},null,8,["title","checked"]),c(P,{label:e.$t("title"),type:"text",class:"required",resizable:"",maxlength:"128",value:s.title,"onUpdate:value":t[3]||(t[3]=e=>s.title=e)},null,8,["label","value"]),c(P,{label:e.$t("description"),type:"textarea",class:"required",resizable:"",maxlength:"1024",value:s.description,"onUpdate:value":t[4]||(t[4]=e=>s.description=e)},null,8,["label","value"]),c(P,{label:e.$t("bonuses"),type:"number",step:"1",min:"1",class:"required",value:s.bonuses,"onUpdate:value":t[5]||(t[5]=e=>s.bonuses=e)},null,8,["label","value"]),c(D,{checklists:s.checklists,value:s.checklistid,"onUpdate:value":t[6]||(t[6]=e=>s.checklistid=e)},null,8,["checklists","value"])])),_:1}),c(v,{onClick:t[7]||(t[7]=e=>d.save())})])),_:1},8,["id"]),c(q,{id:`tab-2-${d.tabid}`,"onTab:show":t[9]||(t[9]=e=>s.search=!0),"onTab:hide":t[10]||(t[10]=e=>s.search=!1)},{default:r((()=>[f(c(T,{id:`list-${s.searchbarid}`,"media-list":""},{default:r((()=>[(n(!0),$(C,null,w(s.customers,(e=>(n(),o(U,{link:"",key:e.id,header:d.getHeader(e),title:d.getTitle(e),subtitle:d.getSubtitle(e),badge:d.getBadge(e),"badge-color":d.getBadgeColor(e),onClick:t=>d.editItem(e.id),swipeout:""},{default:r((()=>[c(O,{right:""},{default:r((()=>[c(L,{close:"",color:"red",onClick:t=>d.removeItem(e.id)},{default:r((()=>[c(m,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["header","title","subtitle","badge","badge-color","onClick"])))),128))])),_:1},8,["id"]),[[b,s.customers.length]]),c(z,{onClick:t[8]||(t[8]=e=>d.editItem("new"))},{default:r((()=>[c(m,{icon:"fas fa-plus"})])),_:1})])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const or={name:"mystery-shopper-page",components:{PlaceSelector:_i,SaveButton:et},props:{value:Object,f7router:Object},data(){const e=t.get(this.value,"places",[]);return{customer:t.defaults(t.get(this.value,"customer",{}),{login:"",place:"",status:"working"}),places:e}},computed:{title(){return this.customer.id?this.$t("editing"):this.$t("adding")},showLogin(){return void 0===this.customer.id},virtualListHeight:()=>"md"===a.theme?48:44},methods:{async save(){const e={};e.status=this.customer.status;const a=this.customer.place;if(t.isEmpty(a))return he(this.$t("fill-required-fields"));if(e.place=a,this.customer.id)e.id=this.customer.id,await s.patch("/v1/user/mystery-shopper",e);else{const a=t.toLower(t.trim(this.customer.login));if(t.isEmpty(a))return he(this.$t("fill-required-fields"));e.login=a,await s.post("/v1/user/mystery-shopper",e)}Ie("mystery:shoppers:update"),this.f7router.back()}}},rr=["textContent"],cr=["textContent"];or.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("f7-list-input"),$=l("place-selector"),w=l("f7-list-item"),C=l("f7-list"),x=l("f7-page");return n(),o(x,null,{default:r((()=>[c(k,null,{default:r((()=>[c(h,{"back-link":e.$t("back")},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[0]||(t[0]=e=>p.save())})])),_:1})])),_:1}),c(C,null,{default:r((()=>[p.showLogin?(n(),o(y,{key:0,label:e.$t("phone-or-email"),class:"required",type:"text",maxlength:"32",value:s.customer.login,"onUpdate:value":t[1]||(t[1]=e=>s.customer.login=e)},null,8,["label","value"])):d("",!0),c($,{places:s.places,value:s.customer.place,"onUpdate:value":t[2]||(t[2]=e=>s.customer.place=e)},null,8,["places","value"]),c(w,{"smart-select":"","smart-select-params":{closeOnSelect:!0,openIn:"popover"},title:e.$t("status")},{default:r((()=>[f(m("select",{name:"status","onUpdate:modelValue":t[3]||(t[3]=e=>s.customer.status=e)},[m("option",{value:"pending",textContent:u(e.$t("pending"))},null,8,rr),m("option",{value:"working",textContent:u(e.$t("working"))},null,8,cr)],512),[[P,s.customer.status]])])),_:1},8,["title"])])),_:1}),c(g,{onClick:t[4]||(t[4]=e=>p.save())})])),_:1})};const dr={name:"settings-popup",mixins:[bt],computed:{tabid:()=>ze()},methods:{navigate(e){a.views.current.router.navigate(e)},async settings(e){const t=await s.get(`/v1/user/config/${e}`);a.views.current.router.navigate(`/settings-${e}/`,{props:{settings:t.data}})}}};dr.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),m=l("f7-nav-title"),f=l("f7-navbar"),b=l("f7-link"),g=l("f7-toolbar"),v=l("f7-icon"),k=l("f7-list-item"),y=l("f7-list"),$=l("f7-tab"),w=l("f7-tabs"),C=l("f7-page"),_=l("f7-view"),I=l("f7-popup");return n(),o(I,{"close-by-backdrop-click":!0},{default:r((()=>[c(_,{"stack-pages":!0},{default:r((()=>[c(C,null,{default:r((()=>[c(f,null,{default:r((()=>[c(h,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(m,{title:e.$t("settings")},null,8,["title"])])),_:1}),c(g,{tabbar:"",top:""},{default:r((()=>[c(b,{"tab-link":`#tab-1-${p.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(b,{"tab-link":`#tab-2-${p.tabid}`},{default:r((()=>[x(u(e.$t("notifications")),1)])),_:1},8,["tab-link"])])),_:1}),c(w,null,{default:r((()=>[c($,{id:`tab-1-${p.tabid}`,"tab-active":""},{default:r((()=>[c(y,{class:"list-with-icon"},{default:r((()=>[c(k,{title:e.$t("basic"),link:"",onClick:t[1]||(t[1]=e=>p.settings("basic"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-cogs"})])),_:1},8,["title"]),c(k,{title:e.$t("domains"),link:"",onClick:t[2]||(t[2]=e=>p.navigate("/domains/"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-link"})])),_:1},8,["title"]),c(k,{title:e.$t("site"),link:"",onClick:t[3]||(t[3]=e=>p.settings("site"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-globe"})])),_:1},8,["title"]),c(k,{title:"QR Code",link:"",onClick:t[4]||(t[4]=e=>p.settings("qrcode"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-qrcode"})])),_:1}),d("",!0),c(k,{title:e.$t("theme"),link:"",onClick:t[6]||(t[6]=e=>p.settings("theme"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-palette"})])),_:1},8,["title"]),c(k,{title:e.$t("application-links"),link:"",onClick:t[7]||(t[7]=e=>p.settings("apps"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-external-link-square-alt"})])),_:1},8,["title"]),c(k,{title:e.$t("socials"),link:"",onClick:t[8]||(t[8]=e=>p.settings("socials"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-thumbs-up"})])),_:1},8,["title"]),c(k,{title:e.$t("payment-methods"),link:"",onClick:t[9]||(t[9]=e=>p.navigate("/payment-methods/"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-money-check-alt"})])),_:1},8,["title"])])),_:1})])),_:1},8,["id"]),c($,{id:`tab-2-${p.tabid}`},{default:r((()=>[c(y,{class:"list-with-icon"},{default:r((()=>[c(k,{title:e.$t("email"),link:"",onClick:t[10]||(t[10]=e=>p.settings("email"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-mail-bulk"})])),_:1},8,["title"]),c(k,{title:e.$t("sms"),link:"",onClick:t[11]||(t[11]=e=>p.settings("sms"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-sms"})])),_:1},8,["title"]),c(k,{title:e.$t("call"),link:"",onClick:t[12]||(t[12]=e=>p.settings("call"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-phone-volume"})])),_:1},8,["title"]),c(k,{title:e.$t("notification"),link:"",onClick:t[13]||(t[13]=e=>p.settings("notification"))},{media:r((()=>[c(v,{icon:"fas fa-fw fa-comment-alt"})])),_:1},8,["title"]),c(k,{title:e.$t("bot"),link:"",onClick:t[14]||(t[14]=e=>p.settings("bot"))},{media:r((()=>[c(v,{icon:"fab fa-fw fa-telegram"})])),_:1},8,["title"])])),_:1})])),_:1},8,["id"])])),_:1})])),_:1})])),_:1})])),_:1})};const ur={name:"settings-basic-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{name:t.get(this.settings,"name",""),organization:t.get(this.settings,"organization",""),authorization:t.get(this.settings,"authorization","email"),initial:t.get(this.settings,"initial","primary")}},methods:{async save(){let e=0;if(this.name||e++,e>0)return he(this.$t("fill-required-fields"));const t={};t.name=this.name,t.organization=this.organization||this.name,t.authorization=this.authorization,t.initial=this.initial,await s.patch("/v1/user/config/basic",t),this.f7router.back()}}},pr=["textContent"],hr=["textContent"],mr=["textContent"],fr=["textContent"],br=["textContent"];ur.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-input"),y=l("f7-list-item"),$=l("f7-list"),w=l("f7-page");return n(),o(w,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("basic")},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c($,null,{default:r((()=>[c(k,{label:e.$t("name"),class:"required",type:"text",value:s.name,"onUpdate:value":t[1]||(t[1]=e=>s.name=e)},null,8,["label","value"]),c(k,{label:e.$t("organization"),type:"text",value:s.organization,"onUpdate:value":t[2]||(t[2]=e=>s.organization=e)},null,8,["label","value"]),c(y,{"smart-select":"",title:e.$t("authorization"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"authorization","onUpdate:modelValue":t[3]||(t[3]=e=>s.authorization=e)},[m("option",{value:"email",textContent:u(e.$t("email"))},null,8,pr),m("option",{value:"call",textContent:u(e.$t("call"))},null,8,hr),m("option",{value:"sms",textContent:u(e.$t("sms"))},null,8,mr)],512),[[P,s.authorization]])])),_:1},8,["title"]),c(y,{"smart-select":"",title:e.$t("place"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"initial","onUpdate:modelValue":t[4]||(t[4]=e=>s.initial=e)},[m("option",{value:"primary",textContent:u(e.$t("primary"))},null,8,fr),m("option",{value:"choice",textContent:u(e.$t("choice"))},null,8,br)],512),[[P,s.initial]])])),_:1},8,["title"])])),_:1}),c(b,{onClick:t[5]||(t[5]=e=>d.save())})])),_:1})};const gr={name:"settings-notification-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{providers:["onesignal.com"],provider:t.get(this.settings,"notification.provider","onesignal.com"),id:t.get(this.settings,"notification.id",""),key:t.get(this.settings,"notification.key",""),safari:t.get(this.settings,"notification.safari","")}},methods:{async save(){let e=0;if(this.id||e++,this.key||e++,e>0)return he(this.$t("fill-required-fields"));const a={notification:{provider:this.provider,id:t.trim(this.id),key:t.trim(this.key),safari:t.trim(this.safari)}};await s.patch("/v1/user/config/notification",a),this.f7router.back()}}},vr=["value","textContent"];gr.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list-input"),x=l("f7-list"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("notification")},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(x,null,{default:r((()=>[c(k,{"smart-select":"",title:e.$t("provider"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"provider","onUpdate:modelValue":t[1]||(t[1]=e=>s.provider=e)},[(n(!0),$(C,null,w(s.providers,(e=>(n(),$("option",{value:e,textContent:u(e)},null,8,vr)))),256))],512),[[P,s.provider]])])),_:1},8,["title"]),c(y,{label:"Id",class:"required",type:"text",value:s.id,"onUpdate:value":t[2]||(t[2]=e=>s.id=e)},null,8,["value"]),c(y,{label:"Key",class:"required",type:"text",value:s.key,"onUpdate:value":t[3]||(t[3]=e=>s.key=e)},null,8,["value"]),c(y,{label:"Safari Web Id",type:"text",value:s.safari,"onUpdate:value":t[4]||(t[4]=e=>s.safari=e)},null,8,["value"])])),_:1}),c(b,{onClick:t[5]||(t[5]=e=>d.save())})])),_:1})};const kr={name:"settings-maps-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{provider:t.get(this.settings,"maps.provider","google"),key:t.get(this.settings,"maps.key","")}},methods:{async save(){let e=0;if(this.key||e++,e>0)return he(this.$t("fill-required-fields"));const t={maps:{provider:this.provider,key:this.key}};await s.patch("/v1/user/config/maps",t),this.f7router.back()}}},yr=[m("option",{value:"google"},"Google",-1),m("option",{value:"yandex"},"Yandex",-1)];kr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),b=l("f7-nav-right"),g=l("f7-navbar"),v=l("f7-list-item"),k=l("f7-list-input"),y=l("f7-list"),$=l("f7-page");return n(),o($,null,{default:r((()=>[c(g,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("maps")},null,8,["title"]),c(b,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(y,null,{default:r((()=>[c(v,{"smart-select":"",title:e.$t("provider"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"provider","onUpdate:modelValue":t[1]||(t[1]=e=>s.provider=e)},yr,512),[[P,s.provider]])])),_:1},8,["title"]),c(k,{label:"Key",class:"required",type:"text",value:s.key,"onUpdate:value":t[2]||(t[2]=e=>s.key=e)},null,8,["value"])])),_:1}),c(h,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})};const $r={name:"settings-email-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{host:t.get(this.settings,"email.smtp.host",""),port:t.get(this.settings,"email.smtp.port",465),secure:t.get(this.settings,"email.smtp.secure",!0),type:t.get(this.settings,"email.smtp.auth.type","login"),user:t.get(this.settings,"email.smtp.auth.user",""),pass:t.get(this.settings,"email.smtp.auth.pass",""),primary:t.get(this.settings,"email.primary",""),support:t.get(this.settings,"email.support","")}},methods:{async save(){let e=0;if(this.host||e++,this.port||e++,this.user||e++,this.pass||e++,this.primary||e++,this.support||e++,e>0)return he(this.$t("fill-required-fields"));const a={};a.smtp={host:t.toLower(t.trim(this.host)),port:t.parseInt(this.port),secure:this.secure,auth:{type:this.type,user:this.user,pass:this.pass}},a.primary=this.primary,a.support=this.support,await s.patch("/v1/user/config/email",{email:a}),this.f7router.back()}}};$r.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list-item"),v=l("f7-list"),k=l("f7-page");return n(),o(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("email")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(v,null,{default:r((()=>[c(b,{label:e.$t("host"),class:"required",type:"text",value:s.host,"onUpdate:value":t[1]||(t[1]=e=>s.host=e)},null,8,["label","value"]),c(b,{label:e.$t("port"),class:"required",type:"text",value:s.port,"onUpdate:value":t[2]||(t[2]=e=>s.port=e)},null,8,["label","value"]),c(g,{checkbox:"",title:e.$t("secure"),checked:s.secure,"onUpdate:checked":t[3]||(t[3]=e=>s.secure=e)},null,8,["title","checked"]),c(b,{label:e.$t("login"),class:"required",type:"text",value:s.user,"onUpdate:value":t[4]||(t[4]=e=>s.user=e)},null,8,["label","value"]),c(b,{label:e.$t("password"),class:"required",type:"text",value:s.pass,"onUpdate:value":t[5]||(t[5]=e=>s.pass=e)},null,8,["label","value"]),c(b,{label:e.$t("email-primary"),class:"required",type:"text",value:s.primary,"onUpdate:value":t[6]||(t[6]=e=>s.primary=e)},null,8,["label","value"]),c(b,{label:e.$t("email-support"),class:"required",type:"text",value:s.support,"onUpdate:value":t[7]||(t[7]=e=>s.support=e)},null,8,["label","value"])])),_:1}),c(h,{onClick:t[8]||(t[8]=e=>d.save())})])),_:1})};const wr={name:"settings-call-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{providers:["ucaller.ru"],provider:t.get(this.settings,"call.provider","ucaller.ru"),id:t.get(this.settings,"call.id",""),key:t.get(this.settings,"call.key","")}},methods:{async save(){let e=0;if(this.id||e++,this.key||e++,e>0)return he(this.$t("fill-required-fields"));const t={call:{provider:this.provider,id:this.id,key:this.key}};await s.patch("/v1/user/config/call",t),this.f7router.back()}}},Cr=["value","textContent"];wr.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list-input"),x=l("f7-list"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("call")},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(x,null,{default:r((()=>[c(k,{"smart-select":"",title:e.$t("provider"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"provider","onUpdate:modelValue":t[1]||(t[1]=e=>s.provider=e)},[(n(!0),$(C,null,w(s.providers,(e=>(n(),$("option",{value:e,textContent:u(e)},null,8,Cr)))),256))],512),[[P,s.provider]])])),_:1},8,["title"]),c(y,{label:"Id",class:"required",type:"text",value:s.id,"onUpdate:value":t[2]||(t[2]=e=>s.id=e)},null,8,["value"]),c(y,{label:"Key",class:"required",type:"text",value:s.key,"onUpdate:value":t[3]||(t[3]=e=>s.key=e)},null,8,["value"])])),_:1}),c(b,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})};const xr={name:"settings-apps-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){const e=t.get(this.settings,"socials",[]),a={vk:"",ok:"",facebook:"",twitter:"",linkedin:"",pinterest:"",instagram:"",tumblr:"",vimeo:"",youtube:""};return t.each(e,(e=>{a[e.type]=e.url})),a},methods:{async save(){const e=[];t.trim(this.vk)&&e.push({type:"vk",url:this.vk});t.trim(this.ok)&&e.push({type:"ok",url:this.ok});t.trim(this.facebook)&&e.push({type:"facebook",url:this.facebook});t.trim(this.twitter)&&e.push({type:"twitter",url:this.twitter});t.trim(this.linkedin)&&e.push({type:"linkedin",url:this.linkedin});t.trim(this.pinterest)&&e.push({type:"pinterest",url:this.pinterest});t.trim(this.instagram)&&e.push({type:"instagram",url:this.instagram});t.trim(this.tumblr)&&e.push({type:"tumblr",url:this.tumblr});t.trim(this.vimeo)&&e.push({type:"vimeo",url:this.vimeo});t.trim(this.youtube)&&e.push({type:"youtube",url:this.youtube});const a={socials:e};await s.patch("/v1/user/config/socials",a),this.f7router.back()}}};xr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list"),v=l("f7-page");return n(),o(v,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("socials")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(g,null,{default:r((()=>[c(b,{label:"YouTube",type:"textarea",resizable:"",maxlength:"512",value:e.youtube,"onUpdate:value":t[1]||(t[1]=t=>e.youtube=t)},null,8,["value"]),c(b,{label:"Vimeo",type:"textarea",resizable:"",maxlength:"512",value:e.vimeo,"onUpdate:value":t[2]||(t[2]=t=>e.vimeo=t)},null,8,["value"]),c(b,{label:"Facebook",type:"textarea",resizable:"",maxlength:"512",value:e.facebook,"onUpdate:value":t[3]||(t[3]=t=>e.facebook=t)},null,8,["value"]),c(b,{label:"Twitter",type:"textarea",resizable:"",maxlength:"512",value:e.twitter,"onUpdate:value":t[4]||(t[4]=t=>e.twitter=t)},null,8,["value"]),c(b,{label:"Pinterest",type:"textarea",resizable:"",maxlength:"512",value:e.pinterest,"onUpdate:value":t[5]||(t[5]=t=>e.pinterest=t)},null,8,["value"]),c(b,{label:"Instagram",type:"textarea",resizable:"",maxlength:"512",value:e.instagram,"onUpdate:value":t[6]||(t[6]=t=>e.instagram=t)},null,8,["value"]),c(b,{label:"Tumblr",type:"textarea",resizable:"",maxlength:"512",value:e.tumblr,"onUpdate:value":t[7]||(t[7]=t=>e.tumblr=t)},null,8,["value"]),c(b,{label:"LinkedIn",type:"textarea",resizable:"",maxlength:"512",value:e.linkedin,"onUpdate:value":t[8]||(t[8]=t=>e.linkedin=t)},null,8,["value"]),c(b,{label:"VK",type:"textarea",resizable:"",maxlength:"512",value:e.vk,"onUpdate:value":t[9]||(t[9]=t=>e.vk=t)},null,8,["value"]),c(b,{label:"OK",type:"textarea",resizable:"",maxlength:"512",value:e.ok,"onUpdate:value":t[10]||(t[10]=t=>e.ok=t)},null,8,["value"])])),_:1}),c(h,{onClick:t[11]||(t[11]=e=>d.save())})])),_:1})};const _r={name:"settings-bot-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{providers:["telegram.org"],provider:t.get(this.settings,"bot.provider","telegram.org"),id:t.get(this.settings,"bot.id",""),key:t.get(this.settings,"bot.key","")}},methods:{async save(){let e=0;if(this.id||e++,this.key||e++,e>0)return he(this.$t("fill-required-fields"));const t={bot:{provider:this.provider,id:this.id,key:this.key}};await s.patch("/v1/user/config/bot",t),this.f7router.back()}}},Ir=["value","textContent"];_r.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list-input"),x=l("f7-list"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("bot")},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(x,null,{default:r((()=>[c(k,{"smart-select":"",title:e.$t("provider"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"provider","onUpdate:modelValue":t[1]||(t[1]=e=>s.provider=e)},[(n(!0),$(C,null,w(s.providers,(e=>(n(),$("option",{value:e,textContent:u(e)},null,8,Ir)))),256))],512),[[P,s.provider]])])),_:1},8,["title"]),c(y,{label:"Id",class:"required",type:"text",value:s.id,"onUpdate:value":t[2]||(t[2]=e=>s.id=e)},null,8,["value"]),c(y,{label:"Key",class:"required",type:"text",value:s.key,"onUpdate:value":t[3]||(t[3]=e=>s.key=e)},null,8,["value"])])),_:1}),c(b,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})};const Sr={name:"settings-apps-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{ios:t.get(this.settings,"apps.ios",""),android:t.get(this.settings,"apps.android",""),huawei:t.get(this.settings,"apps.huawei","")}},methods:{async save(){const e={},a=t.trim(this.ios);a&&(e.ios=a);const i=t.trim(this.android);i&&(e.android=i);const l=t.trim(this.huawei);l&&(e.huawei=l),await s.patch("/v1/user/config/apps",{apps:e}),this.f7router.back()}}};Sr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-input"),g=l("f7-list"),v=l("f7-page");return n(),o(v,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("application-links")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(g,null,{default:r((()=>[c(b,{label:"App Store",type:"textarea",resizable:"",maxlength:"512",value:s.ios,"onUpdate:value":t[1]||(t[1]=e=>s.ios=e)},null,8,["value"]),c(b,{label:"Google Play",type:"textarea",resizable:"",maxlength:"512",value:s.android,"onUpdate:value":t[2]||(t[2]=e=>s.android=e)},null,8,["value"]),c(b,{label:"AppGallery",type:"textarea",resizable:"",maxlength:"512",value:s.huawei,"onUpdate:value":t[3]||(t[3]=e=>s.huawei=e)},null,8,["value"])])),_:1}),c(h,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})};const Ur={name:"codemirror",props:{mode:{type:String,required:!0,validator:e=>["javascript","css"].includes(e)},code:{type:String,required:!0}},emits:["change"],data:()=>({id:`editor-${ze()}`}),mounted(){const e=new E;this.editor=new V({parent:document.getElementById(this.id),state:M.create({doc:this.code,extensions:[N,e.of("css"===this.mode?F():R()),V.updateListener.of((e=>{this.$emit("change",e.state.doc.text.join("\n"))}))]})})},unmounted(){this.editor.destroy()}},Pr=["id"];Ur.render=function(e,t,a,i,s,l){return n(),$("div",{id:s.id},null,8,Pr)};const Dr={name:"settings-site-page",components:{Codemirror:Ur,SaveButton:et},mixins:[Qe],props:{settings:Object,f7router:Object},data(){return{title:t.get(this.settings,"title",""),description:t.get(this.settings,"description",""),keywords:t.get(this.settings,"keywords",""),css:t.get(this.settings,"css",""),javascript:t.get(this.settings,"javascript",""),meta:t.get(this.settings,"meta",[])}},computed:{tabid:()=>ze()},mounted(){xe("add:meta:item",(e=>{this.meta.push(e),this.$forceUpdate()})),xe("edit:meta:item",(e=>{this.meta[e.index]=e.item}))},unmounted(){_e("add:meta:item"),_e("edit:meta:item")},methods:{changeJavaScript(e){this.javascript=e},changeCSS(e){this.css=e},footer:e=>`<meta name="${e.name}" content="${e.content}">`,selectItem(e){this.canClick&&this.editItem(e)},addItem(){a.views.current.router.navigate("/meta-item/")},editItem(e){a.views.current.router.navigate("/meta-item/",{props:{index:e,item:t.cloneDeep(this.meta[e])}})},removeItem(e){a.dialog.confirm(this.$t("delete-confirm"),this.$t("deleting"),(()=>{this.meta.splice(e,1)}))},async save(){const e={};e.title=t.trim(this.title),e.description=t.trim(this.description),e.keywords=t.trim(this.keywords),e.css=t.trim(this.css),e.javascript=t.trim(this.javascript),e.meta=this.meta,await s.patch("/v1/user/config/site",e),this.f7router.back()}}},Tr=x("JavaScript"),qr=x("CSS");Dr.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("save-button"),f=l("f7-nav-right"),b=l("f7-navbar"),g=l("f7-link"),v=l("f7-toolbar"),k=l("f7-block-title"),y=l("f7-list-input"),_=l("f7-list"),I=l("f7-icon"),S=l("f7-swipeout-button"),U=l("f7-swipeout-actions"),P=l("f7-list-item"),D=l("f7-tab"),T=l("codemirror"),q=l("f7-tabs"),L=l("f7-page");return n(),o(L,{"page-content":!1},{default:r((()=>[c(b,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("site")},null,8,["title"]),c(f,null,{default:r((()=>[c(m,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(v,{tabbar:"",top:""},{default:r((()=>[c(g,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(g,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[Tr])),_:1},8,["tab-link"]),c(g,{"tab-link":`#tab-3-${d.tabid}`},{default:r((()=>[qr])),_:1},8,["tab-link"])])),_:1}),c(q,null,{default:r((()=>[c(D,{id:`tab-1-${d.tabid}`,class:"page-content","tab-active":""},{default:r((()=>[c(k,{textContent:u(e.$t("basic"))},null,8,["textContent"]),c(_,null,{default:r((()=>[c(y,{label:e.$t("title"),type:"text",maxlength:"60",value:s.title,"onUpdate:value":t[1]||(t[1]=e=>s.title=e)},null,8,["label","value"]),c(y,{label:e.$t("description"),type:"textarea",resizable:"",maxlength:"160",value:s.description,"onUpdate:value":t[2]||(t[2]=e=>s.description=e)},null,8,["label","value"]),c(y,{label:e.$t("keywords"),type:"textarea",resizable:"",maxlength:"512",value:s.keywords,"onUpdate:value":t[3]||(t[3]=e=>s.keywords=e)},null,8,["label","value"])])),_:1}),c(k,{textContent:u(e.$t("meta"))},null,8,["textContent"]),c(_,null,{default:r((()=>[(n(!0),$(C,null,w(s.meta,((e,t)=>(n(),o(P,{link:"",key:t,title:e.name,subtitle:d.footer(e),onClick:e=>d.selectItem(t),swipeout:""},{default:r((()=>[c(U,{right:""},{default:r((()=>[c(S,{close:"",color:"blue",onClick:e=>d.editItem(t)},{default:r((()=>[c(I,{icon:"fas fa-edit"})])),_:2},1032,["onClick"]),c(S,{close:"",color:"red",onClick:e=>d.removeItem(t)},{default:r((()=>[c(I,{icon:"fas fa-trash"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","subtitle","onClick"])))),128)),c(P,{link:"",title:e.$t("add"),onClick:t[4]||(t[4]=e=>d.addItem("meta"))},null,8,["title"])])),_:1}),c(m,{onClick:t[5]||(t[5]=e=>d.save())})])),_:1},8,["id"]),c(D,{id:`tab-2-${d.tabid}`,class:"page-content"},{default:r((()=>[c(T,{code:s.javascript,mode:"javascript",onChange:d.changeJavaScript,style:{height:"100%"}},null,8,["code","onChange"])])),_:1},8,["id"]),c(D,{id:`tab-3-${d.tabid}`,class:"page-content"},{default:r((()=>[c(T,{code:s.css,mode:"css",onChange:d.changeCSS,style:{height:"100%"}},null,8,["code","onChange"])])),_:1},8,["id"])])),_:1})])),_:1})};const Lr={name:"settings-theme-page",components:{PictureEditor:Bl,SaveButton:et},mixins:[Qe],props:{settings:Object,f7router:Object},data(){return{logo:t.get(this.settings,"logo"),icon:t.get(this.settings,"icon"),banner:t.get(this.settings,"banner"),colors:t.get(this.settings,"colors")}},computed:{tabid:()=>ze()},methods:{colorPickerParams(e){return{modules:["wheel","hex"],value:{hex:this.colors[e]},hexLabel:!0,hexValueEditable:!0,on:{change:(t,a)=>{this.colors[e]=a.hex}}}},info:e=>t.startCase(e),async save(){const e={colors:this.colors};await s.patch("/v1/user/config/theme",e),this.f7router.back()}}};Lr.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),f=l("save-button"),b=l("f7-nav-right"),g=l("f7-navbar"),v=l("f7-link"),k=l("f7-toolbar"),y=l("picture-editor"),_=l("f7-tab"),S=l("f7-list-input"),P=l("f7-list"),D=l("f7-tabs"),T=l("f7-page");return n(),o(T,{"page-content":!1},{default:r((()=>[c(g,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("theme")},null,8,["title"]),c(b,null,{default:r((()=>[c(f,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(k,{tabbar:"",top:""},{default:r((()=>[c(v,{"tab-link":`#tab-1-${d.tabid}`,"tab-link-active":""},{default:r((()=>[x(u(e.$t("basic")),1)])),_:1},8,["tab-link"]),c(v,{"tab-link":`#tab-2-${d.tabid}`},{default:r((()=>[x(u(e.$t("colors")),1)])),_:1},8,["tab-link"])])),_:1}),c(D,null,{default:r((()=>[c(_,{id:`tab-1-${d.tabid}`,class:"page-content","tab-active":""},{default:r((()=>[c(y,{type:"logo",value:s.logo},null,8,["value"]),c(y,{type:"icon",value:s.icon},null,8,["value"]),c(y,{type:"banner",value:s.banner},null,8,["value"])])),_:1},8,["id"]),c(_,{id:`tab-2-${d.tabid}`,class:"page-content"},{default:r((()=>[c(P,null,{default:r((()=>[(n(!0),$(C,null,w(s.colors,((t,a)=>(n(),o(S,{key:a,type:"colorpicker",placeholder:e.$t("color"),info:d.info(a),readonly:"","color-picker-params":d.colorPickerParams(a)},{media:r((()=>[m("i",{style:U([`background-color: ${t}`,{width:"24px",height:"24px","border-radius":"4px"}]),class:I("icon primary-picker")},null,4)])),_:2},1032,["placeholder","info","color-picker-params"])))),128))])),_:1})])),_:1},8,["id"])])),_:1})])),_:1})};const Or={name:"settings-sms-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{providers:["twilio.com","sms.ru"],provider:t.get(this.settings,"sms.provider","twilio.com"),id:t.get(this.settings,"sms.id",""),key:t.get(this.settings,"sms.key","")}},computed:{showId(){return"twilio.com"===this.provider}},methods:{async save(){const e={provider:this.provider};let t=0;if(this.showId&&(this.id?e.id=this.id:t++),this.key?e.key=this.key:t++,t>0)return he(this.$t("fill-required-fields"));await s.patch("/v1/user/config/sms",{sms:e}),this.f7router.back()}}},zr=["value","textContent"];Or.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),g=l("save-button"),v=l("f7-nav-right"),k=l("f7-navbar"),y=l("f7-list-item"),x=l("f7-list-input"),_=l("f7-list"),I=l("f7-page");return n(),o(I,null,{default:r((()=>[c(k,null,{default:r((()=>[c(p,{"back-link":e.$t("back")},null,8,["back-link"]),c(h,{title:e.$t("call")},null,8,["title"]),c(v,null,{default:r((()=>[c(g,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(_,null,{default:r((()=>[c(y,{"smart-select":"",title:e.$t("provider"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"provider","onUpdate:modelValue":t[1]||(t[1]=e=>s.provider=e)},[(n(!0),$(C,null,w(s.providers,(e=>(n(),$("option",{value:e,textContent:u(e)},null,8,zr)))),256))],512),[[P,s.provider]])])),_:1},8,["title"]),f(c(x,{label:"Id",class:"required",type:"text",value:s.id,"onUpdate:value":t[2]||(t[2]=e=>s.id=e)},null,8,["value"]),[[b,d.showId]]),c(x,{label:"Key",class:"required",type:"text",value:s.key,"onUpdate:value":t[3]||(t[3]=e=>s.key=e)},null,8,["value"])])),_:1}),c(g,{onClick:t[4]||(t[4]=e=>d.save())})])),_:1})};const jr={name:"settings-qrcode-page",components:{SaveButton:et},props:{settings:Object,f7router:Object},data(){return{enabled:t.get(this.settings,"qrcode.enabled",!1),interval:t.get(this.settings,"qrcode.interval",60)}},methods:{async save(){const e=t.parseInt(this.interval);let a=0;if(t.isNaN(e)&&a++,a>0)return he(this.$t("fill-required-fields"));const i={};i.enabled=this.enabled,i.interval=e,await s.patch("/v1/user/config/qrcode",i),this.f7router.back()}}};jr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("save-button"),m=l("f7-nav-right"),f=l("f7-navbar"),b=l("f7-list-item"),g=l("f7-list-input"),v=l("f7-list"),k=l("f7-page");return n(),o(k,null,{default:r((()=>[c(f,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:e.$t("basic")},null,8,["title"]),c(m,null,{default:r((()=>[c(h,{mini:"",onClick:t[0]||(t[0]=e=>d.save())})])),_:1})])),_:1}),c(v,null,{default:r((()=>[c(b,{checkbox:"",title:e.$t("displayed"),checked:s.enabled,"onUpdate:checked":t[1]||(t[1]=e=>s.enabled=e)},null,8,["title","checked"]),c(g,{label:e.$t("interval"),class:"required",type:"number",value:s.interval,"onUpdate:value":t[2]||(t[2]=e=>s.interval=e)},null,8,["label","value"])])),_:1}),c(h,{onClick:t[3]||(t[3]=e=>d.save())})])),_:1})};const Ar={name:"sold-out-popup",mixins:[bt],props:{groups:{type:Array,required:!0},products:{type:Object,required:!0},soldOut:{type:Array,required:!0}},methods:{getProducts(e){const a=[];return t.each(e.products,(e=>{a.push(this.products[e])})),a},isSoldOut(e){return!t.includes(this.soldOut,e.id)},async change(e,t){if(e.target.checked)await s.delete(`/v1/user/sold-out/${t.id}`);else{const e={productid:t.id};await s.post("/v1/user/sold-out",e)}}}};Ar.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-navbar"),m=l("f7-list-item"),f=l("f7-list-group"),b=l("f7-list"),g=l("f7-page"),v=l("f7-view"),k=l("f7-popup");return n(),o(k,{"close-by-backdrop-click":!0},{default:r((()=>[c(v,{"stack-pages":!0},{default:r((()=>[c(g,null,{default:r((()=>[c(h,null,{default:r((()=>[c(u,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(p,{title:e.$t("on-sale")},null,8,["title"])])),_:1}),c(b,{class:"sold-out-list"},{default:r((()=>[(n(!0),$(C,null,w(a.groups,(e=>(n(),o(f,{class:"sold-out-list-group",key:e.id},{default:r((()=>[c(m,{title:e.name,"group-title":""},null,8,["title"]),(n(!0),$(C,null,w(d.getProducts(e),(e=>(n(),o(m,{key:e.id,checkbox:"",title:e.name,checked:d.isSoldOut(e),onChange:t=>d.change(t,e)},null,8,["title","checked","onChange"])))),128))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})};const Br={name:"review-popup",mixins:[bt],components:{SaveButton:et},props:{id:String},data:()=>({rating:void 0,message:""}),methods:{async save(){const e={type:"user",objectid:this.id};return this.rating?(e.rating=t.parseInt(this.rating),this.message?(e.message=t.trim(this.message),await s.post("/v1/user/review",e),void this.close()):he(this.$t("fill-required-fields"))):he(this.$t("fill-required-fields"))}}},Er=["textContent"],Vr=["textContent"];Br.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),b=l("save-button"),g=l("f7-nav-right"),v=l("f7-navbar"),k=l("f7-list-item"),y=l("f7-list-input"),$=l("f7-list"),w=l("f7-page"),C=l("f7-view"),x=l("f7-popup");return n(),o(x,{"close-by-backdrop-click":!0},{default:r((()=>[c(C,{"stack-pages":!0},{default:r((()=>[c(w,null,{default:r((()=>[c(v,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:e.$t("review")},null,8,["title"]),c(g,null,{default:r((()=>[c(b,{mini:"",onClick:t[1]||(t[1]=e=>d.save())})])),_:1})])),_:1}),c($,null,{default:r((()=>[c(k,{"smart-select":"",title:e.$t("type"),"smart-select-params":{closeOnSelect:!0,openIn:"popover"}},{default:r((()=>[f(m("select",{name:"rating","onUpdate:modelValue":t[2]||(t[2]=e=>s.rating=e)},[m("option",{value:"5",textContent:u(e.$t("positive"))},null,8,Er),m("option",{value:"1",textContent:u(e.$t("negative"))},null,8,Vr)],512),[[P,s.rating]])])),_:1},8,["title"]),c(y,{label:e.$t("review"),type:"textarea",resizable:"",value:s.message,"onUpdate:value":t[3]||(t[3]=e=>s.message=e)},null,8,["label","value"])])),_:1}),c(b,{label:e.$t("send"),onClick:t[4]||(t[4]=e=>d.save())},null,8,["label"])])),_:1})])),_:1})])),_:1})};const Mr={name:"statistics-popup",mixins:[bt],methods:{async revenue(e){const i=(await s.get(`/v1/purchases/${e}`)).data;0===t.size(i)?he(this.$t("nothing-found")):a.views.current.router.navigate("/statistics-revenue/",{props:{type:e,purchases:i}})},async total(e){const i=(await s.get(`/v1/purchases/${e}`)).data;0===t.size(i)?he(this.$t("nothing-found")):a.views.current.router.navigate("/statistics-total/",{props:{type:e,purchases:i}})},async averageCheck(e){const i=(await s.get(`/v1/purchases/${e}`)).data;0===t.size(i)?he(this.$t("nothing-found")):a.views.current.router.navigate("/statistics-average-check/",{props:{type:e,purchases:i}})},async popular(e){const i=(await s.get(`/v1/${e}/popular`)).data;t.size(i)<=1?he(this.$t("nothing-found")):a.views.current.router.navigate("/statistics-popular/",{props:{type:e,items:i}})},async customers(){const e=(await s.get("/v1/statistics/customers")).data;0===t.size(e)?he(this.$t("nothing-found")):a.views.current.router.navigate("/statistics-customers/",{props:{customers:e}})},async platforms(){const e=(await s.get("/v1/statistics/platforms")).data;0===t.size(e)?he(this.$t("nothing-found")):a.views.current.router.navigate("/statistics-platforms/",{props:{platforms:e}})}}};Mr.render=function(e,t,a,i,s,d){const p=l("f7-nav-left"),h=l("f7-nav-title"),m=l("f7-navbar"),f=l("f7-block-title"),b=l("f7-list-item"),g=l("f7-list"),v=l("f7-page"),k=l("f7-view"),y=l("f7-popup");return n(),o(y,{"close-by-backdrop-click":!0},{default:r((()=>[c(k,{"stack-pages":!0},{default:r((()=>[c(v,null,{default:r((()=>[c(m,null,{default:r((()=>[c(p,{"back-link":e.$t("back"),"onClick:back":t[0]||(t[0]=t=>e.back())},null,8,["back-link"]),c(h,{title:e.$t("statistics")},null,8,["title"])])),_:1}),c(f,{textContent:u(e.$t("places"))},null,8,["textContent"]),c(g,null,{default:r((()=>[c(b,{title:e.$t("revenue"),link:"",onClick:t[1]||(t[1]=e=>d.revenue("place"))},null,8,["title"]),c(b,{title:e.$t("orders"),link:"",onClick:t[2]||(t[2]=e=>d.total("place"))},null,8,["title"]),c(b,{title:e.$t("average-check"),link:"",onClick:t[3]||(t[3]=e=>d.averageCheck("place"))},null,8,["title"]),c(b,{title:e.$t("popular"),link:"",onClick:t[4]||(t[4]=e=>d.popular("places"))},null,8,["title"])])),_:1}),c(f,{textContent:u(e.$t("products"))},null,8,["textContent"]),c(g,null,{default:r((()=>[c(b,{title:e.$t("revenue"),link:"",onClick:t[5]||(t[5]=e=>d.revenue("product"))},null,8,["title"]),c(b,{title:e.$t("purchases"),link:"",onClick:t[6]||(t[6]=e=>d.total("product"))},null,8,["title"]),c(b,{title:e.$t("popular"),link:"",onClick:t[7]||(t[7]=e=>d.popular("products"))},null,8,["title"])])),_:1}),c(f,{textContent:u(e.$t("seasons"))},null,8,["textContent"]),c(g,null,{default:r((()=>[c(b,{title:e.$t("revenue"),link:"",onClick:t[8]||(t[8]=e=>d.revenue("season"))},null,8,["title"]),c(b,{title:e.$t("purchases"),link:"",onClick:t[9]||(t[9]=e=>d.total("season"))},null,8,["title"]),c(b,{title:e.$t("popular"),link:"",onClick:t[10]||(t[10]=e=>d.popular("seasons"))},null,8,["title"])])),_:1}),c(f,{textContent:u(e.$t("other"))},null,8,["textContent"]),c(g,null,{default:r((()=>[c(b,{title:e.$t("customers"),link:"",onClick:t[11]||(t[11]=e=>d.customers())},null,8,["title"]),c(b,{title:e.$t("platforms"),link:"",onClick:t[12]||(t[12]=e=>d.platforms())},null,8,["title"]),c(b,{title:e.$t("payment-methods"),link:"",onClick:t[13]||(t[13]=e=>d.popular("payment-methods"))},null,8,["title"])])),_:1})])),_:1})])),_:1})])),_:1})};const Nr={name:"statistics-average-check-page",components:{LineChart:H.LineChart},props:{type:{type:String},purchases:Array},data(){const e={};t.each(this.purchases,(a=>{const i=t.get(a,"object.id");i&&(e[i]=a.object)}));let a=[];t.each(e,(e=>{a.push(e)})),a=t.sortBy(a,["name"]);const i=new Date;i.setDate(i.getDate()-30);const s=new Date,l=[i,s];let n="all";return 1===t.size(a)?n=a[0].id:a.unshift({id:"all",name:this.$t("all")}),{objectid:n,objects:a,starDate:i,endDate:s,calendarParams:{minDate:new Date(t.last(this.purchases).date),maxDate:new Date(t.first(this.purchases).date),value:l,rangePicker:!0,on:{change:this.change}}}},computed:{chartData(){const e=t.split(this.$t("month-names"),","),a={};t.each(this.purchases,(i=>{const s=new Date(i.date);G(s,this.starDate)&&K(s,W(this.endDate,{days:1}))&&("all"===this.objectid||this.objectid===i.object.id)&&(a[i.date]||(a[i.date]={data:0,label:`${s.getDate()} ${e[s.getMonth()]}`}),a[i.date].data+=t.parseInt(i.revenue/i.total))}));const i=[],s=[];return t.each(a,(e=>{i.unshift(e.label),s.unshift(e.data)})),{labels:i,datasets:[{label:this.$t("average-check"),data:s,fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]}},title(){let e="";switch(this.type){case"place":e="places";break;case"product":e="products";break;case"season":e="seasons"}return`${this.$t("average-check")}: ${t.toLower(this.$t(e))}`},virtualListHeight:()=>"md"===a.theme?48:44},methods:{change(e,a){this.starDate=a[0],1===t.size(a)?this.endDate=a[0]:this.endDate=a[1]}}},Fr=["value","textContent"],Rr={class:"item-content"},Hr={class:"item-inner"};Nr.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("f7-navbar"),v=l("f7-list-input"),k=l("f7-list-item"),y=l("LineChart"),x=l("f7-list"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(g,null,{default:r((()=>[c(h,{"back-link":e.$t("back")},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"])])),_:1}),c(x,null,{default:r((()=>[c(v,{type:"datepicker",placeholder:e.$t("dates-empty"),readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","calendar-params"]),s.objects.length>0?(n(),o(k,{key:0,"smart-select":"",disabled:1===s.objects.length,"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight},title:e.$t(a.type)},{default:r((()=>[f(m("select",{name:"objects","onUpdate:modelValue":t[0]||(t[0]=e=>s.objectid=e)},[(n(!0),$(C,null,w(s.objects,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,Fr)))),256))],512),[[P,s.objectid]])])),_:1},8,["disabled","smart-select-params","title"])):d("",!0),m("li",Rr,[m("div",Hr,[c(y,{chartData:p.chartData,height:380,width:600},null,8,["chartData"])])])])),_:1})])),_:1})};const Gr={name:"statistics-customers-page",components:{LineChart:H.LineChart},props:{type:{type:String},customers:Array},data(){const e={};t.each(this.customers,(a=>{const i=t.get(a,"object.id");i&&(e[i]=a.object)}));const a=new Date;a.setDate(a.getDate()-30);const i=new Date,s=[a,i];return{starDate:a,endDate:i,calendarParams:{minDate:new Date(t.last(this.customers).date),maxDate:new Date(t.first(this.customers).date),value:s,rangePicker:!0,on:{change:this.change}}}},computed:{chartData(){const e=t.split(this.$t("month-names"),","),a={};t.each(this.customers,(t=>{const i=new Date(t.date);G(i,this.starDate)&&K(i,W(this.endDate,{days:1}))&&(a[t.date]||(a[t.date]={data:0,label:`${i.getDate()} ${e[i.getMonth()]}`}),a[t.date].data+=t.total)}));const i=[],s=[];return t.each(a,(e=>{i.unshift(e.label),s.unshift(e.data)})),{labels:i,datasets:[{label:this.$t("total"),data:s,fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]}},title(){return`${this.$t("statistics")}: ${t.toLower(this.$t("customers"))}`}},methods:{change(e,a){this.starDate=a[0],1===t.size(a)?this.endDate=a[0]:this.endDate=a[1]}}},Kr={class:"item-content"},Wr={class:"item-inner"};Gr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-navbar"),f=l("f7-list-input"),b=l("LineChart"),g=l("f7-list"),v=l("f7-page");return n(),o(v,null,{default:r((()=>[c(h,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"])])),_:1}),c(g,null,{default:r((()=>[c(f,{type:"datepicker",placeholder:e.$t("dates-empty"),readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","calendar-params"]),m("li",Kr,[m("div",Wr,[c(b,{chartData:d.chartData,height:420,width:600},null,8,["chartData"])])])])),_:1})])),_:1})};const Zr={name:"statistics"};Zr.render=function(e,t,a,i,s,l){return null};const Yr={name:"statistics-popular",components:{DoughnutChart:H.DoughnutChart},props:{type:String,items:Array},computed:{chartData(){const e=[],a=[];return t.each(this.items,(t=>{e.push(t.name),a.push(t.purchases)})),{labels:e,datasets:[{data:a,backgroundColor:["#4cd964","#2196f3","#ff2d55","#ffcc00","#ff9500","#9c27b0","#673ab7","#5ac8fa","#009688","#cddc39"]}]}},title(){return`${this.$t("popular")}: ${t.toLower(this.$t(this.type))}`}}},Jr={class:"item-content"},Qr={class:"item-inner"};Yr.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-navbar"),f=l("DoughnutChart"),b=l("f7-list"),g=l("f7-page");return n(),o(g,null,{default:r((()=>[c(h,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"])])),_:1}),c(b,null,{default:r((()=>[m("li",Jr,[m("div",Qr,[c(f,{chartData:d.chartData,height:350,width:600},null,8,["chartData"])])])])),_:1})])),_:1})};const Xr={name:"statistics-revenue-page",components:{LineChart:H.LineChart},props:{type:{type:String},purchases:Array},data(){const e={};t.each(this.purchases,(a=>{const i=t.get(a,"object.id");i&&(e[i]=a.object)}));let a=[];t.each(e,(e=>{a.push(e)})),a=t.sortBy(a,["name"]);const i=new Date;i.setDate(i.getDate()-30);const s=new Date,l=[i,s];let n="all";return 1===t.size(a)?n=a[0].id:a.unshift({id:"all",name:this.$t("all")}),{objectid:n,objects:a,starDate:i,endDate:s,calendarParams:{minDate:new Date(t.last(this.purchases).date),maxDate:new Date(t.first(this.purchases).date),value:l,rangePicker:!0,on:{change:this.change}}}},computed:{chartData(){const e=t.split(this.$t("month-names"),","),a={};t.each(this.purchases,(t=>{const i=new Date(t.date);G(i,this.starDate)&&K(i,W(this.endDate,{days:1}))&&("all"===this.objectid||this.objectid===t.object.id)&&(a[t.date]||(a[t.date]={data:0,label:`${i.getDate()} ${e[i.getMonth()]}`}),a[t.date].data+=t.revenue)}));const i=[],s=[];return t.each(a,(e=>{i.unshift(e.label),s.unshift(e.data)})),{labels:i,datasets:[{label:this.$t("revenue"),data:s,fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]}},title(){let e="";switch(this.type){case"place":e="places";break;case"product":e="products";break;case"season":e="seasons"}return`${this.$t("revenue")}: ${t.toLower(this.$t(e))}`},virtualListHeight:()=>"md"===a.theme?48:44},methods:{change(e,a){this.starDate=a[0],1===t.size(a)?this.endDate=a[0]:this.endDate=a[1]}}},ec=["value","textContent"],tc={class:"item-content"},ac={class:"item-inner"};Xr.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("f7-navbar"),v=l("f7-list-input"),k=l("f7-list-item"),y=l("LineChart"),x=l("f7-list"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(g,null,{default:r((()=>[c(h,{"back-link":e.$t("back")},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"])])),_:1}),c(x,null,{default:r((()=>[c(v,{type:"datepicker",placeholder:e.$t("dates-empty"),readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","calendar-params"]),s.objects.length>0?(n(),o(k,{key:0,"smart-select":"",disabled:1===s.objects.length,"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight},title:e.$t(a.type)},{default:r((()=>[f(m("select",{name:"objects","onUpdate:modelValue":t[0]||(t[0]=e=>s.objectid=e)},[(n(!0),$(C,null,w(s.objects,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,ec)))),256))],512),[[P,s.objectid]])])),_:1},8,["disabled","smart-select-params","title"])):d("",!0),m("li",tc,[m("div",ac,[c(y,{chartData:p.chartData,height:380,width:600},null,8,["chartData"])])])])),_:1})])),_:1})};const ic={name:"statistics-total-page",components:{LineChart:H.LineChart},props:{type:{type:String},purchases:Array},data(){const e={};t.each(this.purchases,(a=>{const i=t.get(a,"object.id");i&&(e[i]=a.object)}));let a=[];t.each(e,(e=>{a.push(e)})),a=t.sortBy(a,["name"]);const i=new Date;i.setDate(i.getDate()-30);const s=new Date,l=[i,s];let n="all";return 1===t.size(a)?n=a[0].id:a.unshift({id:"all",name:this.$t("all")}),{objectid:n,objects:a,starDate:i,endDate:s,calendarParams:{minDate:new Date(t.last(this.purchases).date),maxDate:new Date(t.first(this.purchases).date),value:l,rangePicker:!0,on:{change:this.change}}}},computed:{chartData(){const e=t.split(this.$t("month-names"),","),a={};t.each(this.purchases,(t=>{const i=new Date(t.date);G(i,this.starDate)&&K(i,W(this.endDate,{days:1}))&&("all"===this.objectid||this.objectid===t.object.id)&&(a[t.date]||(a[t.date]={data:0,label:`${i.getDate()} ${e[i.getMonth()]}`}),a[t.date].data+=t.total)}));const i=[],s=[];return t.each(a,(e=>{i.unshift(e.label),s.unshift(e.data)})),{labels:i,datasets:[{label:this.$t("total"),data:s,fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]}},title(){let e="";switch(this.type){case"place":e="places";break;case"product":e="products";break;case"season":e="seasons"}return`${this.$t("orders")}: ${t.toLower(this.$t(e))}`},virtualListHeight:()=>"md"===a.theme?48:44},methods:{change(e,a){this.starDate=a[0],1===t.size(a)?this.endDate=a[0]:this.endDate=a[1]}}},sc=["value","textContent"],lc={class:"item-content"},nc={class:"item-inner"};ic.render=function(e,t,a,i,s,p){const h=l("f7-nav-left"),b=l("f7-nav-title"),g=l("f7-navbar"),v=l("f7-list-input"),k=l("f7-list-item"),y=l("LineChart"),x=l("f7-list"),_=l("f7-page");return n(),o(_,null,{default:r((()=>[c(g,null,{default:r((()=>[c(h,{"back-link":e.$t("back")},null,8,["back-link"]),c(b,{title:p.title},null,8,["title"])])),_:1}),c(x,null,{default:r((()=>[c(v,{type:"datepicker",placeholder:e.$t("dates-empty"),readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","calendar-params"]),s.objects.length>0?(n(),o(k,{key:0,"smart-select":"",disabled:1===s.objects.length,"smart-select-params":{closeOnSelect:!0,searchbar:!0,virtualList:!0,virtualListHeight:p.virtualListHeight},title:e.$t(a.type)},{default:r((()=>[f(m("select",{name:"objects","onUpdate:modelValue":t[0]||(t[0]=e=>s.objectid=e)},[(n(!0),$(C,null,w(s.objects,(e=>(n(),$("option",{value:e.id,textContent:u(e.name)},null,8,sc)))),256))],512),[[P,s.objectid]])])),_:1},8,["disabled","smart-select-params","title"])):d("",!0),m("li",lc,[m("div",nc,[c(y,{chartData:p.chartData,height:380,width:600},null,8,["chartData"])])])])),_:1})])),_:1})};const oc={name:"statistics-platforms-page",components:{LineChart:H.LineChart},props:{type:{type:String},platforms:Array},data(){const e={};t.each(this.platforms,(a=>{const i=t.get(a,"object.id");i&&(e[i]=a.object)}));const a=new Date;a.setDate(a.getDate()-30);const i=new Date,s=[a,i];return{starDate:a,endDate:i,calendarParams:{minDate:new Date(t.last(this.platforms).date),maxDate:new Date(t.first(this.platforms).date),value:s,rangePicker:!0,on:{change:this.change}}}},computed:{chartData(){const e=t.split(this.$t("month-names"),","),a={};t.each(this.platforms,(t=>{const i=new Date(t.date);G(i,this.starDate)&&K(i,W(this.endDate,{days:1}))&&(a[t.date]||(a[t.date]={ios:0,android:0,site:0,label:`${i.getDate()} ${e[i.getMonth()]}`}),a[t.date].ios+=t.ios,a[t.date].android+=t.android,a[t.date].site+=t.site)}));const i=[],s={ios:[],android:[],site:[]};return t.each(a,(e=>{i.unshift(e.label),s.ios.unshift(e.ios),s.android.unshift(e.android),s.site.unshift(e.site)})),{labels:i,datasets:[{label:"iOS",data:s.ios,fill:!1,borderColor:"#2196f3",tension:.1},{label:"Android",data:s.android,fill:!1,borderColor:"#009688",tension:.1},{label:this.$t("site"),data:s.site,fill:!1,borderColor:"#8e8e93",tension:.1}]}},title(){return`${this.$t("statistics")}: ${t.toLower(this.$t("platforms"))}`}},methods:{change(e,a){this.starDate=a[0],1===t.size(a)?this.endDate=a[0]:this.endDate=a[1]}}},rc={class:"item-content"},cc={class:"item-inner"};oc.render=function(e,t,a,i,s,d){const u=l("f7-nav-left"),p=l("f7-nav-title"),h=l("f7-navbar"),f=l("f7-list-input"),b=l("LineChart"),g=l("f7-list"),v=l("f7-page");return n(),o(v,null,{default:r((()=>[c(h,null,{default:r((()=>[c(u,{"back-link":e.$t("back")},null,8,["back-link"]),c(p,{title:d.title},null,8,["title"])])),_:1}),c(g,null,{default:r((()=>[c(f,{type:"datepicker",placeholder:e.$t("dates-empty"),readonly:"","calendar-params":s.calendarParams},null,8,["placeholder","calendar-params"]),m("li",rc,[m("div",cc,[c(b,{chartData:d.chartData,height:420,width:600},null,8,["chartData"])])])])),_:1})])),_:1})};const dc=[{path:"/",async:async({app:e,router:a,to:i,resolve:l,reject:n})=>{const o=await s.get("/v1/user/config");o&&(pe.commit("colors",o.data.colors),pe.commit("units",o.data.units),pe.commit("brands",o.data.brands),pe.commit("delivery",o.data.delivery),pe.commit("tables",o.data.tables),l({component:be}),await async function(){const e=fe();if(e&&e.token){const a=await s.get("/v1/user/auth").catch((e=>{e.response&&me()}));a&&me(t.defaults(a.data,e))}else me()}())}},{path:"/empty/",component:be},{path:"/sign-in/",popup:{component:Ri}},{path:"/skin/",popup:{component:ll}},{path:"/dashboard/",component:Oe},{path:"/operator/",component:Ne},{path:"/password-recovery/",component:tt},{path:"/accounts/",component:Xe},{path:"/html-editor/",component:it},{path:"/places/",component:ct},{path:"/place/:id/",popup:{component:xt}},{path:"/area/:id/",component:qt},{path:"/table/:id/",component:Lt},{path:"/brands/",component:Ot},{path:"/brand/:id/",popup:{component:Bt}},{path:"/catalog/",component:Et},{path:"/catalog/:id/",component:Et},{path:"/group/:id/",popup:{component:zi}},{path:"/group-move/",popup:{component:Ni}},{path:"/product/:id/",popup:{component:Ms}},{path:"/price/",component:Ht},{path:"/meta-item/",component:Ua},{path:"/form-item/",component:qo},{path:"/form-option/",component:zo},{path:"/schedule-item/",component:st},{path:"/modifiers/",component:Pa},{path:"/modifier/:id/",popup:{component:Hi}},{path:"/modifier-items/:id/",component:Da},{path:"/modifier-item/:id/",popup:{component:Ki}},{path:"/stickers/",component:nl},{path:"/sticker/:id/",popup:{component:ol}},{path:"/ingredients/",component:cl},{path:"/ingredient/:id/",popup:{component:dl}},{path:"/promotions/",component:ul},{path:"/promotion/:id/",popup:{component:kl}},{path:"/notifications/",component:$l},{path:"/notification/:id/",popup:{component:wl}},{path:"/seasons/",component:xl},{path:"/season/:id/",popup:{component:Sl}},{path:"/gifts/",component:Al},{path:"/gift/:id/",popup:{component:Vl}},{path:"/promocodes/",component:Hl},{path:"/promocode/:id/",popup:{component:Xl}},{path:"/reviews/",component:on},{path:"/support/",component:rn},{path:"/customers/",component:cn},{path:"/customer/:id/",popup:{component:dn}},{path:"/users/",component:un},{path:"/user/:id/",popup:{component:qn}},{path:"/agreements/",component:co},{path:"/agreement/:id/",popup:{component:uo}},{path:"/domains/",component:po},{path:"/domain/:id/",component:ho},{path:"/payment-methods/",component:go},{path:"/payment-method/:id/",component:vo},{path:"/form/",popup:{component:To}},{path:"/orders/",component:Ta},{path:"/order/:id/",popup:{component:ys}},{path:"/order-products/",component:Aa},{path:"/order-product/:id/",component:Ba},{path:"/sales-report/",component:Ka},{path:"/sales-report-filter/",popup:{component:Ui}},{path:"/users-filter/",popup:{component:Pi}},{path:"/sold-out/",popup:{component:Ar}},{path:"/review/",popup:{component:Br}},{path:"/statistics/",popup:{component:Mr}},{path:"/statistics-average-check/",component:Nr},{path:"/statistics-customers/",component:Gr},{path:"/statistics-payment-methods/",component:Zr},{path:"/statistics-popular/",component:Yr},{path:"/statistics-revenue/",component:Xr},{path:"/statistics-total/",component:ic},{path:"/statistics-platforms/",component:oc},{path:"/crop/",component:Di},{path:"/gallery/",component:Ti},{path:"/gallery-item/",component:Li},{path:"/profile/",popup:{component:Xs}},{path:"/change-password/",popup:{component:Oi}},{path:"/settings/",popup:{component:dr}},{path:"/settings-basic/",component:ur},{path:"/settings-notification/",component:gr},{path:"/settings-maps/",component:kr},{path:"/settings-email/",component:$r},{path:"/settings-call/",component:wr},{path:"/settings-socials/",component:xr},{path:"/settings-bot/",component:_r},{path:"/settings-apps/",component:Sr},{path:"/checklists/",component:jo},{path:"/checklist/:id/",popup:{component:Ao}},{path:"/checklist-item/",component:Bo},{path:"/checklist-option/",component:Vo},{path:"/inspections/",component:Mo},{path:"/inspection/:id/",popup:{component:ir}},{path:"/inspections-filter/",popup:{component:sr}},{path:"/cashback/",popup:{component:lr}},{path:"/mystery-shoppers/",popup:{component:nr}},{path:"/mystery-shopper/:id/",component:or},{path:"/settings-site/",component:Dr},{path:"/settings-theme/",component:Lr},{path:"/settings-sms/",component:Or},{path:"/settings-qrcode/",component:jr},{path:"/navigation/manager/",component:ge},{path:"/navigation/operator/",component:ve},{path:"/navigation/account/",component:De},{path:"(.*)",component:Te}],uc={setup(){const e=de("theme"),a={name:"office",theme:t.includes(["ios","md"],e)?e:"auto",routes:dc};return Z((()=>{Y((e=>{Ue()}))})),{f7params:a}},data:()=>({backTimeout:void 0}),created(){Array.prototype.move=function(e,t){if(t>=this.length){let e=t-this.length;for(;1+e--;)this.push(void 0)}return this.splice(t,0,this.splice(e,1)[0]),this},this.addLink("stylesheet",oe("/css/all.min.css")),this.addLink("stylesheet",oe("/css/leaflet.min.css")),this.addLink("icon",oe("/favicon.ico")),e.set("debug",window.location.href.indexOf("localhost")>=0)},mounted(){_(document).on("ontouchmove",(e=>{e.preventDefault()})),_(document).on("dragover",(e=>{e.preventDefault()})),_(document).on("dragleave",(e=>{e.preventDefault()})),_(document).on("drop",(e=>{e.preventDefault()})),_(document).on("contextmenu",(e=>{const a=t.toLower(e.target.tagName);"input"!==a&&"textarea"!==a&&e.preventDefault()})),window.onfocus=()=>{this.$store.commit("windowIsActive",!0),this.$store.state.ordersAreActive&&Ie("orders:update")},window.onblur=()=>{this.$store.commit("windowIsActive",!1)},history.pushState(null,null,location.href),window.onpopstate=()=>{history.go(1),this.back()},_(document).keyup((e=>{27===e.keyCode&&this.back()})),de("lang")?this.$i18n.locale=de("lang"):t.includes(t.trim(navigator.language),"ru")&&(this.$i18n.locale="ru"),a.params.language=this.$i18n.locale,a.params.dialog.buttonOk=this.$t("ok"),a.params.dialog.buttonCancel=this.$t("cancel"),a.params.dialog.preloaderTitle=this.$t("loading"),a.params.dialog.progressTitle=this.$t("loading"),a.params.smartSelect.pageBackLinkText=this.$t("back"),a.params.smartSelect.popupCloseLinkText=this.$t("close"),a.params.smartSelect.searchbarDisableText=this.$t("cancel"),a.params.smartSelect.searchbarPlaceholder=this.$t("search"),a.params.smartSelect.sheetCloseLinkText=this.$t("done"),document.title=this.$t("dashboard"),sl(),function(){const e=window.AudioContext||window.webkitAudioContext||!1;if(e){ke=new e;for(let e in ye)$e(e)}}()},methods:{addLink(e,t){const a=document.createElement("link");a.rel=e,a.href=t,document.head.appendChild(a)},back:t.debounce((function(){if(t.size(_(".dialog"))>0)return;const e=_(".popup");if(t.size(e)>0){let i=t.last(e);a.popup.get(i)&&a.popup.get(i).params.closeByBackdropClick&&a.popup.close(i)}else t.size(_(".with-panel"))>0?t.size(a.views.left.history)>1?a.views.left.router.back():a.panel.close():t.size(a.views.main.history)>1?a.views.main.router.back():a.device.cordova&&(this.backTimeout?navigator.app.exitApp():(he(this.$t("exit-message")),this.backTimeout=setTimeout((()=>{this.backTimeout=void 0}),5e3)))}),100)}},pc=x("Left panel content goes here"),hc=x("Right panel content goes here");uc.render=function(e,t,a,i,s,d){const u=l("f7-navbar"),p=l("f7-block"),h=l("f7-page"),m=l("f7-view"),f=l("f7-panel"),b=l("f7-app");return n(),o(b,J(Q(i.f7params)),{default:r((()=>[c(f,{left:"",reveal:""},{default:r((()=>[c(m,{name:"left","stack-pages":!0},{default:r((()=>[c(h,null,{default:r((()=>[c(u,{title:"Left Panel"}),c(p,null,{default:r((()=>[pc])),_:1})])),_:1})])),_:1})])),_:1}),c(f,{right:"",reveal:""},{default:r((()=>[c(m,{name:"right","stack-pages":!0},{default:r((()=>[c(h,null,{default:r((()=>[c(u,{title:"Right Panel"}),c(p,null,{default:r((()=>[hc])),_:1})])),_:1})])),_:1})])),_:1}),c(m,{main:!0,"stack-pages":!0,class:"safe-areas",url:"/"})])),_:1},16)};var mc={filter:"Filter",filters:"Filters","filter-one":"Only one","filter-several":"Several different","placement-everywhere":"Everywhere","placement-site":"On the site","placement-app":"In applications","placement-nowhere":"Nowhere","modifier-empty":"Select a modifier.","modifier-one":"Only one","modifier-several":"Several different","modifier-many":"Several of the same",signin:"Sign in","email-placeholder":"Your email address",phone:"Phone","password-placeholder":"Your password","exit-message":"Click again to close the application.",alert:"Message",cancel:"Cancel",ok:"OK",loading:"Loading ...",back:"Back",close:"Close",done:"Done",search:"Search","something-went-wrong":"Something went wrong :-(","forgot-password":"Forgot your password?","password-recovery-title":"Password reset","password-recovery-message":"Enter your email address and we will send you an email with a new password.","password-recovery-button":"Send new password","saved-accounts":"Accounts","no-saved-accounts":"There are no saved accounts.","fill-required-fields":"Please fill in the required fields.","fill-required-field":"Please fill",username:"Name",message:"Message","date-format":"MM/dd/yyyy","date-and-time-format":"MM/dd/yyyy h:mm aa","onesignal-welcome-notification-title":"Thank you!","onesignal-welcome-notification-message":"You will now receive notifications!","onesignal-prompt-options-action-message":"Turn on notifications to receive alerts.","onesignal-prompt-options-cancel-button-text":"LATER","incorrect-password":"You entered an incorrect password. Would you like to receive a new password?",yes:"Yes",no:"No","nothing-found":"Nothing found",deleting:"Deleting","delete-confirm":"Are you sure you want to delete the selection?","password-recovery-success":"New password has been sent to your email address",admin:"Administrator",amount:"Amount","amount-empty":"Enter the amount.","layout-theme":"Background color","color-theme":"Theme color",profile:"Profile","change-password":"Change password","sign-out":"Exit","sign-out-note":"Are you sure you want to sign out of this account?","current-password":"Current password","create-password":"Create a password","repeat-password":"Repeat password","change-password-successful":"Password changed successfully.",save:"Save","save-and-send":"Save and send",basic:"Basic","not-support-file-uploads":"Your browser does not support file uploads.","loading-files":"Loading files","loading-file":"Loading file",picture:"Picture","picture-subtitle":"Add a picture","picture-text":"The image must be in JPG or PNG format (no transparent background), no more than 5 MB in size.","gallery-subtitle":"Add an image or video.","gallery-text":"Images must be in JPG or PNG format, no more than 5 MB in size.","profile-successful":"Profile saved successfully.",video:"Video",add:"Add",adding:"Adding",editing:"Editing",name:"Name",domains:"Domains",domain:"Domain","domain-empty":"Please enter a domain.",link:"Link",gallery:"Gallery",code:"Code",color:"Color",type:"Type",displayed:"Displayed",active:"Active",value:"Value",once:"Once",placement:"Placement",description:"Description",date:"Date",time:"Time",additionally:"Additionally",additional:"Additional",hit:"Hit",menu:"Menu",orders:"Orders","order-item":"Order",products:"Products",modifiers:"Modifiers",stickers:"Stickers",sticker:"Sticker",ingredients:"Ingredients",ingredient:"Ingredient",allergen:"Allergen",discounts:"Discounts","no-access":"You do not have access.",dashboard:"Control Panel",welcome:"Welcome to the control panel!",places:"Points of sale",authorization:"Authorization","password-recovery":"Forgot your password?","sign-in":"Login","password-empty":"Enter password.",place:"Point of sale","place-empty":"Select a point of sale.","place-only-one":"Choose only one point of sale.","place-save-first":"Save this point of sale first.",obtaining:"Method of obtaining.",delivery:"Delivery",pickup:"Take away",inside:"Inside","not-required":"optional",notifications:"Notifications",country:"Country",city:"City","city-empty":"Select a city.",schedule:"Schedule","schedule-start":"Getting started","schedule-end":"End of work",daily:"Daily","schedule-always":"Around the clock","schedule-daily":"Specific time","schedule-differently":"Different times","date-empty":"Select a date.","time-empty":"Select time.","no-header":"No header","no-description":"There is no description","add-video":"YouTube video","add-video-note":"Insert YouTube video link:","add-video-success":"Video added successfully","add-video-fail":"Failed to add video","drop-zone":"To download, drag the file here.","working-day":"Working day","full-day":"All day",break:"Break","break-start":"Break start","break-duration":"Break duration","break-error":"The break must be within working hours","without-break":"Without a break",h:"h",m:"m","phone-empty":"Specify phone number.","email-empty":"Enter your Email.",title:"Title",permits:"Permits","payment-methods":"Payment methods",currency:"Currency","currency-empty":"Select currency.","name-empty":"Please enter a name.","message-empty":"Enter your message.",operator:"Operator",user:"User",guest:"Guest",manager:"Manager",write:"Read and write",read:"Read only",not:"Not available",banner:"Banner","banner-site":"Big screen banner","banner-app":"Small screen banner","banner-note":"The banner must be of the following size: {width}x{height} px.",test:"Test",cash:"Cash",terminal:"By card to courier",sberbank:"Sberbank",alfabank:"Alfa-Bank",tinkoff:"Tinkoff",stripe:"Stripe",cloudpayments:"CloudPayments",postalcode:"Postal code","places-availability":"Availability at points of sale",never:"Never",socials:"Social networks",navigation:"Navigation",settings:"Settings",site:"Site",keywords:"Keywords",meta:"Meta tags",theme:"Theme",icon:"Icon",logo:"Logo",background:"Background",colors:"Colors",employees:"Employees","user-profile":"Employee profile",users:"Users",fields:"Fields",field:"Field",text:"Text",number:"Number",email:"Email",password:"Password",url:"Link",tel:"Phone",checkbox:"Checkbox",radio:"Radio button",select:"List",textarea:"Textarea",file:"File",label:"Label",placeholder:"Placeholder",min:"Minimum",max:"Maximum",step:"Step",multiple:"Multiple",required:"Required",rows:"Rows",items:"Items","items-empty":"Add at least one item.",disabled:"Disabled",info:"Information",separator:"Separator",yesno:"Yes / No",ready:"Ready","finish-order-title":"Order completion","finish-order-content":"Are you sure you want to complete the order?","gift-title":"Enter the code","gift-message":"Enter the code given by the buyer to credit him a gift.","test-order":"Test order","test-order-content":"Are you sure you want to create a test order?","short-description":"Short description","full-description":"Full description","full-description-empty":"Enter a full description.","title-empty":"Enter title.","description-empty":"Enter a description.",showcase:"Showcase",marketing:"Marketing",seasons:"Subscriptions",season:"Subscription",promocodes:"Promo codes",price:"Price","old-price":"Old price","price-empty":"Specify a price.",address:"Address","address-empty":"Enter address.",promotions:"Promotions","orders-current":"Current","orders-processed":"Processing","orders-delivered":"Delivered","orders-completed":"Completed","orders-unpaid":"Unpaid","order-list":"Order contents",total:"Total",wishes:"Wishes","products-sold":"Show in the showcase",prices:"Prices","cost-packing":"Packing cost","add-the-price":"Add price",new:"New order",preparing:"Preparing to build",delivered:"The order is being delivered",finished:"Order completed",canceled:"Order canceled",method:"Method",gifts:"Gifts",gift:"Gift",added:"Added","execution-time":"Time of order execution","desired-time":"Desired time","anytime-soon":"Soon","certain-time":"At a certain time","address-receipt-empty":"Select a receiving address.","order-save":"Order sent successfully","cart-empty":"Add products.","change-order-status":"Change order status",discount:"Discount","payment-method":"Payment method",google:"Google Pay",apple:"Apple Pay",balance:"Balance",bonuses:"Bonuses",reviews:"Reviews",review:"Review","price-levels":"Price levels",measure:"Measure","measure-empty":"Select measure.","vendor-code":"SKU",periodicity:"Periodicity","change-group":"Change group","on-sale":"Stop list",call:"Call",sms:"SMS",groups:"Groups",selection:"Selection","selection-required":"Selection required",maximum:"Maximum",percent:"Percentage",proteins:"Proteins",fats:"Fats",carbohydrates:"Carbohydrates",energy:"Energy value","discounts-combines":"May be readable with other promotions",audience:"Audience","gender-empty":"Select gender.",man:"Men",woman:"Women",gender:"Gender","age-empty":"Select age.","age-from":"Minimum age","age-to":"Maximum age","discounts-triggering":"Number of triggers","discounts-settings":"Promotion settings","discounts-type":"Promotion type","discounts-type-base":"Basic Promotion","discounts-type-pickup":"For pickup","discounts-type-first":"For the first order","discounts-type-next":"For the second and subsequent orders","discounts-type-birthday":"Birthday present","discounts-type-birthday-after":"Days after birthday","discounts-type-birthday-before":"Days before the birthday","discounts-privilege":"What will the buyer get?","discounts-privilege-base":"Privilege","discounts-privilege-check":"Discount for check","discounts-privilege-size-of-discounts":"Discount amount","discounts-privilege-products":"Discounted product(s)","discounts-privilege-product":"Gift item","discounts-condition":"Under what condition will the promotion be triggered?","discounts-condition-base":"Condition","discounts-condition-check":"For the amount in the check","discounts-condition-minimum":"Minimum order amount","discounts-condition-products":"Products in order",processes:"Processes","number-of-purchases":"Purchases","new-status":"New status",agreements:"Agreements",photo:"Photo",photos:"Photos","application-links":"Application links",period:"Display period",dates:"Dates","dates-empty":"Select dates.","period-type":"When to display","period-always":"Always","period-till":"Until the date","period-range":"Date range","period-multiple":"Specific dates","period-start":"Display start","period-end":"End of display",group:"Group","group-empty":"Select a group.",product:"Product","product-empty":"Select a product.","reorder-up":"Above all","exit-without-saving":"Exit without saving?",quantity:"Quantity","choose-quantity":"Choose quantity",customers:"Customers",skin:"Color scheme","delivery-areas":"Delivery areas","add-product":"Add at least one product","add-gift":"Add at least one gift",role:"Role","contact-details":"Contact information",primary:"Default",maps:"Maps",secure:"Secure connection",host:"Host",port:"Port",login:"Login",provider:"Provider",organization:"Organization",cashback:"Cashback","cashback-percentage":"Percentage of order (1 - 100)","cashback-maximum":"Maximum discount in percent (1 - 100)","cashback-product":"Enter the cashback value for this product, or leave it blank.",reports:"Reports","sales-report":"Sales report","give-review":"Leave a review","select-time":"Select time",send:"Send",positive:"Positive",negative:"Negative","email-support":"Email support","email-primary":"Primary Email","email-order":"Email for receiving orders",notification:"Notification",bot:"Bot","in-detail":"In detail","by-days":"By days",duration:"Duration",checklists:"Checklists",checklist:"Checklist","checklist-empty":"Select a checklist.",inspections:"Inspections",inspection:"Inspection","attach-photo":"Attach a photo",weight:"Weight","min-weight":"Minimum weight",violations:"Violations",violation:"Violation",forms:"Forms",promotion:"Promotion","promotion-empty":"Select a promotion.",content:"Content","link-empty":"Enter the link.","season-empty":"Select a subscription.","gift-empty":"Choose a gift.",sending:"Sending","send-confirm":"Are you sure you want to send the selected notification?",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday",redirect:"Redirect",iframe:"IFrame",statistics:"Statistics",revenue:"Revenue","average-check":"Average check",popular:"Popular",other:"Other",all:"All","month-names":"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",support:"Support",interval:"Interval",platforms:"Platforms",purchases:"Purchases",expires:"Expires",brands:"Brands",brand:"Brand",choice:"Choice","mystery-shopper":"Mystery shopper","phone-or-email":"Phone or email",pending:"Pending",working:"Working",status:"Status",tables:"Tables","in-development":"The function is under development.",pages:"Pages",articles:"Articles","delivery-area":"Delivery area","waiting-time":"Waiting time (in minutes)","cost-delivery":"Cost of delivery","free-delivery":"Free delivery from","minimum-amount":"Minimum order amount",booking:"Booking"};var fc={filter:"Фильтр",filters:"Фильтры","filter-one":"Только один","filter-several":"Несколько разных","placement-everywhere":"Везде","placement-site":"На сайте","placement-app":"В приложениях","placement-nowhere":"Нигде","modifier-empty":"Выберите модификатор.","modifier-one":"Только один","modifier-several":"Несколько разных","modifier-many":"Несколько одинаковых",signin:"Войти","email-placeholder":"Ваш email адрес",phone:"Телефон","password-placeholder":"Ваш пароль","exit-message":"Нажмите еще раз, чтобы закрыть приложение.",alert:"Сообщение",cancel:"Отмена",ok:"OK",loading:"Загрузка...",back:"Назад",close:"Закрыть",done:"Готово",search:"Поиск","something-went-wrong":"Что-то пошло не так :-(","forgot-password":"Забыли пароль?","password-recovery-title":"Сброс пароля","password-recovery-message":"Введите ваш email адрес и мы отправим вам письмо с новым паролем.","password-recovery-button":"Отправить новый пароль","saved-accounts":"Аккаунты","no-saved-accounts":"Нет сохраненных аккаунтов.","fill-required-fields":"Заполните обязательные поля.","fill-required-field":"Заполните",username:"Имя",message:"Сообщение","date-format":"dd.MM.yyyy","date-and-time-format":"dd.MM.yyyy HH:mm","onesignal-welcome-notification-title":"Спасибо!","onesignal-welcome-notification-message":"Теперь вы будете получать оповещения!","onesignal-prompt-options-action-message":"Включите уведомления, чтобы получать оповещения.","onesignal-prompt-options-cancel-button-text":"ПОЗЖЕ","incorrect-password":"Вы ввели неправильный пароль. Хотите получить новый пароль?",yes:"Да",no:"Нет","nothing-found":"Ничего не найдено",deleting:"Удаление","delete-confirm":"Вы действительно хотите удалить выбранное?","password-recovery-success":"Новый пароль отправлен на ваш email адрес",admin:"Администратор",amount:"Сумма","amount-empty":"Укажите сумму.","layout-theme":"Цвет фона","color-theme":"Цвет темы",profile:"Профиль","change-password":"Изменить пароль","sign-out":"Выйти","sign-out-note":"Вы действительно хотите выйти из этого аккаунта?","current-password":"Текущий пароль","create-password":"Придумайте пароль","repeat-password":"Повторите пароль","change-password-successful":"Пароль успешно изменен.",save:"Сохранить","save-and-send":"Сохранить и отправить",basic:"Основные","not-support-file-uploads":"Ваш браузер не поддерживает загрузку файлов.","loading-files":"Загрузка файлов","loading-file":"Загрузка файла",picture:"Изображение","picture-subtitle":"Добавьте изображение","picture-text":"Изображение должно быть в формате JPG или PNG (не прозрачный фон), размером не более 5 MB.","gallery-subtitle":"Добавьте изображение или видео.","gallery-text":"Изображения должны быть в формате JPG или PNG, размером не более 5 MB.","profile-successful":"Профиль успешно сохранен.",video:"Видео",add:"Добавить",adding:"Добавление",editing:"Редактирование",name:"Название",domains:"Домены",domain:"Домен","domain-empty":"Укажите домен.",link:"Ссылка",gallery:"Галерея",code:"Код",color:"Цвет",type:"Тип",displayed:"Отображается",active:"Активный",value:"Значение",once:"Однажды",placement:"Размещение",description:"Описание",date:"Дата",time:"Время",additionally:"Дополнительно",additional:"Дополнительный",hit:"Хит",menu:"Меню",orders:"Заказы","order-item":"Заказ",products:"Товары",modifiers:"Модификаторы",stickers:"Наклейки",sticker:"Наклейка",ingredients:"Ингредиенты",ingredient:"Ингредиент",allergen:"Аллерген",discounts:"Скидки","no-access":"У вас нет доступа.",dashboard:"Панель управления",welcome:"Добро пожаловать в панель управления!",places:"Точки продаж",authorization:"Авторизация","password-recovery":"Забыли пароль?","sign-in":"Логин","password-empty":"Введите пароль.",place:"Точка продаж","place-empty":"Выберите точку продаж.","place-only-one":"Выберите одну точку продаж.","place-save-first":"Сначала сохраните эту точку продаж.",obtaining:"Способ получения",delivery:"Доставка",pickup:"С собой",inside:"На месте","not-required":"не обязательно",notifications:"Оповещения",country:"Страна",city:"Город","city-empty":"Выберите город.",schedule:"Расписание","schedule-start":"Начало работы","schedule-end":"Окончание работы",daily:"Ежедневно","schedule-always":"Круглосуточно","schedule-daily":"Определенное время","schedule-differently":"Разное время","date-empty":"Выберите дату.","time-empty":"Выберите время.","no-header":"Заголовок отсутствует","no-description":"Описание отсутствует","add-video":"Видео из YouTube","add-video-note":"Вставьте ссылку на YouTube видео:","add-video-success":"Видео успешно добавлено","add-video-fail":"Не удалось добавить видео","drop-zone":"Для загрузки, перетащите файл сюда.","working-day":"Рабочий день","full-day":"Целый день",break:"Перерыв","break-start":"Начало перерыва","break-duration":"Длительность перерыва","break-error":"Перерыв должен быть в пределах рабочего времени","without-break":"Без перерыва",h:"ч.",m:"м.","phone-empty":"Укажите телефон.","email-empty":"Укажите Email.",title:"Заголовок",permits:"Права","payment-methods":"Способы оплаты",currency:"Валюта","currency-empty":"Выберите валюту.","name-empty":"Укажите имя.","message-empty":"Введите сообщение.",operator:"Оператор",user:"Пользователь",guest:"Гость",manager:"Менеджер",write:"Чтение и запись",read:"Только чтение",not:"Недоступно",banner:"Баннер","banner-site":"Баннер для большого экрана","banner-app":"Баннер для маленького экрана","banner-note":"Баннер должен быть размером: {width}x{height} px.",test:"Тестовый",cash:"Наличные",terminal:"Картой курьеру",sberbank:"Сбербанк",alfabank:"Альфа-Банк",tinkoff:"Тинькофф",stripe:"Stripe",cloudpayments:"CloudPayments",postalcode:"Почтовый индекс","places-availability":"Доступность в точках продаж",never:"Никогда",socials:"Социальные сети",navigation:"Навигация",settings:"Настройки",site:"Сайт",keywords:"Ключевые слова",meta:"Метатеги",theme:"Тема",icon:"Иконка",logo:"Логотип",background:"Фон",colors:"Цвета",employees:"Сотрудники","user-profile":"Профиль сотрудника",users:"Пользователи",fields:"Поля",field:"Поле",text:"Текст",number:"Число",email:"Email",password:"Пароль",url:"Ссылка",tel:"Телефон",checkbox:"Флажок",radio:"Радио кнопка",select:"Список",textarea:"Текстовое поле",file:"Файл",label:"Заголовок",placeholder:"Подсказка",min:"Минимум",max:"Максимум",step:"Шаг",multiple:"Несколько",required:"Обязательно",rows:"Строк",items:"Элменты","items-empty":"Добавьте хотя бы один элемент.",disabled:"Отключен",info:"Информация",separator:"Разделитель",yesno:"Да / Нет",ready:"Готово","finish-order-title":"Завершение заказа","finish-order-content":"Вы действительно хотите завершить заказ?","gift-title":"Введите код","gift-message":"Введите код, который назвал покупатель, чтобы начислить ему подарок.","test-order":"Тестовый заказ","test-order-content":"Вы действительно хотите создать тестовый заказ?","short-description":"Краткое описание","full-description":"Полное описание","full-description-empty":"Введите полное описание.","title-empty":"Введите название.","description-empty":"Введите описание.",showcase:"Витрина",marketing:"Маркетинг",seasons:"Абонементы",season:"Абонемент",promocodes:"Промокоды",price:"Цена","old-price":"Старая цена","price-empty":"Укажите цену.",address:"Адрес","address-empty":"Введите адрес.",promotions:"Промоакции","orders-current":"Текущие","orders-processed":"В обработке","orders-delivered":"Доставляются","orders-completed":"Завершённые","orders-unpaid":"Неоплаченные","order-list":"Состав заказа",total:"Всего",wishes:"Пожелания","products-sold":"Отображать на витрине",prices:"Цены","cost-packing":"Стоимость упаковки","add-the-price":"Добавьте цену",new:"Новый заказ",preparing:"Подготовка к сборке",delivered:"Заказ доставляется",finished:"Заказ завершен",canceled:"Заказ отменен",method:"Способ",gifts:"Подарки",gift:"Подарок",added:"Добавлено","execution-time":"Время исполнения заказа","desired-time":"Желаемое время","anytime-soon":"В ближайшее время","certain-time":"В кокрентное время","address-receipt-empty":"Выберите адрес получения.","order-save":"Заказ успешно отправлен","cart-empty":"Добавьте товары.","change-order-status":"Изменить статус заказа",discount:"Скидка","payment-method":"Способ оплаты",google:"Google Pay",apple:"Apple Pay",balance:"Баланс",bonuses:"Бонусы",reviews:"Отзывы",review:"Отзыв","price-levels":"Уровни цен",measure:"Мера","measure-empty":"Выберите меру.","vendor-code":"Артикул",periodicity:"Периодичность","change-group":"Изменить группу","on-sale":"Стоп лист",call:"Звонок",sms:"СМС",groups:"Группы",selection:"Выбор","selection-required":"Выбор обязателен",maximum:"Максимум",percent:"Процент",proteins:"Белки",fats:"Жиры",carbohydrates:"Углеводы",energy:"Энергетическая ценность","discounts-combines":"Сочитается с другими акциями",audience:"Аудитория","gender-empty":"Выберите пол.",man:"Мужчины",woman:"Женщины",gender:"Пол","age-empty":"Выберите возраст.","age-from":"Минимальный возраст","age-to":"Максимальный возраст","discounts-triggering":"Количество срабатываний","discounts-settings":"Настроки акции","discounts-type":"Тип акции","discounts-type-base":"Базовая акция","discounts-type-pickup":"За самовывоз","discounts-type-first":"За первый заказ","discounts-type-next":"За второй и последующие заказы","discounts-type-birthday":"Подарок на день рождения","discounts-type-birthday-after":"Дней после дня рождения","discounts-type-birthday-before":"Дней до дня рождения","discounts-privilege":"Что получит покупатель?","discounts-privilege-base":"Привилегия","discounts-privilege-check":"Скидка на чек","discounts-privilege-size-of-discounts":"Величина скидки","discounts-privilege-products":"Товар(ы) со скидкой","discounts-privilege-product":"Товар в подарок","discounts-condition":"При каком условии сработает акция?","discounts-condition-base":"Условие","discounts-condition-check":"За сумму в чеке","discounts-condition-minimum":"Минимальная сумма заказа","discounts-condition-products":"Товары в заказе",processes:"Обрабатывает","number-of-purchases":"Покупок","new-status":"Новый статус",agreements:"Соглашения",photo:"Фотография",photos:"Фотографии","application-links":"Ссылки приложений",period:"Период отображения",dates:"Даты","dates-empty":"Выберите даты.","period-type":"Когда отображать","period-always":"Всегда","period-till":"До даты","period-range":"Интервал дат","period-multiple":"Конкретные даты","period-start":"Начало отображения","period-end":"Окончание отображения",group:"Группа","group-empty":"Выберите группу.",product:"Товар","product-empty":"Выберите товар.","reorder-up":"Выше всех","exit-without-saving":"Выйти без сохранения?",quantity:"Количество","choose-quantity":"Выберите количество",customers:"Покупатели",skin:"Цветовая схема","delivery-areas":"Области доставки","add-product":"Добавьте хотя бы один товар","add-gift":"Добавьте хотя бы один подарок",role:"Роль","contact-details":"Контактная информация",primary:"По умолчанию",maps:"Карты",secure:"Безопасное соединение",host:"Хост",port:"Порт",login:"Логин",provider:"Провайдер",organization:"Организация",cashback:"Кэшбэк","cashback-percentage":"Процент от заказа (1 - 100)","cashback-maximum":"Максимальная скидка в процентах (1 - 100)","cashback-product":"Укажите значение кэшбэка для этого товара, либо оставьте поле пустым.",reports:"Отчеты","sales-report":"Отчет о продажах","give-review":"Оставить отзыв","select-time":"Выберите время",send:"Отправить",positive:"Положительный",negative:"Отрицательный","email-support":"Email поддержки","email-primary":"Основной Email","email-order":"Email для приема заказов",notification:"Уведомление",bot:"Бот","in-detail":"Подробно","by-days":"По дням",duration:"Длительность",checklists:"Чек-листы",checklist:"Чек-лист","checklist-empty":"Выберите чек-лист.",inspections:"Проверки",inspection:"Проверка","attach-photo":"Прикрепить фото",weight:"Вес","min-weight":"Минимальный вес",violations:"Нарушения",violation:"Нарушение",forms:"Формы",promotion:"Промоакция","promotion-empty":"Выберите промоакцию.",content:"Контент","link-empty":"Введите ссылку.","season-empty":"Выберите абонемент.","gift-empty":"Выберите подарок.",sending:"Отправка","send-confirm":"Вы действительно хотите отправить выбранную рассылку?",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота",sunday:"Воскресенье",redirect:"Перенаправление",iframe:"IFrame",statistics:"Статистика",revenue:"Выручка","average-check":"Средний чек",popular:"Популярные",other:"Прочее",all:"Все","month-names":"Янв,Фев,Мар,Апр,Май,Июн,Июл,Авг,Сен,Окт,Ноя,Дек",support:"Поддержка",interval:"Интервал",platforms:"Платформы",purchases:"Покупки",expires:"Истекает",brands:"Бренды",brand:"Бренд",choice:"Выбор","mystery-shopper":"Тайный покупатель","phone-or-email":"Телефон или email",pending:"В ожидании",working:"Работает",status:"Статус",tables:"Столы","in-development":"Функция в разработке.",pages:"Страницы",articles:"Статьи","delivery-area":"Области доставки","waiting-time":"Время ожидания (в минутах)","cost-delivery":"Стоимость доставки","free-delivery":"Бесплатная доставка от","minimum-amount":"Минимальная сумма заказа",booking:"Бронирования"};X.use(ee);const bc=te(uc);ae(bc),ie(s,{retries:3}),s.defaults.baseURL=oe(),s.interceptors.request.use((e=>{!1!==e.preloader&&a.preloader.show(),void 0===e.params&&(e.params={}),e.params.from="office",e.params.lang=a.params.language;const t=fe();return t&&(e.auth={username:t.id,password:t.token}),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>(a.preloader.hide(),e)),(e=>(a.preloader.hide(),e.response&&(401===e.response.status?me():he(e.response.data?e.response.data:(void 0).$t("something-went-wrong"))),Promise.reject(e)))),se.register(...le);const gc=ne.exports.createI18n({locale:"en",messages:{en:mc,ru:fc}});bc.use(gc),bc.use(pe),bc.mount("#app");
